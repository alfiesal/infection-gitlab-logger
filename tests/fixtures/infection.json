{
  "stats": {
    "totalMutantsCount": 302,
    "killedCount": 151,
    "notCoveredCount": 26,
    "escapedCount": 0,
    "errorCount": 1,
    "syntaxErrorCount": 0,
    "skippedCount": 92,
    "ignoredCount": 0,
    "timeOutCount": 32,
    "msi": 87.62,
    "mutationCodeCoverage": 87.62,
    "coveredCodeMsi": 100
  },
  "escaped": [],
  "timeouted": [
    {
      "mutator": {
        "mutatorName": "CastInt",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Events\/BaseReservation.php",
        "originalStartLine": 33
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     }\n     public function channelId() : int\n     {\n-        return (int) $this->payload()['channelId'];\n+        return $this->payload()['channelId'];\n     }\n     public function offerId() : int\n     {",
      "processOutput": ""
    },
    {
      "mutator": {
        "mutatorName": "PublicVisibility",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    protected function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Events\/BaseReservation.php",
        "originalStartLine": 43
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         $room = $this->firstRoom();\n         return (int) $room['ratePlanId']['systemId'];\n     }\n-    public function createdAt() : DateTimeImmutable\n+    protected function createdAt() : DateTimeImmutable\n     {\n         return new DateTimeImmutable($this->payload()['createdAt']);\n     }",
      "processOutput": ""
    },
    {
      "mutator": {
        "mutatorName": "PublicVisibility",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    protected function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Events\/BaseReservation.php",
        "originalStartLine": 58
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     {\n         return $this->payload()['currency'];\n     }\n-    public function checkIn() : DateTimeImmutable\n+    protected function checkIn() : DateTimeImmutable\n     {\n         $room = $this->firstRoom();\n         return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\n.........E\n\nTime: 00:00.543, Memory: 24.00 MB\n\nThere was 1 error:\n\n1) Profitroom\\Communication\\AutomatedMessages\\Test\\Unit\\Application\\Bus\\Events\\ReservationCreatedTest::test_should_return_check_in_at_13_00"
    },
    {
      "mutator": {
        "mutatorName": "IncrementInteger",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(14, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Events\/BaseReservation.php",
        "originalStartLine": 62
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     public function checkIn() : DateTimeImmutable\n     {\n         $room = $this->firstRoom();\n-        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n+        return (new DateTimeImmutable($room['stay']['from']))->setTime(14, 0);\n     }\n     public function checkOut() : DateTimeImmutable\n     {",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nF\n\nTime: 00:00.633, Memory: 24.00 MB\n\nThere was 1 failure:\n\n1) Profitroom\\Communication\\AutomatedMessages\\Test\\Unit\\Application\\Bus\\Events\\ReservationCreatedTest::test_should_return_check_in_at_13_00"
    },
    {
      "mutator": {
        "mutatorName": "DecrementInteger",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, -1);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Events\/BaseReservation.php",
        "originalStartLine": 69
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     public function checkOut() : DateTimeImmutable\n     {\n         $room = $this->firstRoom();\n-        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n+        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, -1);\n     }\n     public function status() : ReservationStatus\n     {",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\n..........F\n\nTime: 00:00.454, Memory: 24.00 MB\n\nThere was 1 failure:\n\n1) Profitroom\\Communication\\AutomatedMessages\\Test\\Unit\\Application\\Bus\\Events\\ReservationCreatedTest::test_should_return_check_out_at_11_00\nFailed asserting that two DateTime objects are equal.\n--- Expected\n+++ Actual\n@@ @@\n-2022-10-05T11:00:00.000000+0200\n+2022-10-05T10:59:00.000000+0200\n\n\/var\/www\/tests\/Unit\/Application\/Bus\/Events\/ReservationCreatedTest.php:99\n\nFAILURES!\nTests: 11, Assertions: 11, Failures: 1."
    },
    {
      "mutator": {
        "mutatorName": "IncrementInteger",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 1);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Events\/BaseReservation.php",
        "originalStartLine": 69
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     public function checkOut() : DateTimeImmutable\n     {\n         $room = $this->firstRoom();\n-        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n+        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 1);\n     }\n     public function status() : ReservationStatus\n     {",
      "processOutput": ""
    },
    {
      "mutator": {
        "mutatorName": "UnwrapArrayFilter",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return $rooms;\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Events\/BaseReservation.php",
        "originalStartLine": 92
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     }\n     private function findNotCancelledRooms(array $rooms) : array\n     {\n-        return array_filter($rooms, static function (array $room) : bool {\n-            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n-        });\n+        return $rooms;\n     }\n     private function firstRoom() : array\n     {",
      "processOutput": ""
    },
    {
      "mutator": {
        "mutatorName": "PublicVisibility",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerAction;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeAspect;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeUnit;\ntrait GetMessage\n{\n    public function automatedMessageName() : string\n    {\n        return $this->payload()['name'];\n    }\n    public function replyTo() : string\n    {\n        return $this->payload()['replyTo'];\n    }\n    public function triggerTimeUnit() : TriggerTimeUnit\n    {\n        return TriggerTimeUnit::from($this->payload()['triggerTimeUnit']);\n    }\n    public function triggerValue() : int\n    {\n        return (int) $this->payload()['triggerValue'];\n    }\n    public function triggerTimeAspect() : TriggerTimeAspect\n    {\n        return TriggerTimeAspect::from($this->payload()['triggerTimeAspect']);\n    }\n    public function triggerAction() : TriggerAction\n    {\n        return TriggerAction::from($this->payload()['triggerAction']);\n    }\n    public function templateSettings() : array\n    {\n        $templateSettings = [];\n        foreach ($this->payload()['templateSettings'] as $languageCode => $templateSetting) {\n            $templateSettings[$languageCode] = ['site_id' => $this->siteId(), 'language_code' => $languageCode, 'is_html' => $templateSetting['isHtml'], 'subject' => $templateSetting['subject'], 'content' => $templateSetting['content']];\n        }\n        return $templateSettings;\n    }\n    public function filters() : array\n    {\n        return array_map(fn(array $filter): array => ['site_id' => $this->siteId(), 'name' => $filter['name'], 'value' => $filter['value']], $this->payload()['filters']);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerAction;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeAspect;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeUnit;\ntrait GetMessage\n{\n    public function automatedMessageName() : string\n    {\n        return $this->payload()['name'];\n    }\n    public function replyTo() : string\n    {\n        return $this->payload()['replyTo'];\n    }\n    protected function triggerTimeUnit() : TriggerTimeUnit\n    {\n        return TriggerTimeUnit::from($this->payload()['triggerTimeUnit']);\n    }\n    public function triggerValue() : int\n    {\n        return (int) $this->payload()['triggerValue'];\n    }\n    public function triggerTimeAspect() : TriggerTimeAspect\n    {\n        return TriggerTimeAspect::from($this->payload()['triggerTimeAspect']);\n    }\n    public function triggerAction() : TriggerAction\n    {\n        return TriggerAction::from($this->payload()['triggerAction']);\n    }\n    public function templateSettings() : array\n    {\n        $templateSettings = [];\n        foreach ($this->payload()['templateSettings'] as $languageCode => $templateSetting) {\n            $templateSettings[$languageCode] = ['site_id' => $this->siteId(), 'language_code' => $languageCode, 'is_html' => $templateSetting['isHtml'], 'subject' => $templateSetting['subject'], 'content' => $templateSetting['content']];\n        }\n        return $templateSettings;\n    }\n    public function filters() : array\n    {\n        return array_map(fn(array $filter): array => ['site_id' => $this->siteId(), 'name' => $filter['name'], 'value' => $filter['value']], $this->payload()['filters']);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/GetMessage.php",
        "originalStartLine": 23
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     {\n         return $this->payload()['replyTo'];\n     }\n-    public function triggerTimeUnit() : TriggerTimeUnit\n+    protected function triggerTimeUnit() : TriggerTimeUnit\n     {\n         return TriggerTimeUnit::from($this->payload()['triggerTimeUnit']);\n     }",
      "processOutput": ""
    },
    {
      "mutator": {
        "mutatorName": "PublicVisibility",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerAction;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeAspect;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeUnit;\ntrait GetMessage\n{\n    public function automatedMessageName() : string\n    {\n        return $this->payload()['name'];\n    }\n    public function replyTo() : string\n    {\n        return $this->payload()['replyTo'];\n    }\n    public function triggerTimeUnit() : TriggerTimeUnit\n    {\n        return TriggerTimeUnit::from($this->payload()['triggerTimeUnit']);\n    }\n    public function triggerValue() : int\n    {\n        return (int) $this->payload()['triggerValue'];\n    }\n    public function triggerTimeAspect() : TriggerTimeAspect\n    {\n        return TriggerTimeAspect::from($this->payload()['triggerTimeAspect']);\n    }\n    public function triggerAction() : TriggerAction\n    {\n        return TriggerAction::from($this->payload()['triggerAction']);\n    }\n    public function templateSettings() : array\n    {\n        $templateSettings = [];\n        foreach ($this->payload()['templateSettings'] as $languageCode => $templateSetting) {\n            $templateSettings[$languageCode] = ['site_id' => $this->siteId(), 'language_code' => $languageCode, 'is_html' => $templateSetting['isHtml'], 'subject' => $templateSetting['subject'], 'content' => $templateSetting['content']];\n        }\n        return $templateSettings;\n    }\n    public function filters() : array\n    {\n        return array_map(fn(array $filter): array => ['site_id' => $this->siteId(), 'name' => $filter['name'], 'value' => $filter['value']], $this->payload()['filters']);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerAction;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeAspect;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeUnit;\ntrait GetMessage\n{\n    public function automatedMessageName() : string\n    {\n        return $this->payload()['name'];\n    }\n    public function replyTo() : string\n    {\n        return $this->payload()['replyTo'];\n    }\n    public function triggerTimeUnit() : TriggerTimeUnit\n    {\n        return TriggerTimeUnit::from($this->payload()['triggerTimeUnit']);\n    }\n    public function triggerValue() : int\n    {\n        return (int) $this->payload()['triggerValue'];\n    }\n    public function triggerTimeAspect() : TriggerTimeAspect\n    {\n        return TriggerTimeAspect::from($this->payload()['triggerTimeAspect']);\n    }\n    public function triggerAction() : TriggerAction\n    {\n        return TriggerAction::from($this->payload()['triggerAction']);\n    }\n    protected function templateSettings() : array\n    {\n        $templateSettings = [];\n        foreach ($this->payload()['templateSettings'] as $languageCode => $templateSetting) {\n            $templateSettings[$languageCode] = ['site_id' => $this->siteId(), 'language_code' => $languageCode, 'is_html' => $templateSetting['isHtml'], 'subject' => $templateSetting['subject'], 'content' => $templateSetting['content']];\n        }\n        return $templateSettings;\n    }\n    public function filters() : array\n    {\n        return array_map(fn(array $filter): array => ['site_id' => $this->siteId(), 'name' => $filter['name'], 'value' => $filter['value']], $this->payload()['filters']);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/GetMessage.php",
        "originalStartLine": 43
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     {\n         return TriggerAction::from($this->payload()['triggerAction']);\n     }\n-    public function templateSettings() : array\n+    protected function templateSettings() : array\n     {\n         $templateSettings = [];\n         foreach ($this->payload()['templateSettings'] as $languageCode => $templateSetting) {",
      "processOutput": ""
    },
    {
      "mutator": {
        "mutatorName": "PublicVisibility",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerAction;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeAspect;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeUnit;\ntrait GetMessage\n{\n    public function automatedMessageName() : string\n    {\n        return $this->payload()['name'];\n    }\n    public function replyTo() : string\n    {\n        return $this->payload()['replyTo'];\n    }\n    public function triggerTimeUnit() : TriggerTimeUnit\n    {\n        return TriggerTimeUnit::from($this->payload()['triggerTimeUnit']);\n    }\n    public function triggerValue() : int\n    {\n        return (int) $this->payload()['triggerValue'];\n    }\n    public function triggerTimeAspect() : TriggerTimeAspect\n    {\n        return TriggerTimeAspect::from($this->payload()['triggerTimeAspect']);\n    }\n    public function triggerAction() : TriggerAction\n    {\n        return TriggerAction::from($this->payload()['triggerAction']);\n    }\n    public function templateSettings() : array\n    {\n        $templateSettings = [];\n        foreach ($this->payload()['templateSettings'] as $languageCode => $templateSetting) {\n            $templateSettings[$languageCode] = ['site_id' => $this->siteId(), 'language_code' => $languageCode, 'is_html' => $templateSetting['isHtml'], 'subject' => $templateSetting['subject'], 'content' => $templateSetting['content']];\n        }\n        return $templateSettings;\n    }\n    public function filters() : array\n    {\n        return array_map(fn(array $filter): array => ['site_id' => $this->siteId(), 'name' => $filter['name'], 'value' => $filter['value']], $this->payload()['filters']);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerAction;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeAspect;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeUnit;\ntrait GetMessage\n{\n    public function automatedMessageName() : string\n    {\n        return $this->payload()['name'];\n    }\n    public function replyTo() : string\n    {\n        return $this->payload()['replyTo'];\n    }\n    public function triggerTimeUnit() : TriggerTimeUnit\n    {\n        return TriggerTimeUnit::from($this->payload()['triggerTimeUnit']);\n    }\n    public function triggerValue() : int\n    {\n        return (int) $this->payload()['triggerValue'];\n    }\n    public function triggerTimeAspect() : TriggerTimeAspect\n    {\n        return TriggerTimeAspect::from($this->payload()['triggerTimeAspect']);\n    }\n    public function triggerAction() : TriggerAction\n    {\n        return TriggerAction::from($this->payload()['triggerAction']);\n    }\n    public function templateSettings() : array\n    {\n        $templateSettings = [];\n        foreach ($this->payload()['templateSettings'] as $languageCode => $templateSetting) {\n            $templateSettings[$languageCode] = ['site_id' => $this->siteId(), 'language_code' => $languageCode, 'is_html' => $templateSetting['isHtml'], 'subject' => $templateSetting['subject'], 'content' => $templateSetting['content']];\n        }\n        return $templateSettings;\n    }\n    protected function filters() : array\n    {\n        return array_map(fn(array $filter): array => ['site_id' => $this->siteId(), 'name' => $filter['name'], 'value' => $filter['value']], $this->payload()['filters']);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/GetMessage.php",
        "originalStartLine": 60
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         }\n         return $templateSettings;\n     }\n-    public function filters() : array\n+    protected function filters() : array\n     {\n         return array_map(fn(array $filter): array => ['site_id' => $this->siteId(), 'name' => $filter['name'], 'value' => $filter['value']], $this->payload()['filters']);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine"
    },
    {
      "mutator": {
        "mutatorName": "MethodCallRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Activate;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class ActivateHandler\n{\n    private const EVENT_ACTIVATED = 'event.automated-messages.activated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageQueryInterface $automatedMessageQuery, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Activate $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['is_active' => true]);\n        $this->scheduling->whenActivated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n        $this->messageBus->dispatch(new Message(self::EVENT_ACTIVATED, ['id' => $command->messageId()], ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Activate;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class ActivateHandler\n{\n    private const EVENT_ACTIVATED = 'event.automated-messages.activated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageQueryInterface $automatedMessageQuery, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Activate $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['is_active' => true]);\n        $this->scheduling->whenActivated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n        \n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ActivateHandler.php",
        "originalStartLine": 36
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n         $automatedMessage->update(['is_active' => true]);\n         $this->scheduling->whenActivated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n-        $this->messageBus->dispatch(new Message(self::EVENT_ACTIVATED, ['id' => $command->messageId()], ['!siteId' => $command->siteId()]), $command);\n+        \n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: insert into `migrations` (`migration`, `batch`) values (2022_07_09_224222_create_filters_table, 1))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(497): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3198): Illuminate\\Database\\Connection->insert()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(107): Illuminate\\Database\\Query\\Builder->insert()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(211): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->log()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#17 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#28 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#30 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#31 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#32 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#36 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#37 \/tmp\/infection\/interceptor.autoload.f85b2b403761f46891033419428c7ced.infection.php(13): require_once('...')\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#45 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#46 {main}"
    },
    {
      "mutator": {
        "mutatorName": "CastInt",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse RuntimeException;\nfinal class ReservationCancelledHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-cancelled';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository)\n    {\n    }\n    public function __invoke(Message $event) : void\n    {\n        $reservation = $this->reservationRepository->find((int) $event->meta()['!siteId'], $event->payload()['reservationId']['system'], $event->payload()['reservationId']['systemId']);\n        if (!$reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot cancel a reservation that is not found');\n        }\n        $reservation->update(['status' => ReservationStatus::CANCELLED->value, 'cancellation_date' => new DateTimeImmutable()]);\n        $this->scheduling->whenReservationCancelled((int) $event->meta()['!siteId'], $reservation);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse RuntimeException;\nfinal class ReservationCancelledHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-cancelled';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository)\n    {\n    }\n    public function __invoke(Message $event) : void\n    {\n        $reservation = $this->reservationRepository->find((int) $event->meta()['!siteId'], $event->payload()['reservationId']['system'], $event->payload()['reservationId']['systemId']);\n        if (!$reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot cancel a reservation that is not found');\n        }\n        $reservation->update(['status' => ReservationStatus::CANCELLED->value, 'cancellation_date' => new DateTimeImmutable()]);\n        $this->scheduling->whenReservationCancelled($event->meta()['!siteId'], $reservation);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ReservationCancelledHandler.php",
        "originalStartLine": 45
      },
      "diff": "--- Original\n+++ New\n@@ @@\n             throw new RuntimeException('Cannot cancel a reservation that is not found');\n         }\n         $reservation->update(['status' => ReservationStatus::CANCELLED->value, 'cancellation_date' => new DateTimeImmutable()]);\n-        $this->scheduling->whenReservationCancelled((int) $event->meta()['!siteId'], $reservation);\n+        $this->scheduling->whenReservationCancelled($event->meta()['!siteId'], $reservation);\n     }\n }",
      "processOutput": ""
    },
    {
      "mutator": {
        "mutatorName": "InstanceOf_",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationChanged;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\TimeZoneConverter;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse RuntimeException;\nfinal class ReservationChangedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-changed';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository, private readonly SitesQueryInterface $sitesQuery)\n    {\n    }\n    public function __invoke(ReservationChanged $event) : void\n    {\n        $reservation = $this->reservationRepository->find($event->siteId(), $event->system(), $event->systemId());\n        if (!$reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot change a reservation that is not found');\n        }\n        $site = $this->sitesQuery->get($event->siteId());\n        $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n        $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n        $reservation->update(['reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n        $this->scheduling->whenReservationChanged($event->siteId(), $reservation);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationChanged;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\TimeZoneConverter;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse RuntimeException;\nfinal class ReservationChangedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-changed';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository, private readonly SitesQueryInterface $sitesQuery)\n    {\n    }\n    public function __invoke(ReservationChanged $event) : void\n    {\n        $reservation = $this->reservationRepository->find($event->siteId(), $event->system(), $event->systemId());\n        if (!false) {\n            throw new RuntimeException('Cannot change a reservation that is not found');\n        }\n        $site = $this->sitesQuery->get($event->siteId());\n        $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n        $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n        $reservation->update(['reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n        $this->scheduling->whenReservationChanged($event->siteId(), $reservation);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ReservationChangedHandler.php",
        "originalStartLine": 34
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     public function __invoke(ReservationChanged $event) : void\n     {\n         $reservation = $this->reservationRepository->find($event->siteId(), $event->system(), $event->systemId());\n-        if (!$reservation instanceof Reservation) {\n+        if (!false) {\n             throw new RuntimeException('Cannot change a reservation that is not found');\n         }\n         $site = $this->sitesQuery->get($event->siteId());",
      "processOutput": ""
    },
    {
      "mutator": {
        "mutatorName": "InstanceOf_",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse RuntimeException;\nfinal class ReservationConfirmedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-confirmed';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository)\n    {\n    }\n    public function __invoke(Message $event) : void\n    {\n        $reservation = $this->reservationRepository->find((int) $event->meta()['!siteId'], $event->payload()['reservationId']['system'], $event->payload()['reservationId']['systemId']);\n        if (!$reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot confirm a reservation that is not found');\n        }\n        $reservation->update(['status' => ReservationStatus::CONFIRMED]);\n        $this->scheduling->whenReservationConfirmed((int) $event->meta()['!siteId'], $reservation);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse RuntimeException;\nfinal class ReservationConfirmedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-confirmed';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository)\n    {\n    }\n    public function __invoke(Message $event) : void\n    {\n        $reservation = $this->reservationRepository->find((int) $event->meta()['!siteId'], $event->payload()['reservationId']['system'], $event->payload()['reservationId']['systemId']);\n        if (!true) {\n            throw new RuntimeException('Cannot confirm a reservation that is not found');\n        }\n        $reservation->update(['status' => ReservationStatus::CONFIRMED]);\n        $this->scheduling->whenReservationConfirmed((int) $event->meta()['!siteId'], $reservation);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ReservationConfirmedHandler.php",
        "originalStartLine": 32
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     public function __invoke(Message $event) : void\n     {\n         $reservation = $this->reservationRepository->find((int) $event->meta()['!siteId'], $event->payload()['reservationId']['system'], $event->payload()['reservationId']['systemId']);\n-        if (!$reservation instanceof Reservation) {\n+        if (!true) {\n             throw new RuntimeException('Cannot confirm a reservation that is not found');\n         }\n         $reservation->update(['status' => ReservationStatus::CONFIRMED]);",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItem",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationCreated;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\TimeZoneConverter;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nfinal class ReservationCreatedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-created';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly SitesQueryInterface $sitesQuery)\n    {\n    }\n    public function __invoke(ReservationCreated $event) : void\n    {\n        $site = $this->sitesQuery->get($event->siteId());\n        $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n        $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n        $reservation = Reservation::create(['id' => Str::uuid()->toString(), 'site_id' => $event->siteId(), 'system' => $event->system(), 'system_id' => $event->systemId(), 'reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'booked_date' => $event->createdAt(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n        $this->scheduling->whenReservationCreated($event->siteId(), $reservation);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationCreated;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\TimeZoneConverter;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nfinal class ReservationCreatedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-created';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly SitesQueryInterface $sitesQuery)\n    {\n    }\n    public function __invoke(ReservationCreated $event) : void\n    {\n        $site = $this->sitesQuery->get($event->siteId());\n        $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n        $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n        $reservation = Reservation::create(['id' => Str::uuid()->toString(), 'site_id' > $event->siteId(), 'system' => $event->system(), 'system_id' => $event->systemId(), 'reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'booked_date' => $event->createdAt(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n        $this->scheduling->whenReservationCreated($event->siteId(), $reservation);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ReservationCreatedHandler.php",
        "originalStartLine": 33
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         $site = $this->sitesQuery->get($event->siteId());\n         $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n         $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n-        $reservation = Reservation::create(['id' => Str::uuid()->toString(), 'site_id' => $event->siteId(), 'system' => $event->system(), 'system_id' => $event->systemId(), 'reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'booked_date' => $event->createdAt(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n+        $reservation = Reservation::create(['id' => Str::uuid()->toString(), 'site_id' > $event->siteId(), 'system' => $event->system(), 'system_id' => $event->systemId(), 'reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'booked_date' => $event->createdAt(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n         $this->scheduling->whenReservationCreated($event->siteId(), $reservation);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nE                                                                   1 \/ 1 (100%)\n\nTime: 00:01.166, Memory: 24.00 MB\n\nThere was 1 error:\n\n1) Tests\\Feature\\Handlers\\ReservationCreatedTest::test_new_reservation_should_be_stored"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItem",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationCreated;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\TimeZoneConverter;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nfinal class ReservationCreatedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-created';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly SitesQueryInterface $sitesQuery)\n    {\n    }\n    public function __invoke(ReservationCreated $event) : void\n    {\n        $site = $this->sitesQuery->get($event->siteId());\n        $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n        $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n        $reservation = Reservation::create(['id' => Str::uuid()->toString(), 'site_id' => $event->siteId(), 'system' => $event->system(), 'system_id' => $event->systemId(), 'reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'booked_date' => $event->createdAt(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n        $this->scheduling->whenReservationCreated($event->siteId(), $reservation);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationCreated;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\TimeZoneConverter;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nfinal class ReservationCreatedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-created';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly SitesQueryInterface $sitesQuery)\n    {\n    }\n    public function __invoke(ReservationCreated $event) : void\n    {\n        $site = $this->sitesQuery->get($event->siteId());\n        $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n        $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n        $reservation = Reservation::create(['id' => Str::uuid()->toString(), 'site_id' => $event->siteId(), 'system' => $event->system(), 'system_id' => $event->systemId(), 'reference' => $event->reference(), 'channel_id' > $event->channelId(), 'offer_id' => $event->offerId(), 'booked_date' => $event->createdAt(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n        $this->scheduling->whenReservationCreated($event->siteId(), $reservation);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ReservationCreatedHandler.php",
        "originalStartLine": 37
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         $site = $this->sitesQuery->get($event->siteId());\n         $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n         $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n-        $reservation = Reservation::create(['id' => Str::uuid()->toString(), 'site_id' => $event->siteId(), 'system' => $event->system(), 'system_id' => $event->systemId(), 'reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'booked_date' => $event->createdAt(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n+        $reservation = Reservation::create(['id' => Str::uuid()->toString(), 'site_id' => $event->siteId(), 'system' => $event->system(), 'system_id' => $event->systemId(), 'reference' => $event->reference(), 'channel_id' > $event->channelId(), 'offer_id' => $event->offerId(), 'booked_date' => $event->createdAt(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n         $this->scheduling->whenReservationCreated($event->siteId(), $reservation);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine"
    },
    {
      "mutator": {
        "mutatorName": "MethodCallRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationCreated;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\TimeZoneConverter;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nfinal class ReservationCreatedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-created';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly SitesQueryInterface $sitesQuery)\n    {\n    }\n    public function __invoke(ReservationCreated $event) : void\n    {\n        $site = $this->sitesQuery->get($event->siteId());\n        $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n        $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n        $reservation = Reservation::create(['id' => Str::uuid()->toString(), 'site_id' => $event->siteId(), 'system' => $event->system(), 'system_id' => $event->systemId(), 'reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'booked_date' => $event->createdAt(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n        $this->scheduling->whenReservationCreated($event->siteId(), $reservation);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationCreated;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\TimeZoneConverter;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nfinal class ReservationCreatedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-created';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly SitesQueryInterface $sitesQuery)\n    {\n    }\n    public function __invoke(ReservationCreated $event) : void\n    {\n        $site = $this->sitesQuery->get($event->siteId());\n        $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n        $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n        $reservation = Reservation::create(['id' => Str::uuid()->toString(), 'site_id' => $event->siteId(), 'system' => $event->system(), 'system_id' => $event->systemId(), 'reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'booked_date' => $event->createdAt(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n        \n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ReservationCreatedHandler.php",
        "originalStartLine": 47
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n         $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n         $reservation = Reservation::create(['id' => Str::uuid()->toString(), 'site_id' => $event->siteId(), 'system' => $event->system(), 'system_id' => $event->systemId(), 'reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'booked_date' => $event->createdAt(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n-        $this->scheduling->whenReservationCreated($event->siteId(), $reservation);\n+        \n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItemRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application;\n\nfinal class Message\n{\n    public function __construct(private readonly int $siteId, private readonly string $transactionalMessageId, private readonly array $from, private readonly string $subject, private readonly string $htmlBody, private readonly string $plaintextBody, private readonly string $recipient, private readonly array $replyTo)\n    {\n    }\n    public function siteId() : int\n    {\n        return $this->siteId;\n    }\n    public function message() : array\n    {\n        return ['from' => $this->from, 'recipient' => $this->recipient, 'subject' => $this->subject, 'replyTo' => $this->replyTo, 'body' => ['html' => $this->htmlBody, 'plaintext' => $this->plaintextBody]];\n    }\n    public function transactionalMessageId() : string\n    {\n        return $this->transactionalMessageId;\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application;\n\nfinal class Message\n{\n    public function __construct(private readonly int $siteId, private readonly string $transactionalMessageId, private readonly array $from, private readonly string $subject, private readonly string $htmlBody, private readonly string $plaintextBody, private readonly string $recipient, private readonly array $replyTo)\n    {\n    }\n    public function siteId() : int\n    {\n        return $this->siteId;\n    }\n    public function message() : array\n    {\n        return ['recipient' => $this->recipient, 'subject' => $this->subject, 'replyTo' => $this->replyTo, 'body' => ['html' => $this->htmlBody, 'plaintext' => $this->plaintextBody]];\n    }\n    public function transactionalMessageId() : string\n    {\n        return $this->transactionalMessageId;\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Message.php",
        "originalStartLine": 28
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     }\n     public function message() : array\n     {\n-        return ['from' => $this->from, 'recipient' => $this->recipient, 'subject' => $this->subject, 'replyTo' => $this->replyTo, 'body' => ['html' => $this->htmlBody, 'plaintext' => $this->plaintextBody]];\n+        return ['recipient' => $this->recipient, 'subject' => $this->subject, 'replyTo' => $this->replyTo, 'body' => ['html' => $this->htmlBody, 'plaintext' => $this->plaintextBody]];\n     }\n     public function transactionalMessageId() : string\n     {",
      "processOutput": ""
    },
    {
      "mutator": {
        "mutatorName": "ArrayItem",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application;\n\nfinal class Message\n{\n    public function __construct(private readonly int $siteId, private readonly string $transactionalMessageId, private readonly array $from, private readonly string $subject, private readonly string $htmlBody, private readonly string $plaintextBody, private readonly string $recipient, private readonly array $replyTo)\n    {\n    }\n    public function siteId() : int\n    {\n        return $this->siteId;\n    }\n    public function message() : array\n    {\n        return ['from' => $this->from, 'recipient' => $this->recipient, 'subject' => $this->subject, 'replyTo' => $this->replyTo, 'body' => ['html' => $this->htmlBody, 'plaintext' => $this->plaintextBody]];\n    }\n    public function transactionalMessageId() : string\n    {\n        return $this->transactionalMessageId;\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application;\n\nfinal class Message\n{\n    public function __construct(private readonly int $siteId, private readonly string $transactionalMessageId, private readonly array $from, private readonly string $subject, private readonly string $htmlBody, private readonly string $plaintextBody, private readonly string $recipient, private readonly array $replyTo)\n    {\n    }\n    public function siteId() : int\n    {\n        return $this->siteId;\n    }\n    public function message() : array\n    {\n        return ['from' => $this->from, 'recipient' > $this->recipient, 'subject' => $this->subject, 'replyTo' => $this->replyTo, 'body' => ['html' => $this->htmlBody, 'plaintext' => $this->plaintextBody]];\n    }\n    public function transactionalMessageId() : string\n    {\n        return $this->transactionalMessageId;\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Message.php",
        "originalStartLine": 30
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     }\n     public function message() : array\n     {\n-        return ['from' => $this->from, 'recipient' => $this->recipient, 'subject' => $this->subject, 'replyTo' => $this->replyTo, 'body' => ['html' => $this->htmlBody, 'plaintext' => $this->plaintextBody]];\n+        return ['from' => $this->from, 'recipient' > $this->recipient, 'subject' => $this->subject, 'replyTo' => $this->replyTo, 'body' => ['html' => $this->htmlBody, 'plaintext' => $this->plaintextBody]];\n     }\n     public function transactionalMessageId() : string\n     {",
      "processOutput": ""
    },
    {
      "mutator": {
        "mutatorName": "ArrayItem",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application;\n\nfinal class Message\n{\n    public function __construct(private readonly int $siteId, private readonly string $transactionalMessageId, private readonly array $from, private readonly string $subject, private readonly string $htmlBody, private readonly string $plaintextBody, private readonly string $recipient, private readonly array $replyTo)\n    {\n    }\n    public function siteId() : int\n    {\n        return $this->siteId;\n    }\n    public function message() : array\n    {\n        return ['from' => $this->from, 'recipient' => $this->recipient, 'subject' => $this->subject, 'replyTo' => $this->replyTo, 'body' => ['html' => $this->htmlBody, 'plaintext' => $this->plaintextBody]];\n    }\n    public function transactionalMessageId() : string\n    {\n        return $this->transactionalMessageId;\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application;\n\nfinal class Message\n{\n    public function __construct(private readonly int $siteId, private readonly string $transactionalMessageId, private readonly array $from, private readonly string $subject, private readonly string $htmlBody, private readonly string $plaintextBody, private readonly string $recipient, private readonly array $replyTo)\n    {\n    }\n    public function siteId() : int\n    {\n        return $this->siteId;\n    }\n    public function message() : array\n    {\n        return ['from' => $this->from, 'recipient' => $this->recipient, 'subject' => $this->subject, 'replyTo' > $this->replyTo, 'body' => ['html' => $this->htmlBody, 'plaintext' => $this->plaintextBody]];\n    }\n    public function transactionalMessageId() : string\n    {\n        return $this->transactionalMessageId;\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Message.php",
        "originalStartLine": 32
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     }\n     public function message() : array\n     {\n-        return ['from' => $this->from, 'recipient' => $this->recipient, 'subject' => $this->subject, 'replyTo' => $this->replyTo, 'body' => ['html' => $this->htmlBody, 'plaintext' => $this->plaintextBody]];\n+        return ['from' => $this->from, 'recipient' => $this->recipient, 'subject' => $this->subject, 'replyTo' > $this->replyTo, 'body' => ['html' => $this->htmlBody, 'plaintext' => $this->plaintextBody]];\n     }\n     public function transactionalMessageId() : string\n     {",
      "processOutput": ""
    },
    {
      "mutator": {
        "mutatorName": "ArrayItemRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application;\n\nfinal class Message\n{\n    public function __construct(private readonly int $siteId, private readonly string $transactionalMessageId, private readonly array $from, private readonly string $subject, private readonly string $htmlBody, private readonly string $plaintextBody, private readonly string $recipient, private readonly array $replyTo)\n    {\n    }\n    public function siteId() : int\n    {\n        return $this->siteId;\n    }\n    public function message() : array\n    {\n        return ['from' => $this->from, 'recipient' => $this->recipient, 'subject' => $this->subject, 'replyTo' => $this->replyTo, 'body' => ['html' => $this->htmlBody, 'plaintext' => $this->plaintextBody]];\n    }\n    public function transactionalMessageId() : string\n    {\n        return $this->transactionalMessageId;\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application;\n\nfinal class Message\n{\n    public function __construct(private readonly int $siteId, private readonly string $transactionalMessageId, private readonly array $from, private readonly string $subject, private readonly string $htmlBody, private readonly string $plaintextBody, private readonly string $recipient, private readonly array $replyTo)\n    {\n    }\n    public function siteId() : int\n    {\n        return $this->siteId;\n    }\n    public function message() : array\n    {\n        return ['from' => $this->from, 'recipient' => $this->recipient, 'subject' => $this->subject, 'replyTo' => $this->replyTo, 'body' => ['plaintext' => $this->plaintextBody]];\n    }\n    public function transactionalMessageId() : string\n    {\n        return $this->transactionalMessageId;\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Message.php",
        "originalStartLine": 33
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     }\n     public function message() : array\n     {\n-        return ['from' => $this->from, 'recipient' => $this->recipient, 'subject' => $this->subject, 'replyTo' => $this->replyTo, 'body' => ['html' => $this->htmlBody, 'plaintext' => $this->plaintextBody]];\n+        return ['from' => $this->from, 'recipient' => $this->recipient, 'subject' => $this->subject, 'replyTo' => $this->replyTo, 'body' => ['plaintext' => $this->plaintextBody]];\n     }\n     public function transactionalMessageId() : string\n     {",
      "processOutput": ""
    },
    {
      "mutator": {
        "mutatorName": "ArrayItem",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application;\n\nfinal class Message\n{\n    public function __construct(private readonly int $siteId, private readonly string $transactionalMessageId, private readonly array $from, private readonly string $subject, private readonly string $htmlBody, private readonly string $plaintextBody, private readonly string $recipient, private readonly array $replyTo)\n    {\n    }\n    public function siteId() : int\n    {\n        return $this->siteId;\n    }\n    public function message() : array\n    {\n        return ['from' => $this->from, 'recipient' => $this->recipient, 'subject' => $this->subject, 'replyTo' => $this->replyTo, 'body' => ['html' => $this->htmlBody, 'plaintext' => $this->plaintextBody]];\n    }\n    public function transactionalMessageId() : string\n    {\n        return $this->transactionalMessageId;\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application;\n\nfinal class Message\n{\n    public function __construct(private readonly int $siteId, private readonly string $transactionalMessageId, private readonly array $from, private readonly string $subject, private readonly string $htmlBody, private readonly string $plaintextBody, private readonly string $recipient, private readonly array $replyTo)\n    {\n    }\n    public function siteId() : int\n    {\n        return $this->siteId;\n    }\n    public function message() : array\n    {\n        return ['from' => $this->from, 'recipient' => $this->recipient, 'subject' => $this->subject, 'replyTo' => $this->replyTo, 'body' => ['html' => $this->htmlBody, 'plaintext' > $this->plaintextBody]];\n    }\n    public function transactionalMessageId() : string\n    {\n        return $this->transactionalMessageId;\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Message.php",
        "originalStartLine": 35
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     }\n     public function message() : array\n     {\n-        return ['from' => $this->from, 'recipient' => $this->recipient, 'subject' => $this->subject, 'replyTo' => $this->replyTo, 'body' => ['html' => $this->htmlBody, 'plaintext' => $this->plaintextBody]];\n+        return ['from' => $this->from, 'recipient' => $this->recipient, 'subject' => $this->subject, 'replyTo' => $this->replyTo, 'body' => ['html' => $this->htmlBody, 'plaintext' > $this->plaintextBody]];\n     }\n     public function transactionalMessageId() : string\n     {",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: insert into `migrations` (`migration`, `batch`) values (2022_07_09_220313_create_template_settings, 1))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(497): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3198): Illuminate\\Database\\Connection->insert()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(107): Illuminate\\Database\\Query\\Builder->insert()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(211): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->log()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#17 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#28 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#30 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#31 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#32 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#36 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#37 \/tmp\/infection\/interceptor.autoload.eebbae6bdffddc1eb674516ec630e9be.infection.php(13): require_once('...')\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#45 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#46 {main}"
    },
    {
      "mutator": {
        "mutatorName": "PublicVisibility",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application;\n\nfinal class Message\n{\n    public function __construct(private readonly int $siteId, private readonly string $transactionalMessageId, private readonly array $from, private readonly string $subject, private readonly string $htmlBody, private readonly string $plaintextBody, private readonly string $recipient, private readonly array $replyTo)\n    {\n    }\n    public function siteId() : int\n    {\n        return $this->siteId;\n    }\n    public function message() : array\n    {\n        return ['from' => $this->from, 'recipient' => $this->recipient, 'subject' => $this->subject, 'replyTo' => $this->replyTo, 'body' => ['html' => $this->htmlBody, 'plaintext' => $this->plaintextBody]];\n    }\n    public function transactionalMessageId() : string\n    {\n        return $this->transactionalMessageId;\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application;\n\nfinal class Message\n{\n    public function __construct(private readonly int $siteId, private readonly string $transactionalMessageId, private readonly array $from, private readonly string $subject, private readonly string $htmlBody, private readonly string $plaintextBody, private readonly string $recipient, private readonly array $replyTo)\n    {\n    }\n    public function siteId() : int\n    {\n        return $this->siteId;\n    }\n    public function message() : array\n    {\n        return ['from' => $this->from, 'recipient' => $this->recipient, 'subject' => $this->subject, 'replyTo' => $this->replyTo, 'body' => ['html' => $this->htmlBody, 'plaintext' => $this->plaintextBody]];\n    }\n    protected function transactionalMessageId() : string\n    {\n        return $this->transactionalMessageId;\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Message.php",
        "originalStartLine": 40
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     {\n         return ['from' => $this->from, 'recipient' => $this->recipient, 'subject' => $this->subject, 'replyTo' => $this->replyTo, 'body' => ['html' => $this->htmlBody, 'plaintext' => $this->plaintextBody]];\n     }\n-    public function transactionalMessageId() : string\n+    protected function transactionalMessageId() : string\n     {\n         return $this->transactionalMessageId;\n     }\n }",
      "processOutput": ""
    },
    {
      "mutator": {
        "mutatorName": "ArrayItemRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Dto\\AutomatedMessage;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\ScheduleArranger;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ScheduleRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ScheduleStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Schedule;\nfinal class AutomatedMessageScheduling\n{\n    private const RESERVATION_REFERENCE = 'Reservation';\n    public function __construct(private readonly ReservationRepositoryInterface $reservationRepository, private readonly ScheduleRepositoryInterface $scheduleRepository, private readonly ScheduleArranger $scheduleArranger)\n    {\n    }\n    public function whenActivated(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $this->buildForAutomatedMessage($siteId, $automatedMessage);\n    }\n    public function whenUpdated(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessage->id);\n        $this->buildForAutomatedMessage($siteId, $automatedMessage);\n    }\n    public function whenDeactivated(int $siteId, string $automatedMessageId) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessageId);\n    }\n    public function whenDeleted(int $siteId, string $automatedMessageId) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessageId);\n    }\n    private function buildForAutomatedMessage(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $filters = [...$automatedMessage->filters, ...$automatedMessage->triggerAction->filters()];\n        $reservations = $this->reservationRepository->filter($siteId, $filters);\n        $schedules = [];\n        foreach ($reservations as $reservation) {\n            $occurrenceDate = $reservation->triggerOccurrence($automatedMessage->triggerAction);\n            $sendAt = $this->scheduleArranger->sendAt(triggerValue: $automatedMessage->triggerValue, triggerTimeUnit: $automatedMessage->triggerTimeUnit, triggerTimeAspect: $automatedMessage->triggerTimeAspect, occurrence: $occurrenceDate);\n            $schedules[] = ['id' => Str::uuid(), 'site_id' => $automatedMessage->siteId, 'automated_message_id' => $automatedMessage->id, 'reference' => self::RESERVATION_REFERENCE, 'reference_id' => $reservation->id, 'status' => ScheduleStatus::SCHEDULED, 'send_at' => $sendAt];\n        }\n        Schedule::insert($schedules);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Dto\\AutomatedMessage;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\ScheduleArranger;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ScheduleRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ScheduleStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Schedule;\nfinal class AutomatedMessageScheduling\n{\n    private const RESERVATION_REFERENCE = 'Reservation';\n    public function __construct(private readonly ReservationRepositoryInterface $reservationRepository, private readonly ScheduleRepositoryInterface $scheduleRepository, private readonly ScheduleArranger $scheduleArranger)\n    {\n    }\n    public function whenActivated(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $this->buildForAutomatedMessage($siteId, $automatedMessage);\n    }\n    public function whenUpdated(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessage->id);\n        $this->buildForAutomatedMessage($siteId, $automatedMessage);\n    }\n    public function whenDeactivated(int $siteId, string $automatedMessageId) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessageId);\n    }\n    public function whenDeleted(int $siteId, string $automatedMessageId) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessageId);\n    }\n    private function buildForAutomatedMessage(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $filters = [...$automatedMessage->filters, ...$automatedMessage->triggerAction->filters()];\n        $reservations = $this->reservationRepository->filter($siteId, $filters);\n        $schedules = [];\n        foreach ($reservations as $reservation) {\n            $occurrenceDate = $reservation->triggerOccurrence($automatedMessage->triggerAction);\n            $sendAt = $this->scheduleArranger->sendAt(triggerValue: $automatedMessage->triggerValue, triggerTimeUnit: $automatedMessage->triggerTimeUnit, triggerTimeAspect: $automatedMessage->triggerTimeAspect, occurrence: $occurrenceDate);\n            $schedules[] = ['site_id' => $automatedMessage->siteId, 'automated_message_id' => $automatedMessage->id, 'reference' => self::RESERVATION_REFERENCE, 'reference_id' => $reservation->id, 'status' => ScheduleStatus::SCHEDULED, 'send_at' => $sendAt];\n        }\n        Schedule::insert($schedules);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Scheduling\/Reservations\/AutomatedMessageScheduling.php",
        "originalStartLine": 66
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         foreach ($reservations as $reservation) {\n             $occurrenceDate = $reservation->triggerOccurrence($automatedMessage->triggerAction);\n             $sendAt = $this->scheduleArranger->sendAt(triggerValue: $automatedMessage->triggerValue, triggerTimeUnit: $automatedMessage->triggerTimeUnit, triggerTimeAspect: $automatedMessage->triggerTimeAspect, occurrence: $occurrenceDate);\n-            $schedules[] = ['id' => Str::uuid(), 'site_id' => $automatedMessage->siteId, 'automated_message_id' => $automatedMessage->id, 'reference' => self::RESERVATION_REFERENCE, 'reference_id' => $reservation->id, 'status' => ScheduleStatus::SCHEDULED, 'send_at' => $sendAt];\n+            $schedules[] = ['site_id' => $automatedMessage->siteId, 'automated_message_id' => $automatedMessage->id, 'reference' => self::RESERVATION_REFERENCE, 'reference_id' => $reservation->id, 'status' => ScheduleStatus::SCHEDULED, 'send_at' => $sendAt];\n         }\n         Schedule::insert($schedules);\n     }\n }",
      "processOutput": ""
    },
    {
      "mutator": {
        "mutatorName": "ArrayItem",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Dto\\AutomatedMessage;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\ScheduleArranger;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ScheduleRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ScheduleStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Schedule;\nfinal class AutomatedMessageScheduling\n{\n    private const RESERVATION_REFERENCE = 'Reservation';\n    public function __construct(private readonly ReservationRepositoryInterface $reservationRepository, private readonly ScheduleRepositoryInterface $scheduleRepository, private readonly ScheduleArranger $scheduleArranger)\n    {\n    }\n    public function whenActivated(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $this->buildForAutomatedMessage($siteId, $automatedMessage);\n    }\n    public function whenUpdated(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessage->id);\n        $this->buildForAutomatedMessage($siteId, $automatedMessage);\n    }\n    public function whenDeactivated(int $siteId, string $automatedMessageId) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessageId);\n    }\n    public function whenDeleted(int $siteId, string $automatedMessageId) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessageId);\n    }\n    private function buildForAutomatedMessage(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $filters = [...$automatedMessage->filters, ...$automatedMessage->triggerAction->filters()];\n        $reservations = $this->reservationRepository->filter($siteId, $filters);\n        $schedules = [];\n        foreach ($reservations as $reservation) {\n            $occurrenceDate = $reservation->triggerOccurrence($automatedMessage->triggerAction);\n            $sendAt = $this->scheduleArranger->sendAt(triggerValue: $automatedMessage->triggerValue, triggerTimeUnit: $automatedMessage->triggerTimeUnit, triggerTimeAspect: $automatedMessage->triggerTimeAspect, occurrence: $occurrenceDate);\n            $schedules[] = ['id' => Str::uuid(), 'site_id' => $automatedMessage->siteId, 'automated_message_id' => $automatedMessage->id, 'reference' => self::RESERVATION_REFERENCE, 'reference_id' => $reservation->id, 'status' => ScheduleStatus::SCHEDULED, 'send_at' => $sendAt];\n        }\n        Schedule::insert($schedules);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Dto\\AutomatedMessage;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\ScheduleArranger;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ScheduleRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ScheduleStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Schedule;\nfinal class AutomatedMessageScheduling\n{\n    private const RESERVATION_REFERENCE = 'Reservation';\n    public function __construct(private readonly ReservationRepositoryInterface $reservationRepository, private readonly ScheduleRepositoryInterface $scheduleRepository, private readonly ScheduleArranger $scheduleArranger)\n    {\n    }\n    public function whenActivated(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $this->buildForAutomatedMessage($siteId, $automatedMessage);\n    }\n    public function whenUpdated(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessage->id);\n        $this->buildForAutomatedMessage($siteId, $automatedMessage);\n    }\n    public function whenDeactivated(int $siteId, string $automatedMessageId) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessageId);\n    }\n    public function whenDeleted(int $siteId, string $automatedMessageId) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessageId);\n    }\n    private function buildForAutomatedMessage(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $filters = [...$automatedMessage->filters, ...$automatedMessage->triggerAction->filters()];\n        $reservations = $this->reservationRepository->filter($siteId, $filters);\n        $schedules = [];\n        foreach ($reservations as $reservation) {\n            $occurrenceDate = $reservation->triggerOccurrence($automatedMessage->triggerAction);\n            $sendAt = $this->scheduleArranger->sendAt(triggerValue: $automatedMessage->triggerValue, triggerTimeUnit: $automatedMessage->triggerTimeUnit, triggerTimeAspect: $automatedMessage->triggerTimeAspect, occurrence: $occurrenceDate);\n            $schedules[] = ['id' => Str::uuid(), 'site_id' > $automatedMessage->siteId, 'automated_message_id' => $automatedMessage->id, 'reference' => self::RESERVATION_REFERENCE, 'reference_id' => $reservation->id, 'status' => ScheduleStatus::SCHEDULED, 'send_at' => $sendAt];\n        }\n        Schedule::insert($schedules);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Scheduling\/Reservations\/AutomatedMessageScheduling.php",
        "originalStartLine": 68
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         foreach ($reservations as $reservation) {\n             $occurrenceDate = $reservation->triggerOccurrence($automatedMessage->triggerAction);\n             $sendAt = $this->scheduleArranger->sendAt(triggerValue: $automatedMessage->triggerValue, triggerTimeUnit: $automatedMessage->triggerTimeUnit, triggerTimeAspect: $automatedMessage->triggerTimeAspect, occurrence: $occurrenceDate);\n-            $schedules[] = ['id' => Str::uuid(), 'site_id' => $automatedMessage->siteId, 'automated_message_id' => $automatedMessage->id, 'reference' => self::RESERVATION_REFERENCE, 'reference_id' => $reservation->id, 'status' => ScheduleStatus::SCHEDULED, 'send_at' => $sendAt];\n+            $schedules[] = ['id' => Str::uuid(), 'site_id' > $automatedMessage->siteId, 'automated_message_id' => $automatedMessage->id, 'reference' => self::RESERVATION_REFERENCE, 'reference_id' => $reservation->id, 'status' => ScheduleStatus::SCHEDULED, 'send_at' => $sendAt];\n         }\n         Schedule::insert($schedules);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine"
    },
    {
      "mutator": {
        "mutatorName": "PublicVisibility",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Dto\\AutomatedMessage;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\ScheduleArranger;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ScheduleRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ScheduleStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Schedule;\nfinal class EventScheduling\n{\n    private const RESERVATION_REFERENCE = 'Reservation';\n    public function __construct(private readonly ReservationRepositoryInterface $reservationRepository, private readonly ScheduleRepositoryInterface $scheduleRepository, private readonly ScheduleArranger $scheduleArranger, private readonly AutomatedMessageQueryInterface $automatedMessageQuery)\n    {\n    }\n    public function whenReservationCreated(int $siteId, Reservation $reservation) : void\n    {\n        $this->build($siteId, $reservation);\n    }\n    public function whenReservationChanged(int $siteId, Reservation $reservation) : void\n    {\n        $this->scheduleRepository->removeByReservation($siteId, $reservation->id);\n        $this->build($siteId, $reservation);\n    }\n    public function whenReservationCancelled(int $siteId, Reservation $reservation) : void\n    {\n        $this->scheduleRepository->removeByReservation($siteId, $reservation->id);\n        $this->build($siteId, $reservation);\n    }\n    public function whenReservationConfirmed(int $siteId, Reservation $reservation) : void\n    {\n        $this->build($siteId, $reservation);\n    }\n    private function build(int $siteId, Reservation $reservation) : void\n    {\n        $automatedMessages = $this->automatedMessageQuery->findAll($siteId);\n        foreach ($automatedMessages as $automatedMessage) {\n            $filteredReservation = $this->reservationRepository->filterByReservation(siteId: $siteId, filters: $this->filters($automatedMessage), reservationId: $reservation->id);\n            if (!$filteredReservation instanceof Reservation) {\n                break;\n            }\n            $occurrenceDate = $filteredReservation->triggerOccurrence($automatedMessage->triggerAction);\n            $sendAt = $this->scheduleArranger->sendAt(triggerValue: $automatedMessage->triggerValue, triggerTimeUnit: $automatedMessage->triggerTimeUnit, triggerTimeAspect: $automatedMessage->triggerTimeAspect, occurrence: $occurrenceDate);\n            Schedule::insert(['id' => Str::uuid(), 'site_id' => $automatedMessage->siteId, 'automated_message_id' => $automatedMessage->id, 'reference' => self::RESERVATION_REFERENCE, 'reference_id' => $reservation->id, 'status' => ScheduleStatus::SCHEDULED, 'send_at' => $sendAt]);\n        }\n    }\n    private function filters(AutomatedMessage $automatedMessage) : array\n    {\n        return [...$automatedMessage->filters, ...$automatedMessage->triggerAction->filters()];\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Dto\\AutomatedMessage;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\ScheduleArranger;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ScheduleRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ScheduleStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Schedule;\nfinal class EventScheduling\n{\n    private const RESERVATION_REFERENCE = 'Reservation';\n    public function __construct(private readonly ReservationRepositoryInterface $reservationRepository, private readonly ScheduleRepositoryInterface $scheduleRepository, private readonly ScheduleArranger $scheduleArranger, private readonly AutomatedMessageQueryInterface $automatedMessageQuery)\n    {\n    }\n    public function whenReservationCreated(int $siteId, Reservation $reservation) : void\n    {\n        $this->build($siteId, $reservation);\n    }\n    public function whenReservationChanged(int $siteId, Reservation $reservation) : void\n    {\n        $this->scheduleRepository->removeByReservation($siteId, $reservation->id);\n        $this->build($siteId, $reservation);\n    }\n    public function whenReservationCancelled(int $siteId, Reservation $reservation) : void\n    {\n        $this->scheduleRepository->removeByReservation($siteId, $reservation->id);\n        $this->build($siteId, $reservation);\n    }\n    protected function whenReservationConfirmed(int $siteId, Reservation $reservation) : void\n    {\n        $this->build($siteId, $reservation);\n    }\n    private function build(int $siteId, Reservation $reservation) : void\n    {\n        $automatedMessages = $this->automatedMessageQuery->findAll($siteId);\n        foreach ($automatedMessages as $automatedMessage) {\n            $filteredReservation = $this->reservationRepository->filterByReservation(siteId: $siteId, filters: $this->filters($automatedMessage), reservationId: $reservation->id);\n            if (!$filteredReservation instanceof Reservation) {\n                break;\n            }\n            $occurrenceDate = $filteredReservation->triggerOccurrence($automatedMessage->triggerAction);\n            $sendAt = $this->scheduleArranger->sendAt(triggerValue: $automatedMessage->triggerValue, triggerTimeUnit: $automatedMessage->triggerTimeUnit, triggerTimeAspect: $automatedMessage->triggerTimeAspect, occurrence: $occurrenceDate);\n            Schedule::insert(['id' => Str::uuid(), 'site_id' => $automatedMessage->siteId, 'automated_message_id' => $automatedMessage->id, 'reference' => self::RESERVATION_REFERENCE, 'reference_id' => $reservation->id, 'status' => ScheduleStatus::SCHEDULED, 'send_at' => $sendAt]);\n        }\n    }\n    private function filters(AutomatedMessage $automatedMessage) : array\n    {\n        return [...$automatedMessage->filters, ...$automatedMessage->triggerAction->filters()];\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Scheduling\/Reservations\/EventScheduling.php",
        "originalStartLine": 48
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         $this->scheduleRepository->removeByReservation($siteId, $reservation->id);\n         $this->build($siteId, $reservation);\n     }\n-    public function whenReservationConfirmed(int $siteId, Reservation $reservation) : void\n+    protected function whenReservationConfirmed(int $siteId, Reservation $reservation) : void\n     {\n         $this->build($siteId, $reservation);\n     }",
      "processOutput": ""
    },
    {
      "mutator": {
        "mutatorName": "MethodCallRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Bus;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\EmailSenderInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Message;\nuse Profitroom\\Microservices\\Bus\\Message as BusMessage;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class EmailSender implements EmailSenderInterface\n{\n    private const SEND_TRANSACTIONAL_MESSAGE_KEY = 'command.marketing-email-sender.send-transactional-message';\n    public function __construct(private readonly MessageBusInterface $bus)\n    {\n    }\n    public function send(Message $message) : void\n    {\n        $this->bus->dispatch(new BusMessage(self::SEND_TRANSACTIONAL_MESSAGE_KEY, ['siteId' => $message->siteId(), 'transactionalMessageId' => $message->transactionalMessageId(), 'message' => $message->message()], ['!siteId' => $message->siteId()]));\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Bus;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\EmailSenderInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Message;\nuse Profitroom\\Microservices\\Bus\\Message as BusMessage;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class EmailSender implements EmailSenderInterface\n{\n    private const SEND_TRANSACTIONAL_MESSAGE_KEY = 'command.marketing-email-sender.send-transactional-message';\n    public function __construct(private readonly MessageBusInterface $bus)\n    {\n    }\n    public function send(Message $message) : void\n    {\n        \n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Infrastructure\/Bus\/EmailSender.php",
        "originalStartLine": 22
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     }\n     public function send(Message $message) : void\n     {\n-        $this->bus->dispatch(new BusMessage(self::SEND_TRANSACTIONAL_MESSAGE_KEY, ['siteId' => $message->siteId(), 'transactionalMessageId' => $message->transactionalMessageId(), 'message' => $message->message()], ['!siteId' => $message->siteId()]));\n+        \n     }\n }",
      "processOutput": ""
    },
    {
      "mutator": {
        "mutatorName": "ArrayItemRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Bus;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\EmailSenderInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Message;\nuse Profitroom\\Microservices\\Bus\\Message as BusMessage;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class EmailSender implements EmailSenderInterface\n{\n    private const SEND_TRANSACTIONAL_MESSAGE_KEY = 'command.marketing-email-sender.send-transactional-message';\n    public function __construct(private readonly MessageBusInterface $bus)\n    {\n    }\n    public function send(Message $message) : void\n    {\n        $this->bus->dispatch(new BusMessage(self::SEND_TRANSACTIONAL_MESSAGE_KEY, ['siteId' => $message->siteId(), 'transactionalMessageId' => $message->transactionalMessageId(), 'message' => $message->message()], ['!siteId' => $message->siteId()]));\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Bus;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\EmailSenderInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Message;\nuse Profitroom\\Microservices\\Bus\\Message as BusMessage;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class EmailSender implements EmailSenderInterface\n{\n    private const SEND_TRANSACTIONAL_MESSAGE_KEY = 'command.marketing-email-sender.send-transactional-message';\n    public function __construct(private readonly MessageBusInterface $bus)\n    {\n    }\n    public function send(Message $message) : void\n    {\n        $this->bus->dispatch(new BusMessage(self::SEND_TRANSACTIONAL_MESSAGE_KEY, ['transactionalMessageId' => $message->transactionalMessageId(), 'message' => $message->message()], ['!siteId' => $message->siteId()]));\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Infrastructure\/Bus\/EmailSender.php",
        "originalStartLine": 24
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     }\n     public function send(Message $message) : void\n     {\n-        $this->bus->dispatch(new BusMessage(self::SEND_TRANSACTIONAL_MESSAGE_KEY, ['siteId' => $message->siteId(), 'transactionalMessageId' => $message->transactionalMessageId(), 'message' => $message->message()], ['!siteId' => $message->siteId()]));\n+        $this->bus->dispatch(new BusMessage(self::SEND_TRANSACTIONAL_MESSAGE_KEY, ['transactionalMessageId' => $message->transactionalMessageId(), 'message' => $message->message()], ['!siteId' => $message->siteId()]));\n     }\n }",
      "processOutput": ""
    },
    {
      "mutator": {
        "mutatorName": "ArrayItem",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Bus;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\EmailSenderInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Message;\nuse Profitroom\\Microservices\\Bus\\Message as BusMessage;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class EmailSender implements EmailSenderInterface\n{\n    private const SEND_TRANSACTIONAL_MESSAGE_KEY = 'command.marketing-email-sender.send-transactional-message';\n    public function __construct(private readonly MessageBusInterface $bus)\n    {\n    }\n    public function send(Message $message) : void\n    {\n        $this->bus->dispatch(new BusMessage(self::SEND_TRANSACTIONAL_MESSAGE_KEY, ['siteId' => $message->siteId(), 'transactionalMessageId' => $message->transactionalMessageId(), 'message' => $message->message()], ['!siteId' => $message->siteId()]));\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Bus;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\EmailSenderInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Message;\nuse Profitroom\\Microservices\\Bus\\Message as BusMessage;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class EmailSender implements EmailSenderInterface\n{\n    private const SEND_TRANSACTIONAL_MESSAGE_KEY = 'command.marketing-email-sender.send-transactional-message';\n    public function __construct(private readonly MessageBusInterface $bus)\n    {\n    }\n    public function send(Message $message) : void\n    {\n        $this->bus->dispatch(new BusMessage(self::SEND_TRANSACTIONAL_MESSAGE_KEY, ['siteId' => $message->siteId(), 'transactionalMessageId' => $message->transactionalMessageId(), 'message' => $message->message()], ['!siteId' > $message->siteId()]));\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Infrastructure\/Bus\/EmailSender.php",
        "originalStartLine": 29
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     }\n     public function send(Message $message) : void\n     {\n-        $this->bus->dispatch(new BusMessage(self::SEND_TRANSACTIONAL_MESSAGE_KEY, ['siteId' => $message->siteId(), 'transactionalMessageId' => $message->transactionalMessageId(), 'message' => $message->message()], ['!siteId' => $message->siteId()]));\n+        $this->bus->dispatch(new BusMessage(self::SEND_TRANSACTIONAL_MESSAGE_KEY, ['siteId' => $message->siteId(), 'transactionalMessageId' => $message->transactionalMessageId(), 'message' => $message->message()], ['!siteId' > $message->siteId()]));\n     }\n }",
      "processOutput": ""
    },
    {
      "mutator": {
        "mutatorName": "ArrayItemRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Bus;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\EmailSenderInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Message;\nuse Profitroom\\Microservices\\Bus\\Message as BusMessage;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class EmailSender implements EmailSenderInterface\n{\n    private const SEND_TRANSACTIONAL_MESSAGE_KEY = 'command.marketing-email-sender.send-transactional-message';\n    public function __construct(private readonly MessageBusInterface $bus)\n    {\n    }\n    public function send(Message $message) : void\n    {\n        $this->bus->dispatch(new BusMessage(self::SEND_TRANSACTIONAL_MESSAGE_KEY, ['siteId' => $message->siteId(), 'transactionalMessageId' => $message->transactionalMessageId(), 'message' => $message->message()], ['!siteId' => $message->siteId()]));\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Bus;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\EmailSenderInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Message;\nuse Profitroom\\Microservices\\Bus\\Message as BusMessage;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class EmailSender implements EmailSenderInterface\n{\n    private const SEND_TRANSACTIONAL_MESSAGE_KEY = 'command.marketing-email-sender.send-transactional-message';\n    public function __construct(private readonly MessageBusInterface $bus)\n    {\n    }\n    public function send(Message $message) : void\n    {\n        $this->bus->dispatch(new BusMessage(self::SEND_TRANSACTIONAL_MESSAGE_KEY, ['siteId' => $message->siteId(), 'transactionalMessageId' => $message->transactionalMessageId(), 'message' => $message->message()], []));\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Infrastructure\/Bus\/EmailSender.php",
        "originalStartLine": 29
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     }\n     public function send(Message $message) : void\n     {\n-        $this->bus->dispatch(new BusMessage(self::SEND_TRANSACTIONAL_MESSAGE_KEY, ['siteId' => $message->siteId(), 'transactionalMessageId' => $message->transactionalMessageId(), 'message' => $message->message()], ['!siteId' => $message->siteId()]));\n+        $this->bus->dispatch(new BusMessage(self::SEND_TRANSACTIONAL_MESSAGE_KEY, ['siteId' => $message->siteId(), 'transactionalMessageId' => $message->transactionalMessageId(), 'message' => $message->message()], []));\n     }\n }",
      "processOutput": ""
    },
    {
      "mutator": {
        "mutatorName": "ArrayItemRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Bus;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\TemplateQueryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class MessageBuilder implements TemplateQueryInterface\n{\n    private const GET_TEMPLATE_QUERY_KEY = 'query.email-message-builder.get-template';\n    private const TEMPLATE_NAME = 'automated-messages';\n    public function __construct(private readonly MessageBusInterface $bus)\n    {\n    }\n    public function get(int $siteId, string $templateId, string $languageCode) : array\n    {\n        $query = new Message(self::GET_TEMPLATE_QUERY_KEY, ['template' => self::TEMPLATE_NAME, 'templateId' => $templateId, 'languageCode' => $languageCode], ['!siteId' => $siteId]);\n        $response = $this->bus->query($query, 30)->payload();\n        return $response['body'];\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Bus;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\TemplateQueryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class MessageBuilder implements TemplateQueryInterface\n{\n    private const GET_TEMPLATE_QUERY_KEY = 'query.email-message-builder.get-template';\n    private const TEMPLATE_NAME = 'automated-messages';\n    public function __construct(private readonly MessageBusInterface $bus)\n    {\n    }\n    public function get(int $siteId, string $templateId, string $languageCode) : array\n    {\n        $query = new Message(self::GET_TEMPLATE_QUERY_KEY, ['templateId' => $templateId, 'languageCode' => $languageCode], ['!siteId' => $siteId]);\n        $response = $this->bus->query($query, 30)->payload();\n        return $response['body'];\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Infrastructure\/Bus\/MessageBuilder.php",
        "originalStartLine": 25
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     }\n     public function get(int $siteId, string $templateId, string $languageCode) : array\n     {\n-        $query = new Message(self::GET_TEMPLATE_QUERY_KEY, ['template' => self::TEMPLATE_NAME, 'templateId' => $templateId, 'languageCode' => $languageCode], ['!siteId' => $siteId]);\n+        $query = new Message(self::GET_TEMPLATE_QUERY_KEY, ['templateId' => $templateId, 'languageCode' => $languageCode], ['!siteId' => $siteId]);\n         $response = $this->bus->query($query, 30)->payload();\n         return $response['body'];\n     }\n }",
      "processOutput": ""
    },
    {
      "mutator": {
        "mutatorName": "ArrayItemRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\Repositories;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\Builder\\Filters\\FilterFactory;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nfinal class ReservationRepository implements ReservationRepositoryInterface\n{\n    public function find(int $siteId, string $system, string $systemId) : ?Reservation\n    {\n        return Reservation::where(['site_id' => $siteId, 'system' => $system, 'system_id' => $systemId])->first();\n    }\n    public function filter(int $siteId, array $filters) : array\n    {\n        $query = Reservation::where('site_id', $siteId);\n        foreach ($filters as $filter) {\n            $query = FilterFactory::fromArray($filter)->filter($query);\n        }\n        return $query->get()->all();\n    }\n    public function filterByReservation(int $siteId, array $filters, string $reservationId) : ?Reservation\n    {\n        $query = Reservation::where(['site_id' => $siteId, 'id' => $reservationId]);\n        foreach ($filters as $filter) {\n            $query = FilterFactory::fromArray($filter)->filter($query);\n        }\n        \/\/ @phpstan-ignore-next-line\n        return $query->first();\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\Repositories;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\Builder\\Filters\\FilterFactory;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nfinal class ReservationRepository implements ReservationRepositoryInterface\n{\n    public function find(int $siteId, string $system, string $systemId) : ?Reservation\n    {\n        return Reservation::where(['system' => $system, 'system_id' => $systemId])->first();\n    }\n    public function filter(int $siteId, array $filters) : array\n    {\n        $query = Reservation::where('site_id', $siteId);\n        foreach ($filters as $filter) {\n            $query = FilterFactory::fromArray($filter)->filter($query);\n        }\n        return $query->get()->all();\n    }\n    public function filterByReservation(int $siteId, array $filters, string $reservationId) : ?Reservation\n    {\n        $query = Reservation::where(['site_id' => $siteId, 'id' => $reservationId]);\n        foreach ($filters as $filter) {\n            $query = FilterFactory::fromArray($filter)->filter($query);\n        }\n        \/\/ @phpstan-ignore-next-line\n        return $query->first();\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Infrastructure\/Eloquent\/Repositories\/ReservationRepository.php",
        "originalStartLine": 16
      },
      "diff": "--- Original\n+++ New\n@@ @@\n {\n     public function find(int $siteId, string $system, string $systemId) : ?Reservation\n     {\n-        return Reservation::where(['site_id' => $siteId, 'system' => $system, 'system_id' => $systemId])->first();\n+        return Reservation::where(['system' => $system, 'system_id' => $systemId])->first();\n     }\n     public function filter(int $siteId, array $filters) : array\n     {",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine"
    }
  ],
  "killed": [
    {
      "mutator": {
        "mutatorName": "PublicVisibility",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetMessageId;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Microservices\\Bus\\Message;\nfinal class SendPreview extends Message\n{\n    use GetSiteId;\n    use GetMessageId;\n    public const MESSAGE_NAME = 'command.automated-messages.send-preview';\n    public function recipients() : array\n    {\n        return $this->payload()['recipients'];\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetMessageId;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Microservices\\Bus\\Message;\nfinal class SendPreview extends Message\n{\n    use GetSiteId;\n    use GetMessageId;\n    public const MESSAGE_NAME = 'command.automated-messages.send-preview';\n    protected function recipients() : array\n    {\n        return $this->payload()['recipients'];\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Commands\/SendPreview.php",
        "originalStartLine": 18
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     use GetSiteId;\n     use GetMessageId;\n     public const MESSAGE_NAME = 'command.automated-messages.send-preview';\n-    public function recipients() : array\n+    protected function recipients() : array\n     {\n         return $this->payload()['recipients'];\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: select `migration` from `migrations` order by `batch` asc, `migration` asc)\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(421): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(2630): Illuminate\\Database\\Connection->select()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(2844): Illuminate\\Database\\Query\\Builder->runSelect()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3154): Illuminate\\Database\\Query\\Builder->Illuminate\\Database\\Query\\{closure}()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(2846): Illuminate\\Database\\Query\\Builder->onceWithColumns()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(53): Illuminate\\Database\\Query\\Builder->pluck()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(112): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->getRan()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#17 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#28 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#30 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#31 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#32 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#36 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#37 \/tmp\/infection\/interceptor.autoload.41010029ea720ab40632a98493654b38.infection.php(13): require_once('...')\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#45 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#46 {main}"
    },
    {
      "mutator": {
        "mutatorName": "PublicVisibility",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    protected function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Events\/BaseReservation.php",
        "originalStartLine": 16
      },
      "diff": "--- Original\n+++ New\n@@ @@\n abstract class BaseReservation extends Message\n {\n     use GetSiteId;\n-    public function system() : string\n+    protected function system() : string\n     {\n         return $this->payload()['id']['system'];\n     }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\n..E\n\nTime: 00:00.826, Memory: 24.00 MB\n\nThere was 1 error:\n\n1) Profitroom\\Communication\\AutomatedMessages\\Test\\Unit\\Application\\Bus\\Events\\ReservationCreatedTest::test_should_return_system\nError: Call to protected method Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\BaseReservation::system() from scope Profitroom\\Communication\\AutomatedMessages\\Test\\Unit\\Application\\Bus\\Events\\ReservationCreatedTest\n\n\/var\/www\/tests\/Unit\/Application\/Bus\/Events\/ReservationCreatedTest.php:59\n\nERRORS!\nTests: 3, Assertions: 2, Errors: 1."
    },
    {
      "mutator": {
        "mutatorName": "PublicVisibility",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    protected function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Events\/BaseReservation.php",
        "originalStartLine": 21
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     {\n         return $this->payload()['id']['system'];\n     }\n-    public function systemId() : string\n+    protected function systemId() : string\n     {\n         return $this->payload()['id']['systemId'];\n     }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S01]: Base table or view already exists: 1050 Table 'automated_messages' already exists (SQL: create table `automated_messages` (`id` char(36) not null, `site_id` int not null, `name` varchar(255) not null, `reply_to` varchar(255) not null, `trigger_time_unit` varchar(255) not null, `trigger_value` int not null, `trigger_time_aspect` varchar(255) not null, `trigger_action` varchar(255) not null, `last_message_sent_at` datetime null, `is_active` tinyint(1) not null default '0', `deleted_at` timestamp null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8 collate 'utf8_unicode_ci')\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_07_205040_create_automated_messages_table.php(27): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateAutomatedMessagesTable->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.6f4d1bbe62d48b4a13befd1a7082e1e9.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "PublicVisibility",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    protected function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Events\/BaseReservation.php",
        "originalStartLine": 26
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     {\n         return $this->payload()['id']['systemId'];\n     }\n-    public function reference() : string\n+    protected function reference() : string\n     {\n         return $this->payload()['reference'];\n     }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S01]: Base table or view already exists: 1050 Table 'automated_messages' already exists (SQL: create table `automated_messages` (`id` char(36) not null, `site_id` int not null, `name` varchar(255) not null, `reply_to` varchar(255) not null, `trigger_time_unit` varchar(255) not null, `trigger_value` int not null, `trigger_time_aspect` varchar(255) not null, `trigger_action` varchar(255) not null, `last_message_sent_at` datetime null, `is_active` tinyint(1) not null default '0', `deleted_at` timestamp null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8 collate 'utf8_unicode_ci')\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_07_205040_create_automated_messages_table.php(27): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateAutomatedMessagesTable->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.9fdf1eb78add3eb490dac9e49cc6beb5.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "PublicVisibility",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    protected function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Events\/BaseReservation.php",
        "originalStartLine": 31
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     {\n         return $this->payload()['reference'];\n     }\n-    public function channelId() : int\n+    protected function channelId() : int\n     {\n         return (int) $this->payload()['channelId'];\n     }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S01]: Base table or view already exists: 1050 Table 'automated_messages' already exists (SQL: create table `automated_messages` (`id` char(36) not null, `site_id` int not null, `name` varchar(255) not null, `reply_to` varchar(255) not null, `trigger_time_unit` varchar(255) not null, `trigger_value` int not null, `trigger_time_aspect` varchar(255) not null, `trigger_action` varchar(255) not null, `last_message_sent_at` datetime null, `is_active` tinyint(1) not null default '0', `deleted_at` timestamp null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8 collate 'utf8_unicode_ci')\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_07_205040_create_automated_messages_table.php(27): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateAutomatedMessagesTable->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.09e4edd581b47a51ba4e4d441e0f1469.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "PublicVisibility",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    protected function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Events\/BaseReservation.php",
        "originalStartLine": 36
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     {\n         return (int) $this->payload()['channelId'];\n     }\n-    public function offerId() : int\n+    protected function offerId() : int\n     {\n         $room = $this->firstRoom();\n         return (int) $room['ratePlanId']['systemId'];",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S01]: Base table or view already exists: 1050 Table 'automated_messages' already exists (SQL: create table `automated_messages` (`id` char(36) not null, `site_id` int not null, `name` varchar(255) not null, `reply_to` varchar(255) not null, `trigger_time_unit` varchar(255) not null, `trigger_value` int not null, `trigger_time_aspect` varchar(255) not null, `trigger_action` varchar(255) not null, `last_message_sent_at` datetime null, `is_active` tinyint(1) not null default '0', `deleted_at` timestamp null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8 collate 'utf8_unicode_ci')\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_07_205040_create_automated_messages_table.php(27): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateAutomatedMessagesTable->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.8e911af5914925b52e42e7b6008896cd.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "CastInt",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Events\/BaseReservation.php",
        "originalStartLine": 40
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     public function offerId() : int\n     {\n         $room = $this->firstRoom();\n-        return (int) $room['ratePlanId']['systemId'];\n+        return $room['ratePlanId']['systemId'];\n     }\n     public function createdAt() : DateTimeImmutable\n     {",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S01]: Base table or view already exists: 1050 Table 'automated_messages' already exists (SQL: create table `automated_messages` (`id` char(36) not null, `site_id` int not null, `name` varchar(255) not null, `reply_to` varchar(255) not null, `trigger_time_unit` varchar(255) not null, `trigger_value` int not null, `trigger_time_aspect` varchar(255) not null, `trigger_action` varchar(255) not null, `last_message_sent_at` datetime null, `is_active` tinyint(1) not null default '0', `deleted_at` timestamp null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8 collate 'utf8_unicode_ci')\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_07_205040_create_automated_messages_table.php(27): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateAutomatedMessagesTable->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.a51e14e12e6586bccdcb4a59576922aa.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "PublicVisibility",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    protected function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Events\/BaseReservation.php",
        "originalStartLine": 48
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     {\n         return new DateTimeImmutable($this->payload()['createdAt']);\n     }\n-    public function price() : int\n+    protected function price() : int\n     {\n         return (int) ($this->payload()['priceTotal'] * 100);\n     }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: insert into `migrations` (`migration`, `batch`) values (2022_07_09_224222_create_filters_table, 1))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(497): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3198): Illuminate\\Database\\Connection->insert()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(107): Illuminate\\Database\\Query\\Builder->insert()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(211): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->log()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#17 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#28 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#30 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#31 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#32 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#36 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#37 \/tmp\/infection\/interceptor.autoload.3b05bfee6b392d1ef820483ee2d0fe3d.infection.php(13): require_once('...')\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#45 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#46 {main}"
    },
    {
      "mutator": {
        "mutatorName": "DecrementInteger",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 99);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Events\/BaseReservation.php",
        "originalStartLine": 50
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     }\n     public function price() : int\n     {\n-        return (int) ($this->payload()['priceTotal'] * 100);\n+        return (int) ($this->payload()['priceTotal'] * 99);\n     }\n     public function currency() : string\n     {",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S01]: Base table or view already exists: 1050 Table 'schedules' already exists (SQL: create table `schedules` (`id` char(36) not null, `site_id` int not null, `automated_message_id` char(36) not null, `reference` varchar(255) not null, `reference_id` varchar(255) not null, `status` varchar(255) not null, `send_at` datetime not null, `sent_at` datetime null, `deleted_at` timestamp null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8 collate 'utf8_unicode_ci')\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_07_213230_create_schedules_table.php(27): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateSchedulesTable->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.ad1ada3ee234cb941f2bc141b3b3d659.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "IncrementInteger",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 101);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Events\/BaseReservation.php",
        "originalStartLine": 50
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     }\n     public function price() : int\n     {\n-        return (int) ($this->payload()['priceTotal'] * 100);\n+        return (int) ($this->payload()['priceTotal'] * 101);\n     }\n     public function currency() : string\n     {",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.schedules' doesn't exist (SQL: alter table `schedules` add primary key `schedules_id_primary`(`id`))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_07_213230_create_schedules_table.php(27): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateSchedulesTable->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.f4721c4bdb9520b4ccf3ea9fca1c9f27.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "Multiplication",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] \/ 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Events\/BaseReservation.php",
        "originalStartLine": 50
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     }\n     public function price() : int\n     {\n-        return (int) ($this->payload()['priceTotal'] * 100);\n+        return (int) ($this->payload()['priceTotal'] \/ 100);\n     }\n     public function currency() : string\n     {",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.schedules' doesn't exist (SQL: alter table `schedules` add primary key `schedules_id_primary`(`id`))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_07_213230_create_schedules_table.php(27): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateSchedulesTable->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.c46e8fcedd704d625b750c1af7c8b925.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "CastInt",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return $this->payload()['priceTotal'] * 100;\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Events\/BaseReservation.php",
        "originalStartLine": 50
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     }\n     public function price() : int\n     {\n-        return (int) ($this->payload()['priceTotal'] * 100);\n+        return $this->payload()['priceTotal'] * 100;\n     }\n     public function currency() : string\n     {",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: insert into `migrations` (`migration`, `batch`) values (2022_07_07_205040_create_automated_messages_table, 1))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(497): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3198): Illuminate\\Database\\Connection->insert()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(107): Illuminate\\Database\\Query\\Builder->insert()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(211): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->log()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#17 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#28 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#30 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#31 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#32 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#36 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#37 \/tmp\/infection\/interceptor.autoload.29f5402be5de40a6b2fe2249fa1b5ebf.infection.php(13): require_once('...')\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#45 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#46 {main}"
    },
    {
      "mutator": {
        "mutatorName": "PublicVisibility",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    protected function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Events\/BaseReservation.php",
        "originalStartLine": 53
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     {\n         return (int) ($this->payload()['priceTotal'] * 100);\n     }\n-    public function currency() : string\n+    protected function currency() : string\n     {\n         return $this->payload()['currency'];\n     }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[HY000]: General error: 1005 Can't create table `automated_messages`.`automated_messages` (errno: 150 \"Foreign key constraint is incorrectly formed\") (SQL: create table `automated_messages` (`id` char(36) not null, `site_id` int not null, `name` varchar(255) not null, `reply_to` varchar(255) not null, `trigger_time_unit` varchar(255) not null, `trigger_value` int not null, `trigger_time_aspect` varchar(255) not null, `trigger_action` varchar(255) not null, `last_message_sent_at` datetime null, `is_active` tinyint(1) not null default '0', `deleted_at` timestamp null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8 collate 'utf8_unicode_ci')\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_07_205040_create_automated_messages_table.php(27): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateAutomatedMessagesTable->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.37e3bc4c7707de32612a998005bca900.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "DecrementInteger",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(12, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Events\/BaseReservation.php",
        "originalStartLine": 62
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     public function checkIn() : DateTimeImmutable\n     {\n         $room = $this->firstRoom();\n-        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n+        return (new DateTimeImmutable($room['stay']['from']))->setTime(12, 0);\n     }\n     public function checkOut() : DateTimeImmutable\n     {",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S01]: Base table or view already exists: 1050 Table 'automated_messages' already exists (SQL: create table `automated_messages` (`id` char(36) not null, `site_id` int not null, `name` varchar(255) not null, `reply_to` varchar(255) not null, `trigger_time_unit` varchar(255) not null, `trigger_value` int not null, `trigger_time_aspect` varchar(255) not null, `trigger_action` varchar(255) not null, `last_message_sent_at` datetime null, `is_active` tinyint(1) not null default '0', `deleted_at` timestamp null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8 collate 'utf8_unicode_ci')\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_07_205040_create_automated_messages_table.php(27): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateAutomatedMessagesTable->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.e993d3a23c3d8685c0e9031ae0419918.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "DecrementInteger",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, -1);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Events\/BaseReservation.php",
        "originalStartLine": 62
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     public function checkIn() : DateTimeImmutable\n     {\n         $room = $this->firstRoom();\n-        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n+        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, -1);\n     }\n     public function checkOut() : DateTimeImmutable\n     {",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: insert into `migrations` (`migration`, `batch`) values (2022_07_07_205040_create_automated_messages_table, 1))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(497): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3198): Illuminate\\Database\\Connection->insert()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(107): Illuminate\\Database\\Query\\Builder->insert()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(211): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->log()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#17 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#28 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#30 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#31 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#32 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#36 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#37 \/tmp\/infection\/interceptor.autoload.f7391bed324e53cfaf7adf042faf94b0.infection.php(13): require_once('...')\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#45 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#46 {main}"
    },
    {
      "mutator": {
        "mutatorName": "IncrementInteger",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 1);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Events\/BaseReservation.php",
        "originalStartLine": 62
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     public function checkIn() : DateTimeImmutable\n     {\n         $room = $this->firstRoom();\n-        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n+        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 1);\n     }\n     public function checkOut() : DateTimeImmutable\n     {",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[40001]: Serialization failure: 1213 Deadlock found when trying to get lock; try restarting transaction (SQL: alter table `schedules` add constraint `schedules_automated_message_id_foreign` foreign key (`automated_message_id`) references `automated_messages` (`id`))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_07_213230_create_schedules_table.php(27): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateSchedulesTable->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.1ae69557d2a3eee3e2eb6c3e053fa0df.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "PublicVisibility",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    protected function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Events\/BaseReservation.php",
        "originalStartLine": 65
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         $room = $this->firstRoom();\n         return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n     }\n-    public function checkOut() : DateTimeImmutable\n+    protected function checkOut() : DateTimeImmutable\n     {\n         $room = $this->firstRoom();\n         return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1051 Unknown table 'automated_messages.automated_messages,automated_messages.filters,automated_messages.migrations,au...' (SQL: drop table `automated_messages`,`filters`,`migrations`,`reservations`,`schedules`,`template_settings`)\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/MySqlBuilder.php(87): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(82): Illuminate\\Database\\Schema\\MySqlBuilder->dropAllTables()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(59): Illuminate\\Database\\Console\\WipeCommand->dropAllTables()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\WipeCommand->handle()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#11 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(40): Illuminate\\Console\\Command->runCommand()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(45): Illuminate\\Console\\Command->callSilent()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Factory.php(56): Illuminate\\Console\\View\\Components\\Task->render()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(49): Illuminate\\Console\\View\\Components\\Factory->__call()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#29 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#33 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#34 \/tmp\/infection\/interceptor.autoload.2ffe041c2f22849a7820c3f28a7d8a6a.infection.php(13): require_once('...')\n#35 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#36 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#37 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#42 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#43 {main}"
    },
    {
      "mutator": {
        "mutatorName": "DecrementInteger",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(10, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Events\/BaseReservation.php",
        "originalStartLine": 69
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     public function checkOut() : DateTimeImmutable\n     {\n         $room = $this->firstRoom();\n-        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n+        return (new DateTimeImmutable($room['stay']['to']))->setTime(10, 0);\n     }\n     public function status() : ReservationStatus\n     {",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: insert into `migrations` (`migration`, `batch`) values (2022_07_07_205040_create_automated_messages_table, 1))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(497): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3198): Illuminate\\Database\\Connection->insert()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(107): Illuminate\\Database\\Query\\Builder->insert()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(211): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->log()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#17 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#28 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#30 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#31 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#32 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#36 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#37 \/tmp\/infection\/interceptor.autoload.0d36b970ad846086a0eb82137c0c60d7.infection.php(13): require_once('...')\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#45 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#46 {main}"
    },
    {
      "mutator": {
        "mutatorName": "IncrementInteger",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(12, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Events\/BaseReservation.php",
        "originalStartLine": 69
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     public function checkOut() : DateTimeImmutable\n     {\n         $room = $this->firstRoom();\n-        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n+        return (new DateTimeImmutable($room['stay']['to']))->setTime(12, 0);\n     }\n     public function status() : ReservationStatus\n     {",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1051 Unknown table 'automated_messages.automated_messages,automated_messages.migrations' (SQL: drop table `automated_messages`,`migrations`)\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/MySqlBuilder.php(87): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(82): Illuminate\\Database\\Schema\\MySqlBuilder->dropAllTables()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(59): Illuminate\\Database\\Console\\WipeCommand->dropAllTables()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\WipeCommand->handle()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#11 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(40): Illuminate\\Console\\Command->runCommand()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(45): Illuminate\\Console\\Command->callSilent()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Factory.php(56): Illuminate\\Console\\View\\Components\\Task->render()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(49): Illuminate\\Console\\View\\Components\\Factory->__call()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#29 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#33 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#34 \/tmp\/infection\/interceptor.autoload.d39a16d89f0e1a2b067dc8e8ea080ad6.infection.php(13): require_once('...')\n#35 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#36 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#37 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#42 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#43 {main}"
    },
    {
      "mutator": {
        "mutatorName": "PublicVisibility",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    protected function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Events\/BaseReservation.php",
        "originalStartLine": 72
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         $room = $this->firstRoom();\n         return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n     }\n-    public function status() : ReservationStatus\n+    protected function status() : ReservationStatus\n     {\n         foreach ($this->payload['rooms'] as $room) {\n             $rooms[$room['status']][] = $room;",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1051 Unknown table 'automated_messages.migrations' (SQL: drop table `automated_messages`,`migrations`)\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/MySqlBuilder.php(87): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(82): Illuminate\\Database\\Schema\\MySqlBuilder->dropAllTables()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(59): Illuminate\\Database\\Console\\WipeCommand->dropAllTables()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\WipeCommand->handle()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#11 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(40): Illuminate\\Console\\Command->runCommand()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(45): Illuminate\\Console\\Command->callSilent()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Factory.php(56): Illuminate\\Console\\View\\Components\\Task->render()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(49): Illuminate\\Console\\View\\Components\\Factory->__call()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#29 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#33 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#34 \/tmp\/infection\/interceptor.autoload.ef41806228859632f68736d843ce414a.infection.php(13): require_once('...')\n#35 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#36 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#37 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#42 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#43 {main}"
    },
    {
      "mutator": {
        "mutatorName": "Foreach_",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach (array() as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Events\/BaseReservation.php",
        "originalStartLine": 74
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     }\n     public function status() : ReservationStatus\n     {\n-        foreach ($this->payload['rooms'] as $room) {\n+        foreach (array() as $room) {\n             $rooms[$room['status']][] = $room;\n         }\n         if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1051 Unknown table 'automated_messages.automated_messages,automated_messages.filters,automated_messages.migrations,au...' (SQL: drop table `automated_messages`,`filters`,`migrations`,`reservations`,`schedules`,`template_settings`)\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/MySqlBuilder.php(87): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(82): Illuminate\\Database\\Schema\\MySqlBuilder->dropAllTables()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(59): Illuminate\\Database\\Console\\WipeCommand->dropAllTables()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\WipeCommand->handle()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#11 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(40): Illuminate\\Console\\Command->runCommand()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(45): Illuminate\\Console\\Command->callSilent()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Factory.php(56): Illuminate\\Console\\View\\Components\\Task->render()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(49): Illuminate\\Console\\View\\Components\\Factory->__call()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#29 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#33 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#34 \/tmp\/infection\/interceptor.autoload.18b35e670a8b6e4d02fc7ed1b65ba84d.infection.php(13): require_once('...')\n#35 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#36 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#37 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#42 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#43 {main}"
    },
    {
      "mutator": {
        "mutatorName": "LogicalAnd",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) || count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Events\/BaseReservation.php",
        "originalStartLine": 78
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         foreach ($this->payload['rooms'] as $room) {\n             $rooms[$room['status']][] = $room;\n         }\n-        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n+        if (isset($rooms[ReservationStatus::CANCELLED->value]) || count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n             return ReservationStatus::CANCELLED;\n         }\n         if (isset($rooms[ReservationStatus::CONFIRMED->value])) {",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: insert into `migrations` (`migration`, `batch`) values (2022_07_09_224222_create_reservations_table, 1))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(497): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3198): Illuminate\\Database\\Connection->insert()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(107): Illuminate\\Database\\Query\\Builder->insert()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(211): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->log()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#17 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#28 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#30 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#31 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#32 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#36 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#37 \/tmp\/infection\/interceptor.autoload.eb500699e801d633464bb4aa23466699.infection.php(13): require_once('...')\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#45 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#46 {main}"
    },
    {
      "mutator": {
        "mutatorName": "Identical",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) !== count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Events\/BaseReservation.php",
        "originalStartLine": 79
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         foreach ($this->payload['rooms'] as $room) {\n             $rooms[$room['status']][] = $room;\n         }\n-        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n+        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) !== count($this->payload['rooms'])) {\n             return ReservationStatus::CANCELLED;\n         }\n         if (isset($rooms[ReservationStatus::CONFIRMED->value])) {",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.automated_messages' doesn't exist (SQL: alter table `automated_messages` add primary key `automated_messages_id_primary`(`id`))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_07_205040_create_automated_messages_table.php(27): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateAutomatedMessagesTable->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.9905621204bb5bfd42b53fc9b67df06a.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItemRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetSiteId;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Microservices\\Bus\\Message;\nabstract class BaseReservation extends Message\n{\n    use GetSiteId;\n    public function system() : string\n    {\n        return $this->payload()['id']['system'];\n    }\n    public function systemId() : string\n    {\n        return $this->payload()['id']['systemId'];\n    }\n    public function reference() : string\n    {\n        return $this->payload()['reference'];\n    }\n    public function channelId() : int\n    {\n        return (int) $this->payload()['channelId'];\n    }\n    public function offerId() : int\n    {\n        $room = $this->firstRoom();\n        return (int) $room['ratePlanId']['systemId'];\n    }\n    public function createdAt() : DateTimeImmutable\n    {\n        return new DateTimeImmutable($this->payload()['createdAt']);\n    }\n    public function price() : int\n    {\n        return (int) ($this->payload()['priceTotal'] * 100);\n    }\n    public function currency() : string\n    {\n        return $this->payload()['currency'];\n    }\n    public function checkIn() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['from']))->setTime(13, 0);\n    }\n    public function checkOut() : DateTimeImmutable\n    {\n        $room = $this->firstRoom();\n        return (new DateTimeImmutable($room['stay']['to']))->setTime(11, 0);\n    }\n    public function status() : ReservationStatus\n    {\n        foreach ($this->payload['rooms'] as $room) {\n            $rooms[$room['status']][] = $room;\n        }\n        if (isset($rooms[ReservationStatus::CANCELLED->value]) && count($rooms[ReservationStatus::CANCELLED->value]) === count($this->payload['rooms'])) {\n            return ReservationStatus::CANCELLED;\n        }\n        if (isset($rooms[ReservationStatus::CONFIRMED->value])) {\n            return ReservationStatus::CONFIRMED;\n        }\n        return ReservationStatus::UNCONFIRMED;\n    }\n    private function findNotCancelledRooms(array $rooms) : array\n    {\n        return array_filter($rooms, static function (array $room) : bool {\n            return \\in_array($room['status'], [ReservationStatus::UNCONFIRMED->value], true);\n        });\n    }\n    private function firstRoom() : array\n    {\n        $rooms = $this->findNotCancelledRooms($this->payload()['rooms']);\n        if (empty($rooms)) {\n            $rooms = $this->payload()['rooms'];\n        }\n        return current($rooms);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Events\/BaseReservation.php",
        "originalStartLine": 93
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     private function findNotCancelledRooms(array $rooms) : array\n     {\n         return array_filter($rooms, static function (array $room) : bool {\n-            return \\in_array($room['status'], [ReservationStatus::CONFIRMED->value, ReservationStatus::UNCONFIRMED->value], true);\n+            return \\in_array($room['status'], [ReservationStatus::UNCONFIRMED->value], true);\n         });\n     }\n     private function firstRoom() : array",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: insert into `migrations` (`migration`, `batch`) values (2022_07_07_213230_create_schedules_table, 1))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(497): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3198): Illuminate\\Database\\Connection->insert()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(107): Illuminate\\Database\\Query\\Builder->insert()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(211): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->log()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#17 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#28 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#30 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#31 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#32 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#36 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#37 \/tmp\/infection\/interceptor.autoload.8fc07fc027894072e26753bef99c8c18.infection.php(13): require_once('...')\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#45 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#46 {main}"
    },
    {
      "mutator": {
        "mutatorName": "PublicVisibility",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerAction;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeAspect;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeUnit;\ntrait GetMessage\n{\n    public function automatedMessageName() : string\n    {\n        return $this->payload()['name'];\n    }\n    public function replyTo() : string\n    {\n        return $this->payload()['replyTo'];\n    }\n    public function triggerTimeUnit() : TriggerTimeUnit\n    {\n        return TriggerTimeUnit::from($this->payload()['triggerTimeUnit']);\n    }\n    public function triggerValue() : int\n    {\n        return (int) $this->payload()['triggerValue'];\n    }\n    public function triggerTimeAspect() : TriggerTimeAspect\n    {\n        return TriggerTimeAspect::from($this->payload()['triggerTimeAspect']);\n    }\n    public function triggerAction() : TriggerAction\n    {\n        return TriggerAction::from($this->payload()['triggerAction']);\n    }\n    public function templateSettings() : array\n    {\n        $templateSettings = [];\n        foreach ($this->payload()['templateSettings'] as $languageCode => $templateSetting) {\n            $templateSettings[$languageCode] = ['site_id' => $this->siteId(), 'language_code' => $languageCode, 'is_html' => $templateSetting['isHtml'], 'subject' => $templateSetting['subject'], 'content' => $templateSetting['content']];\n        }\n        return $templateSettings;\n    }\n    public function filters() : array\n    {\n        return array_map(fn(array $filter): array => ['site_id' => $this->siteId(), 'name' => $filter['name'], 'value' => $filter['value']], $this->payload()['filters']);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerAction;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeAspect;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeUnit;\ntrait GetMessage\n{\n    protected function automatedMessageName() : string\n    {\n        return $this->payload()['name'];\n    }\n    public function replyTo() : string\n    {\n        return $this->payload()['replyTo'];\n    }\n    public function triggerTimeUnit() : TriggerTimeUnit\n    {\n        return TriggerTimeUnit::from($this->payload()['triggerTimeUnit']);\n    }\n    public function triggerValue() : int\n    {\n        return (int) $this->payload()['triggerValue'];\n    }\n    public function triggerTimeAspect() : TriggerTimeAspect\n    {\n        return TriggerTimeAspect::from($this->payload()['triggerTimeAspect']);\n    }\n    public function triggerAction() : TriggerAction\n    {\n        return TriggerAction::from($this->payload()['triggerAction']);\n    }\n    public function templateSettings() : array\n    {\n        $templateSettings = [];\n        foreach ($this->payload()['templateSettings'] as $languageCode => $templateSetting) {\n            $templateSettings[$languageCode] = ['site_id' => $this->siteId(), 'language_code' => $languageCode, 'is_html' => $templateSetting['isHtml'], 'subject' => $templateSetting['subject'], 'content' => $templateSetting['content']];\n        }\n        return $templateSettings;\n    }\n    public function filters() : array\n    {\n        return array_map(fn(array $filter): array => ['site_id' => $this->siteId(), 'name' => $filter['name'], 'value' => $filter['value']], $this->payload()['filters']);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/GetMessage.php",
        "originalStartLine": 13
      },
      "diff": "--- Original\n+++ New\n@@ @@\n use Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeUnit;\n trait GetMessage\n {\n-    public function automatedMessageName() : string\n+    protected function automatedMessageName() : string\n     {\n         return $this->payload()['name'];\n     }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: insert into `migrations` (`migration`, `batch`) values (2022_07_09_224222_create_filters_table, 1))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(497): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3198): Illuminate\\Database\\Connection->insert()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(107): Illuminate\\Database\\Query\\Builder->insert()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(211): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->log()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#17 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#28 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#30 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#31 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#32 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#36 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#37 \/tmp\/infection\/interceptor.autoload.b49db49bb903f5e65829c4728bad9a09.infection.php(13): require_once('...')\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#45 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#46 {main}"
    },
    {
      "mutator": {
        "mutatorName": "PublicVisibility",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerAction;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeAspect;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeUnit;\ntrait GetMessage\n{\n    public function automatedMessageName() : string\n    {\n        return $this->payload()['name'];\n    }\n    public function replyTo() : string\n    {\n        return $this->payload()['replyTo'];\n    }\n    public function triggerTimeUnit() : TriggerTimeUnit\n    {\n        return TriggerTimeUnit::from($this->payload()['triggerTimeUnit']);\n    }\n    public function triggerValue() : int\n    {\n        return (int) $this->payload()['triggerValue'];\n    }\n    public function triggerTimeAspect() : TriggerTimeAspect\n    {\n        return TriggerTimeAspect::from($this->payload()['triggerTimeAspect']);\n    }\n    public function triggerAction() : TriggerAction\n    {\n        return TriggerAction::from($this->payload()['triggerAction']);\n    }\n    public function templateSettings() : array\n    {\n        $templateSettings = [];\n        foreach ($this->payload()['templateSettings'] as $languageCode => $templateSetting) {\n            $templateSettings[$languageCode] = ['site_id' => $this->siteId(), 'language_code' => $languageCode, 'is_html' => $templateSetting['isHtml'], 'subject' => $templateSetting['subject'], 'content' => $templateSetting['content']];\n        }\n        return $templateSettings;\n    }\n    public function filters() : array\n    {\n        return array_map(fn(array $filter): array => ['site_id' => $this->siteId(), 'name' => $filter['name'], 'value' => $filter['value']], $this->payload()['filters']);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerAction;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeAspect;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeUnit;\ntrait GetMessage\n{\n    public function automatedMessageName() : string\n    {\n        return $this->payload()['name'];\n    }\n    public function replyTo() : string\n    {\n        return $this->payload()['replyTo'];\n    }\n    public function triggerTimeUnit() : TriggerTimeUnit\n    {\n        return TriggerTimeUnit::from($this->payload()['triggerTimeUnit']);\n    }\n    protected function triggerValue() : int\n    {\n        return (int) $this->payload()['triggerValue'];\n    }\n    public function triggerTimeAspect() : TriggerTimeAspect\n    {\n        return TriggerTimeAspect::from($this->payload()['triggerTimeAspect']);\n    }\n    public function triggerAction() : TriggerAction\n    {\n        return TriggerAction::from($this->payload()['triggerAction']);\n    }\n    public function templateSettings() : array\n    {\n        $templateSettings = [];\n        foreach ($this->payload()['templateSettings'] as $languageCode => $templateSetting) {\n            $templateSettings[$languageCode] = ['site_id' => $this->siteId(), 'language_code' => $languageCode, 'is_html' => $templateSetting['isHtml'], 'subject' => $templateSetting['subject'], 'content' => $templateSetting['content']];\n        }\n        return $templateSettings;\n    }\n    public function filters() : array\n    {\n        return array_map(fn(array $filter): array => ['site_id' => $this->siteId(), 'name' => $filter['name'], 'value' => $filter['value']], $this->payload()['filters']);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/GetMessage.php",
        "originalStartLine": 28
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     {\n         return TriggerTimeUnit::from($this->payload()['triggerTimeUnit']);\n     }\n-    public function triggerValue() : int\n+    protected function triggerValue() : int\n     {\n         return (int) $this->payload()['triggerValue'];\n     }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1051 Unknown table 'automated_messages.schedules,automated_messages.template_settings' (SQL: drop table `schedules`,`template_settings`)\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/MySqlBuilder.php(87): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(82): Illuminate\\Database\\Schema\\MySqlBuilder->dropAllTables()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(59): Illuminate\\Database\\Console\\WipeCommand->dropAllTables()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\WipeCommand->handle()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#11 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(40): Illuminate\\Console\\Command->runCommand()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(45): Illuminate\\Console\\Command->callSilent()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Factory.php(56): Illuminate\\Console\\View\\Components\\Task->render()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(49): Illuminate\\Console\\View\\Components\\Factory->__call()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#29 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#33 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#34 \/tmp\/infection\/interceptor.autoload.b18867664d4f84e3d92eea5f596b4570.infection.php(13): require_once('...')\n#35 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#36 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#37 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#42 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#43 {main}"
    },
    {
      "mutator": {
        "mutatorName": "CastInt",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerAction;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeAspect;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeUnit;\ntrait GetMessage\n{\n    public function automatedMessageName() : string\n    {\n        return $this->payload()['name'];\n    }\n    public function replyTo() : string\n    {\n        return $this->payload()['replyTo'];\n    }\n    public function triggerTimeUnit() : TriggerTimeUnit\n    {\n        return TriggerTimeUnit::from($this->payload()['triggerTimeUnit']);\n    }\n    public function triggerValue() : int\n    {\n        return (int) $this->payload()['triggerValue'];\n    }\n    public function triggerTimeAspect() : TriggerTimeAspect\n    {\n        return TriggerTimeAspect::from($this->payload()['triggerTimeAspect']);\n    }\n    public function triggerAction() : TriggerAction\n    {\n        return TriggerAction::from($this->payload()['triggerAction']);\n    }\n    public function templateSettings() : array\n    {\n        $templateSettings = [];\n        foreach ($this->payload()['templateSettings'] as $languageCode => $templateSetting) {\n            $templateSettings[$languageCode] = ['site_id' => $this->siteId(), 'language_code' => $languageCode, 'is_html' => $templateSetting['isHtml'], 'subject' => $templateSetting['subject'], 'content' => $templateSetting['content']];\n        }\n        return $templateSettings;\n    }\n    public function filters() : array\n    {\n        return array_map(fn(array $filter): array => ['site_id' => $this->siteId(), 'name' => $filter['name'], 'value' => $filter['value']], $this->payload()['filters']);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerAction;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeAspect;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeUnit;\ntrait GetMessage\n{\n    public function automatedMessageName() : string\n    {\n        return $this->payload()['name'];\n    }\n    public function replyTo() : string\n    {\n        return $this->payload()['replyTo'];\n    }\n    public function triggerTimeUnit() : TriggerTimeUnit\n    {\n        return TriggerTimeUnit::from($this->payload()['triggerTimeUnit']);\n    }\n    public function triggerValue() : int\n    {\n        return $this->payload()['triggerValue'];\n    }\n    public function triggerTimeAspect() : TriggerTimeAspect\n    {\n        return TriggerTimeAspect::from($this->payload()['triggerTimeAspect']);\n    }\n    public function triggerAction() : TriggerAction\n    {\n        return TriggerAction::from($this->payload()['triggerAction']);\n    }\n    public function templateSettings() : array\n    {\n        $templateSettings = [];\n        foreach ($this->payload()['templateSettings'] as $languageCode => $templateSetting) {\n            $templateSettings[$languageCode] = ['site_id' => $this->siteId(), 'language_code' => $languageCode, 'is_html' => $templateSetting['isHtml'], 'subject' => $templateSetting['subject'], 'content' => $templateSetting['content']];\n        }\n        return $templateSettings;\n    }\n    public function filters() : array\n    {\n        return array_map(fn(array $filter): array => ['site_id' => $this->siteId(), 'name' => $filter['name'], 'value' => $filter['value']], $this->payload()['filters']);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/GetMessage.php",
        "originalStartLine": 30
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     }\n     public function triggerValue() : int\n     {\n-        return (int) $this->payload()['triggerValue'];\n+        return $this->payload()['triggerValue'];\n     }\n     public function triggerTimeAspect() : TriggerTimeAspect\n     {",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1051 Unknown table 'automated_messages.automated_messages,automated_messages.filters,automated_messages.migrations,au...' (SQL: drop table `automated_messages`,`filters`,`migrations`,`schedules`,`template_settings`)\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/MySqlBuilder.php(87): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(82): Illuminate\\Database\\Schema\\MySqlBuilder->dropAllTables()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(59): Illuminate\\Database\\Console\\WipeCommand->dropAllTables()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\WipeCommand->handle()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#11 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(40): Illuminate\\Console\\Command->runCommand()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(45): Illuminate\\Console\\Command->callSilent()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Factory.php(56): Illuminate\\Console\\View\\Components\\Task->render()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(49): Illuminate\\Console\\View\\Components\\Factory->__call()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#29 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#33 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#34 \/tmp\/infection\/interceptor.autoload.5a4e2111b69d6e3520a37064980ac94c.infection.php(13): require_once('...')\n#35 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#36 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#37 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#42 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#43 {main}"
    },
    {
      "mutator": {
        "mutatorName": "PublicVisibility",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerAction;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeAspect;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeUnit;\ntrait GetMessage\n{\n    public function automatedMessageName() : string\n    {\n        return $this->payload()['name'];\n    }\n    public function replyTo() : string\n    {\n        return $this->payload()['replyTo'];\n    }\n    public function triggerTimeUnit() : TriggerTimeUnit\n    {\n        return TriggerTimeUnit::from($this->payload()['triggerTimeUnit']);\n    }\n    public function triggerValue() : int\n    {\n        return (int) $this->payload()['triggerValue'];\n    }\n    public function triggerTimeAspect() : TriggerTimeAspect\n    {\n        return TriggerTimeAspect::from($this->payload()['triggerTimeAspect']);\n    }\n    public function triggerAction() : TriggerAction\n    {\n        return TriggerAction::from($this->payload()['triggerAction']);\n    }\n    public function templateSettings() : array\n    {\n        $templateSettings = [];\n        foreach ($this->payload()['templateSettings'] as $languageCode => $templateSetting) {\n            $templateSettings[$languageCode] = ['site_id' => $this->siteId(), 'language_code' => $languageCode, 'is_html' => $templateSetting['isHtml'], 'subject' => $templateSetting['subject'], 'content' => $templateSetting['content']];\n        }\n        return $templateSettings;\n    }\n    public function filters() : array\n    {\n        return array_map(fn(array $filter): array => ['site_id' => $this->siteId(), 'name' => $filter['name'], 'value' => $filter['value']], $this->payload()['filters']);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerAction;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeAspect;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeUnit;\ntrait GetMessage\n{\n    public function automatedMessageName() : string\n    {\n        return $this->payload()['name'];\n    }\n    public function replyTo() : string\n    {\n        return $this->payload()['replyTo'];\n    }\n    public function triggerTimeUnit() : TriggerTimeUnit\n    {\n        return TriggerTimeUnit::from($this->payload()['triggerTimeUnit']);\n    }\n    public function triggerValue() : int\n    {\n        return (int) $this->payload()['triggerValue'];\n    }\n    protected function triggerTimeAspect() : TriggerTimeAspect\n    {\n        return TriggerTimeAspect::from($this->payload()['triggerTimeAspect']);\n    }\n    public function triggerAction() : TriggerAction\n    {\n        return TriggerAction::from($this->payload()['triggerAction']);\n    }\n    public function templateSettings() : array\n    {\n        $templateSettings = [];\n        foreach ($this->payload()['templateSettings'] as $languageCode => $templateSetting) {\n            $templateSettings[$languageCode] = ['site_id' => $this->siteId(), 'language_code' => $languageCode, 'is_html' => $templateSetting['isHtml'], 'subject' => $templateSetting['subject'], 'content' => $templateSetting['content']];\n        }\n        return $templateSettings;\n    }\n    public function filters() : array\n    {\n        return array_map(fn(array $filter): array => ['site_id' => $this->siteId(), 'name' => $filter['name'], 'value' => $filter['value']], $this->payload()['filters']);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/GetMessage.php",
        "originalStartLine": 33
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     {\n         return (int) $this->payload()['triggerValue'];\n     }\n-    public function triggerTimeAspect() : TriggerTimeAspect\n+    protected function triggerTimeAspect() : TriggerTimeAspect\n     {\n         return TriggerTimeAspect::from($this->payload()['triggerTimeAspect']);\n     }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.filters' doesn't exist (SQL: alter table `filters` add constraint `filters_automated_message_id_foreign` foreign key (`automated_message_id`) references `automated_messages` (`id`))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_09_224222_create_filters_table.php(23): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateFiltersTable->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.9798ae7b2ace9be21c0ee05ca81cdf90.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "PublicVisibility",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerAction;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeAspect;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeUnit;\ntrait GetMessage\n{\n    public function automatedMessageName() : string\n    {\n        return $this->payload()['name'];\n    }\n    public function replyTo() : string\n    {\n        return $this->payload()['replyTo'];\n    }\n    public function triggerTimeUnit() : TriggerTimeUnit\n    {\n        return TriggerTimeUnit::from($this->payload()['triggerTimeUnit']);\n    }\n    public function triggerValue() : int\n    {\n        return (int) $this->payload()['triggerValue'];\n    }\n    public function triggerTimeAspect() : TriggerTimeAspect\n    {\n        return TriggerTimeAspect::from($this->payload()['triggerTimeAspect']);\n    }\n    public function triggerAction() : TriggerAction\n    {\n        return TriggerAction::from($this->payload()['triggerAction']);\n    }\n    public function templateSettings() : array\n    {\n        $templateSettings = [];\n        foreach ($this->payload()['templateSettings'] as $languageCode => $templateSetting) {\n            $templateSettings[$languageCode] = ['site_id' => $this->siteId(), 'language_code' => $languageCode, 'is_html' => $templateSetting['isHtml'], 'subject' => $templateSetting['subject'], 'content' => $templateSetting['content']];\n        }\n        return $templateSettings;\n    }\n    public function filters() : array\n    {\n        return array_map(fn(array $filter): array => ['site_id' => $this->siteId(), 'name' => $filter['name'], 'value' => $filter['value']], $this->payload()['filters']);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerAction;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeAspect;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeUnit;\ntrait GetMessage\n{\n    public function automatedMessageName() : string\n    {\n        return $this->payload()['name'];\n    }\n    public function replyTo() : string\n    {\n        return $this->payload()['replyTo'];\n    }\n    public function triggerTimeUnit() : TriggerTimeUnit\n    {\n        return TriggerTimeUnit::from($this->payload()['triggerTimeUnit']);\n    }\n    public function triggerValue() : int\n    {\n        return (int) $this->payload()['triggerValue'];\n    }\n    public function triggerTimeAspect() : TriggerTimeAspect\n    {\n        return TriggerTimeAspect::from($this->payload()['triggerTimeAspect']);\n    }\n    protected function triggerAction() : TriggerAction\n    {\n        return TriggerAction::from($this->payload()['triggerAction']);\n    }\n    public function templateSettings() : array\n    {\n        $templateSettings = [];\n        foreach ($this->payload()['templateSettings'] as $languageCode => $templateSetting) {\n            $templateSettings[$languageCode] = ['site_id' => $this->siteId(), 'language_code' => $languageCode, 'is_html' => $templateSetting['isHtml'], 'subject' => $templateSetting['subject'], 'content' => $templateSetting['content']];\n        }\n        return $templateSettings;\n    }\n    public function filters() : array\n    {\n        return array_map(fn(array $filter): array => ['site_id' => $this->siteId(), 'name' => $filter['name'], 'value' => $filter['value']], $this->payload()['filters']);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/GetMessage.php",
        "originalStartLine": 38
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     {\n         return TriggerTimeAspect::from($this->payload()['triggerTimeAspect']);\n     }\n-    public function triggerAction() : TriggerAction\n+    protected function triggerAction() : TriggerAction\n     {\n         return TriggerAction::from($this->payload()['triggerAction']);\n     }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1051 Unknown table 'automated_messages.filters,automated_messages.migrations,automated_messages.reservations,automate...' (SQL: drop table `filters`,`migrations`,`reservations`,`schedules`,`template_settings`)\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/MySqlBuilder.php(87): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(82): Illuminate\\Database\\Schema\\MySqlBuilder->dropAllTables()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(59): Illuminate\\Database\\Console\\WipeCommand->dropAllTables()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\WipeCommand->handle()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#11 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(40): Illuminate\\Console\\Command->runCommand()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(45): Illuminate\\Console\\Command->callSilent()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Factory.php(56): Illuminate\\Console\\View\\Components\\Task->render()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(49): Illuminate\\Console\\View\\Components\\Factory->__call()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#29 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#33 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#34 \/tmp\/infection\/interceptor.autoload.4b6f8fa90505a685c7898a5dfbfbbb6d.infection.php(13): require_once('...')\n#35 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#36 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#37 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#42 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#43 {main}"
    },
    {
      "mutator": {
        "mutatorName": "Foreach_",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerAction;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeAspect;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeUnit;\ntrait GetMessage\n{\n    public function automatedMessageName() : string\n    {\n        return $this->payload()['name'];\n    }\n    public function replyTo() : string\n    {\n        return $this->payload()['replyTo'];\n    }\n    public function triggerTimeUnit() : TriggerTimeUnit\n    {\n        return TriggerTimeUnit::from($this->payload()['triggerTimeUnit']);\n    }\n    public function triggerValue() : int\n    {\n        return (int) $this->payload()['triggerValue'];\n    }\n    public function triggerTimeAspect() : TriggerTimeAspect\n    {\n        return TriggerTimeAspect::from($this->payload()['triggerTimeAspect']);\n    }\n    public function triggerAction() : TriggerAction\n    {\n        return TriggerAction::from($this->payload()['triggerAction']);\n    }\n    public function templateSettings() : array\n    {\n        $templateSettings = [];\n        foreach ($this->payload()['templateSettings'] as $languageCode => $templateSetting) {\n            $templateSettings[$languageCode] = ['site_id' => $this->siteId(), 'language_code' => $languageCode, 'is_html' => $templateSetting['isHtml'], 'subject' => $templateSetting['subject'], 'content' => $templateSetting['content']];\n        }\n        return $templateSettings;\n    }\n    public function filters() : array\n    {\n        return array_map(fn(array $filter): array => ['site_id' => $this->siteId(), 'name' => $filter['name'], 'value' => $filter['value']], $this->payload()['filters']);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerAction;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeAspect;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeUnit;\ntrait GetMessage\n{\n    public function automatedMessageName() : string\n    {\n        return $this->payload()['name'];\n    }\n    public function replyTo() : string\n    {\n        return $this->payload()['replyTo'];\n    }\n    public function triggerTimeUnit() : TriggerTimeUnit\n    {\n        return TriggerTimeUnit::from($this->payload()['triggerTimeUnit']);\n    }\n    public function triggerValue() : int\n    {\n        return (int) $this->payload()['triggerValue'];\n    }\n    public function triggerTimeAspect() : TriggerTimeAspect\n    {\n        return TriggerTimeAspect::from($this->payload()['triggerTimeAspect']);\n    }\n    public function triggerAction() : TriggerAction\n    {\n        return TriggerAction::from($this->payload()['triggerAction']);\n    }\n    public function templateSettings() : array\n    {\n        $templateSettings = [];\n        foreach (array() as $languageCode => $templateSetting) {\n            $templateSettings[$languageCode] = ['site_id' => $this->siteId(), 'language_code' => $languageCode, 'is_html' => $templateSetting['isHtml'], 'subject' => $templateSetting['subject'], 'content' => $templateSetting['content']];\n        }\n        return $templateSettings;\n    }\n    public function filters() : array\n    {\n        return array_map(fn(array $filter): array => ['site_id' => $this->siteId(), 'name' => $filter['name'], 'value' => $filter['value']], $this->payload()['filters']);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/GetMessage.php",
        "originalStartLine": 47
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     public function templateSettings() : array\n     {\n         $templateSettings = [];\n-        foreach ($this->payload()['templateSettings'] as $languageCode => $templateSetting) {\n+        foreach (array() as $languageCode => $templateSetting) {\n             $templateSettings[$languageCode] = ['site_id' => $this->siteId(), 'language_code' => $languageCode, 'is_html' => $templateSetting['isHtml'], 'subject' => $templateSetting['subject'], 'content' => $templateSetting['content']];\n         }\n         return $templateSettings;",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S01]: Base table or view already exists: 1050 Table 'automated_messages' already exists (SQL: create table `automated_messages` (`id` char(36) not null, `site_id` int not null, `name` varchar(255) not null, `reply_to` varchar(255) not null, `trigger_time_unit` varchar(255) not null, `trigger_value` int not null, `trigger_time_aspect` varchar(255) not null, `trigger_action` varchar(255) not null, `last_message_sent_at` datetime null, `is_active` tinyint(1) not null default '0', `deleted_at` timestamp null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8 collate 'utf8_unicode_ci')\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_07_205040_create_automated_messages_table.php(27): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateAutomatedMessagesTable->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.d2329c7adce00440a684f3a80a97b871.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItemRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerAction;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeAspect;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeUnit;\ntrait GetMessage\n{\n    public function automatedMessageName() : string\n    {\n        return $this->payload()['name'];\n    }\n    public function replyTo() : string\n    {\n        return $this->payload()['replyTo'];\n    }\n    public function triggerTimeUnit() : TriggerTimeUnit\n    {\n        return TriggerTimeUnit::from($this->payload()['triggerTimeUnit']);\n    }\n    public function triggerValue() : int\n    {\n        return (int) $this->payload()['triggerValue'];\n    }\n    public function triggerTimeAspect() : TriggerTimeAspect\n    {\n        return TriggerTimeAspect::from($this->payload()['triggerTimeAspect']);\n    }\n    public function triggerAction() : TriggerAction\n    {\n        return TriggerAction::from($this->payload()['triggerAction']);\n    }\n    public function templateSettings() : array\n    {\n        $templateSettings = [];\n        foreach ($this->payload()['templateSettings'] as $languageCode => $templateSetting) {\n            $templateSettings[$languageCode] = ['site_id' => $this->siteId(), 'language_code' => $languageCode, 'is_html' => $templateSetting['isHtml'], 'subject' => $templateSetting['subject'], 'content' => $templateSetting['content']];\n        }\n        return $templateSettings;\n    }\n    public function filters() : array\n    {\n        return array_map(fn(array $filter): array => ['site_id' => $this->siteId(), 'name' => $filter['name'], 'value' => $filter['value']], $this->payload()['filters']);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerAction;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeAspect;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeUnit;\ntrait GetMessage\n{\n    public function automatedMessageName() : string\n    {\n        return $this->payload()['name'];\n    }\n    public function replyTo() : string\n    {\n        return $this->payload()['replyTo'];\n    }\n    public function triggerTimeUnit() : TriggerTimeUnit\n    {\n        return TriggerTimeUnit::from($this->payload()['triggerTimeUnit']);\n    }\n    public function triggerValue() : int\n    {\n        return (int) $this->payload()['triggerValue'];\n    }\n    public function triggerTimeAspect() : TriggerTimeAspect\n    {\n        return TriggerTimeAspect::from($this->payload()['triggerTimeAspect']);\n    }\n    public function triggerAction() : TriggerAction\n    {\n        return TriggerAction::from($this->payload()['triggerAction']);\n    }\n    public function templateSettings() : array\n    {\n        $templateSettings = [];\n        foreach ($this->payload()['templateSettings'] as $languageCode => $templateSetting) {\n            $templateSettings[$languageCode] = ['language_code' => $languageCode, 'is_html' => $templateSetting['isHtml'], 'subject' => $templateSetting['subject'], 'content' => $templateSetting['content']];\n        }\n        return $templateSettings;\n    }\n    public function filters() : array\n    {\n        return array_map(fn(array $filter): array => ['site_id' => $this->siteId(), 'name' => $filter['name'], 'value' => $filter['value']], $this->payload()['filters']);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/GetMessage.php",
        "originalStartLine": 48
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     {\n         $templateSettings = [];\n         foreach ($this->payload()['templateSettings'] as $languageCode => $templateSetting) {\n-            $templateSettings[$languageCode] = ['site_id' => $this->siteId(), 'language_code' => $languageCode, 'is_html' => $templateSetting['isHtml'], 'subject' => $templateSetting['subject'], 'content' => $templateSetting['content']];\n+            $templateSettings[$languageCode] = ['language_code' => $languageCode, 'is_html' => $templateSetting['isHtml'], 'subject' => $templateSetting['subject'], 'content' => $templateSetting['content']];\n         }\n         return $templateSettings;\n     }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[HY000]: General error: 1005 Can't create table `automated_messages`.`filters` (errno: 150 \"Foreign key constraint is incorrectly formed\") (SQL: alter table `filters` add constraint `filters_automated_message_id_foreign` foreign key (`automated_message_id`) references `automated_messages` (`id`))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_09_224222_create_filters_table.php(23): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateFiltersTable->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.30774e51c81e17f53a8f116687380837.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItem",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerAction;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeAspect;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeUnit;\ntrait GetMessage\n{\n    public function automatedMessageName() : string\n    {\n        return $this->payload()['name'];\n    }\n    public function replyTo() : string\n    {\n        return $this->payload()['replyTo'];\n    }\n    public function triggerTimeUnit() : TriggerTimeUnit\n    {\n        return TriggerTimeUnit::from($this->payload()['triggerTimeUnit']);\n    }\n    public function triggerValue() : int\n    {\n        return (int) $this->payload()['triggerValue'];\n    }\n    public function triggerTimeAspect() : TriggerTimeAspect\n    {\n        return TriggerTimeAspect::from($this->payload()['triggerTimeAspect']);\n    }\n    public function triggerAction() : TriggerAction\n    {\n        return TriggerAction::from($this->payload()['triggerAction']);\n    }\n    public function templateSettings() : array\n    {\n        $templateSettings = [];\n        foreach ($this->payload()['templateSettings'] as $languageCode => $templateSetting) {\n            $templateSettings[$languageCode] = ['site_id' => $this->siteId(), 'language_code' => $languageCode, 'is_html' => $templateSetting['isHtml'], 'subject' => $templateSetting['subject'], 'content' => $templateSetting['content']];\n        }\n        return $templateSettings;\n    }\n    public function filters() : array\n    {\n        return array_map(fn(array $filter): array => ['site_id' => $this->siteId(), 'name' => $filter['name'], 'value' => $filter['value']], $this->payload()['filters']);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerAction;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeAspect;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeUnit;\ntrait GetMessage\n{\n    public function automatedMessageName() : string\n    {\n        return $this->payload()['name'];\n    }\n    public function replyTo() : string\n    {\n        return $this->payload()['replyTo'];\n    }\n    public function triggerTimeUnit() : TriggerTimeUnit\n    {\n        return TriggerTimeUnit::from($this->payload()['triggerTimeUnit']);\n    }\n    public function triggerValue() : int\n    {\n        return (int) $this->payload()['triggerValue'];\n    }\n    public function triggerTimeAspect() : TriggerTimeAspect\n    {\n        return TriggerTimeAspect::from($this->payload()['triggerTimeAspect']);\n    }\n    public function triggerAction() : TriggerAction\n    {\n        return TriggerAction::from($this->payload()['triggerAction']);\n    }\n    public function templateSettings() : array\n    {\n        $templateSettings = [];\n        foreach ($this->payload()['templateSettings'] as $languageCode => $templateSetting) {\n            $templateSettings[$languageCode] = ['site_id' > $this->siteId(), 'language_code' => $languageCode, 'is_html' => $templateSetting['isHtml'], 'subject' => $templateSetting['subject'], 'content' => $templateSetting['content']];\n        }\n        return $templateSettings;\n    }\n    public function filters() : array\n    {\n        return array_map(fn(array $filter): array => ['site_id' => $this->siteId(), 'name' => $filter['name'], 'value' => $filter['value']], $this->payload()['filters']);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/GetMessage.php",
        "originalStartLine": 49
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     {\n         $templateSettings = [];\n         foreach ($this->payload()['templateSettings'] as $languageCode => $templateSetting) {\n-            $templateSettings[$languageCode] = ['site_id' => $this->siteId(), 'language_code' => $languageCode, 'is_html' => $templateSetting['isHtml'], 'subject' => $templateSetting['subject'], 'content' => $templateSetting['content']];\n+            $templateSettings[$languageCode] = ['site_id' > $this->siteId(), 'language_code' => $languageCode, 'is_html' => $templateSetting['isHtml'], 'subject' => $templateSetting['subject'], 'content' => $templateSetting['content']];\n         }\n         return $templateSettings;\n     }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1051 Unknown table 'automated_messages.automated_messages,automated_messages.filters,automated_messages.migrations,au...' (SQL: drop table `automated_messages`,`filters`,`migrations`,`reservations`,`schedules`,`template_settings`)\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/MySqlBuilder.php(87): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(82): Illuminate\\Database\\Schema\\MySqlBuilder->dropAllTables()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(59): Illuminate\\Database\\Console\\WipeCommand->dropAllTables()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\WipeCommand->handle()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#11 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(40): Illuminate\\Console\\Command->runCommand()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(45): Illuminate\\Console\\Command->callSilent()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Factory.php(56): Illuminate\\Console\\View\\Components\\Task->render()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(49): Illuminate\\Console\\View\\Components\\Factory->__call()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#29 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#33 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#34 \/tmp\/infection\/interceptor.autoload.df73abad56d266efe5133541a786998d.infection.php(13): require_once('...')\n#35 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#36 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#37 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#42 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#43 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayOneItem",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerAction;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeAspect;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeUnit;\ntrait GetMessage\n{\n    public function automatedMessageName() : string\n    {\n        return $this->payload()['name'];\n    }\n    public function replyTo() : string\n    {\n        return $this->payload()['replyTo'];\n    }\n    public function triggerTimeUnit() : TriggerTimeUnit\n    {\n        return TriggerTimeUnit::from($this->payload()['triggerTimeUnit']);\n    }\n    public function triggerValue() : int\n    {\n        return (int) $this->payload()['triggerValue'];\n    }\n    public function triggerTimeAspect() : TriggerTimeAspect\n    {\n        return TriggerTimeAspect::from($this->payload()['triggerTimeAspect']);\n    }\n    public function triggerAction() : TriggerAction\n    {\n        return TriggerAction::from($this->payload()['triggerAction']);\n    }\n    public function templateSettings() : array\n    {\n        $templateSettings = [];\n        foreach ($this->payload()['templateSettings'] as $languageCode => $templateSetting) {\n            $templateSettings[$languageCode] = ['site_id' => $this->siteId(), 'language_code' => $languageCode, 'is_html' => $templateSetting['isHtml'], 'subject' => $templateSetting['subject'], 'content' => $templateSetting['content']];\n        }\n        return $templateSettings;\n    }\n    public function filters() : array\n    {\n        return array_map(fn(array $filter): array => ['site_id' => $this->siteId(), 'name' => $filter['name'], 'value' => $filter['value']], $this->payload()['filters']);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerAction;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeAspect;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeUnit;\ntrait GetMessage\n{\n    public function automatedMessageName() : string\n    {\n        return $this->payload()['name'];\n    }\n    public function replyTo() : string\n    {\n        return $this->payload()['replyTo'];\n    }\n    public function triggerTimeUnit() : TriggerTimeUnit\n    {\n        return TriggerTimeUnit::from($this->payload()['triggerTimeUnit']);\n    }\n    public function triggerValue() : int\n    {\n        return (int) $this->payload()['triggerValue'];\n    }\n    public function triggerTimeAspect() : TriggerTimeAspect\n    {\n        return TriggerTimeAspect::from($this->payload()['triggerTimeAspect']);\n    }\n    public function triggerAction() : TriggerAction\n    {\n        return TriggerAction::from($this->payload()['triggerAction']);\n    }\n    public function templateSettings() : array\n    {\n        $templateSettings = [];\n        foreach ($this->payload()['templateSettings'] as $languageCode => $templateSetting) {\n            $templateSettings[$languageCode] = ['site_id' => $this->siteId(), 'language_code' => $languageCode, 'is_html' => $templateSetting['isHtml'], 'subject' => $templateSetting['subject'], 'content' => $templateSetting['content']];\n        }\n        return count($templateSettings) > 1 ? array_slice($templateSettings, 0, 1, true) : $templateSettings;\n    }\n    public function filters() : array\n    {\n        return array_map(fn(array $filter): array => ['site_id' => $this->siteId(), 'name' => $filter['name'], 'value' => $filter['value']], $this->payload()['filters']);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/GetMessage.php",
        "originalStartLine": 57
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         foreach ($this->payload()['templateSettings'] as $languageCode => $templateSetting) {\n             $templateSettings[$languageCode] = ['site_id' => $this->siteId(), 'language_code' => $languageCode, 'is_html' => $templateSetting['isHtml'], 'subject' => $templateSetting['subject'], 'content' => $templateSetting['content']];\n         }\n-        return $templateSettings;\n+        return count($templateSettings) > 1 ? array_slice($templateSettings, 0, 1, true) : $templateSettings;\n     }\n     public function filters() : array\n     {",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.filters' doesn't exist (SQL: alter table `filters` add constraint `filters_automated_message_id_foreign` foreign key (`automated_message_id`) references `automated_messages` (`id`))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_09_224222_create_filters_table.php(23): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateFiltersTable->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.2b960508976c07a94ab4cc2c135181bd.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItemRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerAction;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeAspect;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeUnit;\ntrait GetMessage\n{\n    public function automatedMessageName() : string\n    {\n        return $this->payload()['name'];\n    }\n    public function replyTo() : string\n    {\n        return $this->payload()['replyTo'];\n    }\n    public function triggerTimeUnit() : TriggerTimeUnit\n    {\n        return TriggerTimeUnit::from($this->payload()['triggerTimeUnit']);\n    }\n    public function triggerValue() : int\n    {\n        return (int) $this->payload()['triggerValue'];\n    }\n    public function triggerTimeAspect() : TriggerTimeAspect\n    {\n        return TriggerTimeAspect::from($this->payload()['triggerTimeAspect']);\n    }\n    public function triggerAction() : TriggerAction\n    {\n        return TriggerAction::from($this->payload()['triggerAction']);\n    }\n    public function templateSettings() : array\n    {\n        $templateSettings = [];\n        foreach ($this->payload()['templateSettings'] as $languageCode => $templateSetting) {\n            $templateSettings[$languageCode] = ['site_id' => $this->siteId(), 'language_code' => $languageCode, 'is_html' => $templateSetting['isHtml'], 'subject' => $templateSetting['subject'], 'content' => $templateSetting['content']];\n        }\n        return $templateSettings;\n    }\n    public function filters() : array\n    {\n        return array_map(fn(array $filter): array => ['site_id' => $this->siteId(), 'name' => $filter['name'], 'value' => $filter['value']], $this->payload()['filters']);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerAction;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeAspect;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeUnit;\ntrait GetMessage\n{\n    public function automatedMessageName() : string\n    {\n        return $this->payload()['name'];\n    }\n    public function replyTo() : string\n    {\n        return $this->payload()['replyTo'];\n    }\n    public function triggerTimeUnit() : TriggerTimeUnit\n    {\n        return TriggerTimeUnit::from($this->payload()['triggerTimeUnit']);\n    }\n    public function triggerValue() : int\n    {\n        return (int) $this->payload()['triggerValue'];\n    }\n    public function triggerTimeAspect() : TriggerTimeAspect\n    {\n        return TriggerTimeAspect::from($this->payload()['triggerTimeAspect']);\n    }\n    public function triggerAction() : TriggerAction\n    {\n        return TriggerAction::from($this->payload()['triggerAction']);\n    }\n    public function templateSettings() : array\n    {\n        $templateSettings = [];\n        foreach ($this->payload()['templateSettings'] as $languageCode => $templateSetting) {\n            $templateSettings[$languageCode] = ['site_id' => $this->siteId(), 'language_code' => $languageCode, 'is_html' => $templateSetting['isHtml'], 'subject' => $templateSetting['subject'], 'content' => $templateSetting['content']];\n        }\n        return $templateSettings;\n    }\n    public function filters() : array\n    {\n        return array_map(fn(array $filter): array => ['name' => $filter['name'], 'value' => $filter['value']], $this->payload()['filters']);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/GetMessage.php",
        "originalStartLine": 62
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     }\n     public function filters() : array\n     {\n-        return array_map(fn(array $filter): array => ['site_id' => $this->siteId(), 'name' => $filter['name'], 'value' => $filter['value']], $this->payload()['filters']);\n+        return array_map(fn(array $filter): array => ['name' => $filter['name'], 'value' => $filter['value']], $this->payload()['filters']);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: insert into `migrations` (`migration`, `batch`) values (2022_07_09_220313_create_template_settings, 1))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(497): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3198): Illuminate\\Database\\Connection->insert()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(107): Illuminate\\Database\\Query\\Builder->insert()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(211): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->log()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#17 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#28 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#30 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#31 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#32 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#36 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#37 \/tmp\/infection\/interceptor.autoload.9c82971b0667049decfbbf3d7bcaa6a7.infection.php(13): require_once('...')\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#45 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#46 {main}"
    },
    {
      "mutator": {
        "mutatorName": "UnwrapArrayMap",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerAction;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeAspect;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeUnit;\ntrait GetMessage\n{\n    public function automatedMessageName() : string\n    {\n        return $this->payload()['name'];\n    }\n    public function replyTo() : string\n    {\n        return $this->payload()['replyTo'];\n    }\n    public function triggerTimeUnit() : TriggerTimeUnit\n    {\n        return TriggerTimeUnit::from($this->payload()['triggerTimeUnit']);\n    }\n    public function triggerValue() : int\n    {\n        return (int) $this->payload()['triggerValue'];\n    }\n    public function triggerTimeAspect() : TriggerTimeAspect\n    {\n        return TriggerTimeAspect::from($this->payload()['triggerTimeAspect']);\n    }\n    public function triggerAction() : TriggerAction\n    {\n        return TriggerAction::from($this->payload()['triggerAction']);\n    }\n    public function templateSettings() : array\n    {\n        $templateSettings = [];\n        foreach ($this->payload()['templateSettings'] as $languageCode => $templateSetting) {\n            $templateSettings[$languageCode] = ['site_id' => $this->siteId(), 'language_code' => $languageCode, 'is_html' => $templateSetting['isHtml'], 'subject' => $templateSetting['subject'], 'content' => $templateSetting['content']];\n        }\n        return $templateSettings;\n    }\n    public function filters() : array\n    {\n        return array_map(fn(array $filter): array => ['site_id' => $this->siteId(), 'name' => $filter['name'], 'value' => $filter['value']], $this->payload()['filters']);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerAction;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeAspect;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeUnit;\ntrait GetMessage\n{\n    public function automatedMessageName() : string\n    {\n        return $this->payload()['name'];\n    }\n    public function replyTo() : string\n    {\n        return $this->payload()['replyTo'];\n    }\n    public function triggerTimeUnit() : TriggerTimeUnit\n    {\n        return TriggerTimeUnit::from($this->payload()['triggerTimeUnit']);\n    }\n    public function triggerValue() : int\n    {\n        return (int) $this->payload()['triggerValue'];\n    }\n    public function triggerTimeAspect() : TriggerTimeAspect\n    {\n        return TriggerTimeAspect::from($this->payload()['triggerTimeAspect']);\n    }\n    public function triggerAction() : TriggerAction\n    {\n        return TriggerAction::from($this->payload()['triggerAction']);\n    }\n    public function templateSettings() : array\n    {\n        $templateSettings = [];\n        foreach ($this->payload()['templateSettings'] as $languageCode => $templateSetting) {\n            $templateSettings[$languageCode] = ['site_id' => $this->siteId(), 'language_code' => $languageCode, 'is_html' => $templateSetting['isHtml'], 'subject' => $templateSetting['subject'], 'content' => $templateSetting['content']];\n        }\n        return $templateSettings;\n    }\n    public function filters() : array\n    {\n        return $this->payload()['filters'];\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/GetMessage.php",
        "originalStartLine": 62
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     }\n     public function filters() : array\n     {\n-        return array_map(fn(array $filter): array => ['site_id' => $this->siteId(), 'name' => $filter['name'], 'value' => $filter['value']], $this->payload()['filters']);\n+        return $this->payload()['filters'];\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: insert into `migrations` (`migration`, `batch`) values (2022_07_07_213230_create_schedules_table, 1))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(497): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3198): Illuminate\\Database\\Connection->insert()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(107): Illuminate\\Database\\Query\\Builder->insert()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(211): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->log()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#17 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#28 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#30 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#31 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#32 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#36 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#37 \/tmp\/infection\/interceptor.autoload.ef0e32e747fbf5c51a801a416f2829e0.infection.php(13): require_once('...')\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#45 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#46 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItem",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerAction;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeAspect;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeUnit;\ntrait GetMessage\n{\n    public function automatedMessageName() : string\n    {\n        return $this->payload()['name'];\n    }\n    public function replyTo() : string\n    {\n        return $this->payload()['replyTo'];\n    }\n    public function triggerTimeUnit() : TriggerTimeUnit\n    {\n        return TriggerTimeUnit::from($this->payload()['triggerTimeUnit']);\n    }\n    public function triggerValue() : int\n    {\n        return (int) $this->payload()['triggerValue'];\n    }\n    public function triggerTimeAspect() : TriggerTimeAspect\n    {\n        return TriggerTimeAspect::from($this->payload()['triggerTimeAspect']);\n    }\n    public function triggerAction() : TriggerAction\n    {\n        return TriggerAction::from($this->payload()['triggerAction']);\n    }\n    public function templateSettings() : array\n    {\n        $templateSettings = [];\n        foreach ($this->payload()['templateSettings'] as $languageCode => $templateSetting) {\n            $templateSettings[$languageCode] = ['site_id' => $this->siteId(), 'language_code' => $languageCode, 'is_html' => $templateSetting['isHtml'], 'subject' => $templateSetting['subject'], 'content' => $templateSetting['content']];\n        }\n        return $templateSettings;\n    }\n    public function filters() : array\n    {\n        return array_map(fn(array $filter): array => ['site_id' => $this->siteId(), 'name' => $filter['name'], 'value' => $filter['value']], $this->payload()['filters']);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerAction;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeAspect;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeUnit;\ntrait GetMessage\n{\n    public function automatedMessageName() : string\n    {\n        return $this->payload()['name'];\n    }\n    public function replyTo() : string\n    {\n        return $this->payload()['replyTo'];\n    }\n    public function triggerTimeUnit() : TriggerTimeUnit\n    {\n        return TriggerTimeUnit::from($this->payload()['triggerTimeUnit']);\n    }\n    public function triggerValue() : int\n    {\n        return (int) $this->payload()['triggerValue'];\n    }\n    public function triggerTimeAspect() : TriggerTimeAspect\n    {\n        return TriggerTimeAspect::from($this->payload()['triggerTimeAspect']);\n    }\n    public function triggerAction() : TriggerAction\n    {\n        return TriggerAction::from($this->payload()['triggerAction']);\n    }\n    public function templateSettings() : array\n    {\n        $templateSettings = [];\n        foreach ($this->payload()['templateSettings'] as $languageCode => $templateSetting) {\n            $templateSettings[$languageCode] = ['site_id' => $this->siteId(), 'language_code' => $languageCode, 'is_html' => $templateSetting['isHtml'], 'subject' => $templateSetting['subject'], 'content' => $templateSetting['content']];\n        }\n        return $templateSettings;\n    }\n    public function filters() : array\n    {\n        return array_map(fn(array $filter): array => ['site_id' > $this->siteId(), 'name' => $filter['name'], 'value' => $filter['value']], $this->payload()['filters']);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/GetMessage.php",
        "originalStartLine": 63
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     }\n     public function filters() : array\n     {\n-        return array_map(fn(array $filter): array => ['site_id' => $this->siteId(), 'name' => $filter['name'], 'value' => $filter['value']], $this->payload()['filters']);\n+        return array_map(fn(array $filter): array => ['site_id' > $this->siteId(), 'name' => $filter['name'], 'value' => $filter['value']], $this->payload()['filters']);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[40001]: Serialization failure: 1213 Deadlock found when trying to get lock; try restarting transaction (SQL: drop table `automated_messages`,`filters`,`migrations`,`schedules`,`template_settings`)\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/MySqlBuilder.php(87): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(82): Illuminate\\Database\\Schema\\MySqlBuilder->dropAllTables()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(59): Illuminate\\Database\\Console\\WipeCommand->dropAllTables()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\WipeCommand->handle()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#11 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(40): Illuminate\\Console\\Command->runCommand()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(45): Illuminate\\Console\\Command->callSilent()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Factory.php(56): Illuminate\\Console\\View\\Components\\Task->render()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(49): Illuminate\\Console\\View\\Components\\Factory->__call()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#29 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#33 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#34 \/tmp\/infection\/interceptor.autoload.4840fc6b72ce596fdfd03b19a0f151f0.infection.php(13): require_once('...')\n#35 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#36 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#37 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#42 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#43 {main}"
    },
    {
      "mutator": {
        "mutatorName": "TrueValue",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Activate;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class ActivateHandler\n{\n    private const EVENT_ACTIVATED = 'event.automated-messages.activated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageQueryInterface $automatedMessageQuery, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Activate $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['is_active' => true]);\n        $this->scheduling->whenActivated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n        $this->messageBus->dispatch(new Message(self::EVENT_ACTIVATED, ['id' => $command->messageId()], ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Activate;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class ActivateHandler\n{\n    private const EVENT_ACTIVATED = 'event.automated-messages.activated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageQueryInterface $automatedMessageQuery, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Activate $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['is_active' => false]);\n        $this->scheduling->whenActivated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n        $this->messageBus->dispatch(new Message(self::EVENT_ACTIVATED, ['id' => $command->messageId()], ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ActivateHandler.php",
        "originalStartLine": 29
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     public function __invoke(Activate $command) : void\n     {\n         $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n-        $automatedMessage->update(['is_active' => true]);\n+        $automatedMessage->update(['is_active' => false]);\n         $this->scheduling->whenActivated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n         $this->messageBus->dispatch(new Message(self::EVENT_ACTIVATED, ['id' => $command->messageId()], ['!siteId' => $command->siteId()]), $command);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S01]: Base table or view already exists: 1050 Table 'migrations' already exists (SQL: create table `migrations` (`id` int unsigned not null auto_increment primary key, `migration` varchar(255) not null, `batch` int not null) default character set utf8 collate 'utf8_unicode_ci')\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(157): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/InstallCommand.php(54): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->createRepository()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\InstallCommand->handle()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#13 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(40): Illuminate\\Console\\Command->runCommand()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(120): Illuminate\\Console\\Command->callSilent()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Factory.php(56): Illuminate\\Console\\View\\Components\\Task->render()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(122): Illuminate\\Console\\View\\Components\\Factory->__call()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(79): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->prepareDatabase()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#30 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#36 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#38 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#39 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#40 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#41 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#43 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#44 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#45 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#46 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#47 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#48 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#49 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#50 \/tmp\/infection\/interceptor.autoload.77a934c11003d48a67547e86a9ca32a4.infection.php(13): require_once('...')\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#53 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#54 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#55 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#56 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#57 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#58 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#59 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItemRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Activate;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class ActivateHandler\n{\n    private const EVENT_ACTIVATED = 'event.automated-messages.activated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageQueryInterface $automatedMessageQuery, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Activate $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['is_active' => true]);\n        $this->scheduling->whenActivated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n        $this->messageBus->dispatch(new Message(self::EVENT_ACTIVATED, ['id' => $command->messageId()], ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Activate;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class ActivateHandler\n{\n    private const EVENT_ACTIVATED = 'event.automated-messages.activated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageQueryInterface $automatedMessageQuery, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Activate $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update([]);\n        $this->scheduling->whenActivated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n        $this->messageBus->dispatch(new Message(self::EVENT_ACTIVATED, ['id' => $command->messageId()], ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ActivateHandler.php",
        "originalStartLine": 29
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     public function __invoke(Activate $command) : void\n     {\n         $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n-        $automatedMessage->update(['is_active' => true]);\n+        $automatedMessage->update([]);\n         $this->scheduling->whenActivated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n         $this->messageBus->dispatch(new Message(self::EVENT_ACTIVATED, ['id' => $command->messageId()], ['!siteId' => $command->siteId()]), $command);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.automated_messages' doesn't exist (SQL: alter table `automated_messages` add primary key `automated_messages_id_primary`(`id`))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_07_205040_create_automated_messages_table.php(27): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateAutomatedMessagesTable->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.a6fa8300ba33119a36ba50d99e6d4eb8.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "MethodCallRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Activate;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class ActivateHandler\n{\n    private const EVENT_ACTIVATED = 'event.automated-messages.activated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageQueryInterface $automatedMessageQuery, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Activate $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['is_active' => true]);\n        $this->scheduling->whenActivated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n        $this->messageBus->dispatch(new Message(self::EVENT_ACTIVATED, ['id' => $command->messageId()], ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Activate;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class ActivateHandler\n{\n    private const EVENT_ACTIVATED = 'event.automated-messages.activated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageQueryInterface $automatedMessageQuery, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Activate $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        \n        $this->scheduling->whenActivated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n        $this->messageBus->dispatch(new Message(self::EVENT_ACTIVATED, ['id' => $command->messageId()], ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ActivateHandler.php",
        "originalStartLine": 29
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     public function __invoke(Activate $command) : void\n     {\n         $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n-        $automatedMessage->update(['is_active' => true]);\n+        \n         $this->scheduling->whenActivated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n         $this->messageBus->dispatch(new Message(self::EVENT_ACTIVATED, ['id' => $command->messageId()], ['!siteId' => $command->siteId()]), $command);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: select `migration` from `migrations` order by `batch` asc, `migration` asc)\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(421): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(2630): Illuminate\\Database\\Connection->select()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(2844): Illuminate\\Database\\Query\\Builder->runSelect()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3154): Illuminate\\Database\\Query\\Builder->Illuminate\\Database\\Query\\{closure}()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(2846): Illuminate\\Database\\Query\\Builder->onceWithColumns()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(53): Illuminate\\Database\\Query\\Builder->pluck()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(112): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->getRan()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#17 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#28 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#30 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#31 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#32 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#36 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#37 \/tmp\/infection\/interceptor.autoload.417796d266b7303234e2cba471064fef.infection.php(13): require_once('...')\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#45 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#46 {main}"
    },
    {
      "mutator": {
        "mutatorName": "MethodCallRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Activate;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class ActivateHandler\n{\n    private const EVENT_ACTIVATED = 'event.automated-messages.activated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageQueryInterface $automatedMessageQuery, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Activate $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['is_active' => true]);\n        $this->scheduling->whenActivated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n        $this->messageBus->dispatch(new Message(self::EVENT_ACTIVATED, ['id' => $command->messageId()], ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Activate;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class ActivateHandler\n{\n    private const EVENT_ACTIVATED = 'event.automated-messages.activated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageQueryInterface $automatedMessageQuery, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Activate $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['is_active' => true]);\n        \n        $this->messageBus->dispatch(new Message(self::EVENT_ACTIVATED, ['id' => $command->messageId()], ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ActivateHandler.php",
        "originalStartLine": 31
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     {\n         $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n         $automatedMessage->update(['is_active' => true]);\n-        $this->scheduling->whenActivated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n+        \n         $this->messageBus->dispatch(new Message(self::EVENT_ACTIVATED, ['id' => $command->messageId()], ['!siteId' => $command->siteId()]), $command);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[40001]: Serialization failure: 1213 Deadlock found when trying to get lock; try restarting transaction (SQL: alter table `filters` add constraint `filters_automated_message_id_foreign` foreign key (`automated_message_id`) references `automated_messages` (`id`))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_09_224222_create_filters_table.php(23): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateFiltersTable->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.eb889f565b23d06ce5a3c5c73b32bf4d.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItem",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Activate;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class ActivateHandler\n{\n    private const EVENT_ACTIVATED = 'event.automated-messages.activated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageQueryInterface $automatedMessageQuery, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Activate $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['is_active' => true]);\n        $this->scheduling->whenActivated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n        $this->messageBus->dispatch(new Message(self::EVENT_ACTIVATED, ['id' => $command->messageId()], ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Activate;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class ActivateHandler\n{\n    private const EVENT_ACTIVATED = 'event.automated-messages.activated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageQueryInterface $automatedMessageQuery, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Activate $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['is_active' => true]);\n        $this->scheduling->whenActivated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n        $this->messageBus->dispatch(new Message(self::EVENT_ACTIVATED, ['id' > $command->messageId()], ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ActivateHandler.php",
        "originalStartLine": 38
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n         $automatedMessage->update(['is_active' => true]);\n         $this->scheduling->whenActivated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n-        $this->messageBus->dispatch(new Message(self::EVENT_ACTIVATED, ['id' => $command->messageId()], ['!siteId' => $command->siteId()]), $command);\n+        $this->messageBus->dispatch(new Message(self::EVENT_ACTIVATED, ['id' > $command->messageId()], ['!siteId' => $command->siteId()]), $command);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: insert into `migrations` (`migration`, `batch`) values (2022_07_07_213230_create_schedules_table, 1))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(497): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3198): Illuminate\\Database\\Connection->insert()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(107): Illuminate\\Database\\Query\\Builder->insert()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(211): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->log()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#17 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#28 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#30 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#31 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#32 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#36 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#37 \/tmp\/infection\/interceptor.autoload.94ce4773f20e569cf5d940b08614f3d4.infection.php(13): require_once('...')\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#45 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#46 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItemRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Activate;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class ActivateHandler\n{\n    private const EVENT_ACTIVATED = 'event.automated-messages.activated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageQueryInterface $automatedMessageQuery, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Activate $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['is_active' => true]);\n        $this->scheduling->whenActivated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n        $this->messageBus->dispatch(new Message(self::EVENT_ACTIVATED, ['id' => $command->messageId()], ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Activate;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class ActivateHandler\n{\n    private const EVENT_ACTIVATED = 'event.automated-messages.activated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageQueryInterface $automatedMessageQuery, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Activate $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['is_active' => true]);\n        $this->scheduling->whenActivated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n        $this->messageBus->dispatch(new Message(self::EVENT_ACTIVATED, [], ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ActivateHandler.php",
        "originalStartLine": 38
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n         $automatedMessage->update(['is_active' => true]);\n         $this->scheduling->whenActivated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n-        $this->messageBus->dispatch(new Message(self::EVENT_ACTIVATED, ['id' => $command->messageId()], ['!siteId' => $command->siteId()]), $command);\n+        $this->messageBus->dispatch(new Message(self::EVENT_ACTIVATED, [], ['!siteId' => $command->siteId()]), $command);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: select `migration` from `migrations` order by `batch` asc, `migration` asc)\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(421): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(2630): Illuminate\\Database\\Connection->select()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(2844): Illuminate\\Database\\Query\\Builder->runSelect()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3154): Illuminate\\Database\\Query\\Builder->Illuminate\\Database\\Query\\{closure}()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(2846): Illuminate\\Database\\Query\\Builder->onceWithColumns()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(53): Illuminate\\Database\\Query\\Builder->pluck()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(685): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->getRan()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(127): Illuminate\\Database\\Migrations\\Migrator->hasRunAnyMigrations()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(79): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->prepareDatabase()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#18 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#29 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#31 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#32 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#33 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#36 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#37 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#38 \/tmp\/infection\/interceptor.autoload.5b5ab583ad64d9600e2c1046ac8463a6.infection.php(13): require_once('...')\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#45 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#46 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#47 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItem",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Activate;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class ActivateHandler\n{\n    private const EVENT_ACTIVATED = 'event.automated-messages.activated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageQueryInterface $automatedMessageQuery, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Activate $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['is_active' => true]);\n        $this->scheduling->whenActivated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n        $this->messageBus->dispatch(new Message(self::EVENT_ACTIVATED, ['id' => $command->messageId()], ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Activate;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class ActivateHandler\n{\n    private const EVENT_ACTIVATED = 'event.automated-messages.activated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageQueryInterface $automatedMessageQuery, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Activate $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['is_active' => true]);\n        $this->scheduling->whenActivated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n        $this->messageBus->dispatch(new Message(self::EVENT_ACTIVATED, ['id' => $command->messageId()], ['!siteId' > $command->siteId()]), $command);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ActivateHandler.php",
        "originalStartLine": 39
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n         $automatedMessage->update(['is_active' => true]);\n         $this->scheduling->whenActivated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n-        $this->messageBus->dispatch(new Message(self::EVENT_ACTIVATED, ['id' => $command->messageId()], ['!siteId' => $command->siteId()]), $command);\n+        $this->messageBus->dispatch(new Message(self::EVENT_ACTIVATED, ['id' => $command->messageId()], ['!siteId' > $command->siteId()]), $command);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: insert into `migrations` (`migration`, `batch`) values (2022_07_09_224222_create_filters_table, 1))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(497): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3198): Illuminate\\Database\\Connection->insert()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(107): Illuminate\\Database\\Query\\Builder->insert()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(211): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->log()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#17 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#28 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#30 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#31 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#32 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#36 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#37 \/tmp\/infection\/interceptor.autoload.a50f61ccc73c2c6fe07bd983722c9f92.infection.php(13): require_once('...')\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#45 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#46 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItemRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Activate;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class ActivateHandler\n{\n    private const EVENT_ACTIVATED = 'event.automated-messages.activated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageQueryInterface $automatedMessageQuery, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Activate $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['is_active' => true]);\n        $this->scheduling->whenActivated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n        $this->messageBus->dispatch(new Message(self::EVENT_ACTIVATED, ['id' => $command->messageId()], ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Activate;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class ActivateHandler\n{\n    private const EVENT_ACTIVATED = 'event.automated-messages.activated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageQueryInterface $automatedMessageQuery, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Activate $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['is_active' => true]);\n        $this->scheduling->whenActivated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n        $this->messageBus->dispatch(new Message(self::EVENT_ACTIVATED, ['id' => $command->messageId()], []), $command);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ActivateHandler.php",
        "originalStartLine": 39
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n         $automatedMessage->update(['is_active' => true]);\n         $this->scheduling->whenActivated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n-        $this->messageBus->dispatch(new Message(self::EVENT_ACTIVATED, ['id' => $command->messageId()], ['!siteId' => $command->siteId()]), $command);\n+        $this->messageBus->dispatch(new Message(self::EVENT_ACTIVATED, ['id' => $command->messageId()], []), $command);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.schedules' doesn't exist (SQL: alter table `schedules` add primary key `schedules_id_primary`(`id`))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_07_213230_create_schedules_table.php(27): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateSchedulesTable->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.57a443f107323bc7de59c3bf06cf04a0.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItemRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Create;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\AutomatedMessage;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class CreateHandler\n{\n    private const EVENT_CAMPAIGN_CREATED = 'event.automated-messages.created';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageQueryInterface $automatedMessageQuery)\n    {\n    }\n    public function __invoke(Create $command) : void\n    {\n        $id = Str::uuid()->toString();\n        $automatedMessage = AutomatedMessage::create(['id' => $id, 'site_id' => $command->siteId(), 'name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        $automatedMessage->filters()->createMany($command->filters());\n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $id);\n        $this->messageBus->dispatch(new Message(self::EVENT_CAMPAIGN_CREATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Create;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\AutomatedMessage;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class CreateHandler\n{\n    private const EVENT_CAMPAIGN_CREATED = 'event.automated-messages.created';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageQueryInterface $automatedMessageQuery)\n    {\n    }\n    public function __invoke(Create $command) : void\n    {\n        $id = Str::uuid()->toString();\n        $automatedMessage = AutomatedMessage::create(['site_id' => $command->siteId(), 'name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        $automatedMessage->filters()->createMany($command->filters());\n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $id);\n        $this->messageBus->dispatch(new Message(self::EVENT_CAMPAIGN_CREATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/CreateHandler.php",
        "originalStartLine": 28
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     public function __invoke(Create $command) : void\n     {\n         $id = Str::uuid()->toString();\n-        $automatedMessage = AutomatedMessage::create(['id' => $id, 'site_id' => $command->siteId(), 'name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n+        $automatedMessage = AutomatedMessage::create(['site_id' => $command->siteId(), 'name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n         $automatedMessage->filters()->createMany($command->filters());\n         $automatedMessage->templateSettings()->createMany($command->templateSettings());\n         $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $id);",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S01]: Base table or view already exists: 1050 Table 'template_settings' already exists (SQL: create table `template_settings` (`site_id` int not null, `automated_message_id` char(36) not null, `language_code` varchar(255) not null, `subject` varchar(255) not null, `is_html` tinyint(1) not null, `content` text not null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8 collate 'utf8_unicode_ci')\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_09_220313_create_template_settings.php(25): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateTemplateSettings->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.f761446a6ff379ad4092ff3266843849.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItem",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Create;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\AutomatedMessage;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class CreateHandler\n{\n    private const EVENT_CAMPAIGN_CREATED = 'event.automated-messages.created';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageQueryInterface $automatedMessageQuery)\n    {\n    }\n    public function __invoke(Create $command) : void\n    {\n        $id = Str::uuid()->toString();\n        $automatedMessage = AutomatedMessage::create(['id' => $id, 'site_id' => $command->siteId(), 'name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        $automatedMessage->filters()->createMany($command->filters());\n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $id);\n        $this->messageBus->dispatch(new Message(self::EVENT_CAMPAIGN_CREATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Create;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\AutomatedMessage;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class CreateHandler\n{\n    private const EVENT_CAMPAIGN_CREATED = 'event.automated-messages.created';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageQueryInterface $automatedMessageQuery)\n    {\n    }\n    public function __invoke(Create $command) : void\n    {\n        $id = Str::uuid()->toString();\n        $automatedMessage = AutomatedMessage::create(['id' => $id, 'site_id' > $command->siteId(), 'name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        $automatedMessage->filters()->createMany($command->filters());\n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $id);\n        $this->messageBus->dispatch(new Message(self::EVENT_CAMPAIGN_CREATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/CreateHandler.php",
        "originalStartLine": 30
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     public function __invoke(Create $command) : void\n     {\n         $id = Str::uuid()->toString();\n-        $automatedMessage = AutomatedMessage::create(['id' => $id, 'site_id' => $command->siteId(), 'name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n+        $automatedMessage = AutomatedMessage::create(['id' => $id, 'site_id' > $command->siteId(), 'name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n         $automatedMessage->filters()->createMany($command->filters());\n         $automatedMessage->templateSettings()->createMany($command->templateSettings());\n         $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $id);",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1051 Unknown table 'automated_messages.automated_messages,automated_messages.migrations,automated_messages.schedules' (SQL: drop table `automated_messages`,`migrations`,`schedules`)\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/MySqlBuilder.php(87): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(82): Illuminate\\Database\\Schema\\MySqlBuilder->dropAllTables()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(59): Illuminate\\Database\\Console\\WipeCommand->dropAllTables()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\WipeCommand->handle()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#11 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(40): Illuminate\\Console\\Command->runCommand()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(45): Illuminate\\Console\\Command->callSilent()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Factory.php(56): Illuminate\\Console\\View\\Components\\Task->render()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(49): Illuminate\\Console\\View\\Components\\Factory->__call()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#29 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#33 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#34 \/tmp\/infection\/interceptor.autoload.44cca6cdd6d0efcdceabd254bf96aaee.infection.php(13): require_once('...')\n#35 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#36 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#37 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#42 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#43 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItem",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Create;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\AutomatedMessage;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class CreateHandler\n{\n    private const EVENT_CAMPAIGN_CREATED = 'event.automated-messages.created';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageQueryInterface $automatedMessageQuery)\n    {\n    }\n    public function __invoke(Create $command) : void\n    {\n        $id = Str::uuid()->toString();\n        $automatedMessage = AutomatedMessage::create(['id' => $id, 'site_id' => $command->siteId(), 'name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        $automatedMessage->filters()->createMany($command->filters());\n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $id);\n        $this->messageBus->dispatch(new Message(self::EVENT_CAMPAIGN_CREATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Create;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\AutomatedMessage;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class CreateHandler\n{\n    private const EVENT_CAMPAIGN_CREATED = 'event.automated-messages.created';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageQueryInterface $automatedMessageQuery)\n    {\n    }\n    public function __invoke(Create $command) : void\n    {\n        $id = Str::uuid()->toString();\n        $automatedMessage = AutomatedMessage::create(['id' => $id, 'site_id' => $command->siteId(), 'name' > $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        $automatedMessage->filters()->createMany($command->filters());\n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $id);\n        $this->messageBus->dispatch(new Message(self::EVENT_CAMPAIGN_CREATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/CreateHandler.php",
        "originalStartLine": 31
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     public function __invoke(Create $command) : void\n     {\n         $id = Str::uuid()->toString();\n-        $automatedMessage = AutomatedMessage::create(['id' => $id, 'site_id' => $command->siteId(), 'name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n+        $automatedMessage = AutomatedMessage::create(['id' => $id, 'site_id' => $command->siteId(), 'name' > $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n         $automatedMessage->filters()->createMany($command->filters());\n         $automatedMessage->templateSettings()->createMany($command->templateSettings());\n         $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $id);",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.schedules' doesn't exist (SQL: alter table `schedules` add primary key `schedules_id_primary`(`id`))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_07_213230_create_schedules_table.php(27): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateSchedulesTable->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.336bd0f018ad507f7c598e977ddc0192.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItem",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Create;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\AutomatedMessage;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class CreateHandler\n{\n    private const EVENT_CAMPAIGN_CREATED = 'event.automated-messages.created';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageQueryInterface $automatedMessageQuery)\n    {\n    }\n    public function __invoke(Create $command) : void\n    {\n        $id = Str::uuid()->toString();\n        $automatedMessage = AutomatedMessage::create(['id' => $id, 'site_id' => $command->siteId(), 'name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        $automatedMessage->filters()->createMany($command->filters());\n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $id);\n        $this->messageBus->dispatch(new Message(self::EVENT_CAMPAIGN_CREATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Create;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\AutomatedMessage;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class CreateHandler\n{\n    private const EVENT_CAMPAIGN_CREATED = 'event.automated-messages.created';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageQueryInterface $automatedMessageQuery)\n    {\n    }\n    public function __invoke(Create $command) : void\n    {\n        $id = Str::uuid()->toString();\n        $automatedMessage = AutomatedMessage::create(['id' => $id, 'site_id' => $command->siteId(), 'name' => $command->automatedMessageName(), 'reply_to' > $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        $automatedMessage->filters()->createMany($command->filters());\n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $id);\n        $this->messageBus->dispatch(new Message(self::EVENT_CAMPAIGN_CREATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/CreateHandler.php",
        "originalStartLine": 32
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     public function __invoke(Create $command) : void\n     {\n         $id = Str::uuid()->toString();\n-        $automatedMessage = AutomatedMessage::create(['id' => $id, 'site_id' => $command->siteId(), 'name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n+        $automatedMessage = AutomatedMessage::create(['id' => $id, 'site_id' => $command->siteId(), 'name' => $command->automatedMessageName(), 'reply_to' > $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n         $automatedMessage->filters()->createMany($command->filters());\n         $automatedMessage->templateSettings()->createMany($command->templateSettings());\n         $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $id);",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1051 Unknown table 'automated_messages.automated_messages,automated_messages.migrations,automated_messages.schedules' (SQL: drop table `automated_messages`,`migrations`,`schedules`)\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/MySqlBuilder.php(87): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(82): Illuminate\\Database\\Schema\\MySqlBuilder->dropAllTables()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(59): Illuminate\\Database\\Console\\WipeCommand->dropAllTables()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\WipeCommand->handle()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#11 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(40): Illuminate\\Console\\Command->runCommand()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(45): Illuminate\\Console\\Command->callSilent()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Factory.php(56): Illuminate\\Console\\View\\Components\\Task->render()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(49): Illuminate\\Console\\View\\Components\\Factory->__call()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#29 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#33 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#34 \/tmp\/infection\/interceptor.autoload.4b40f34acb243d4cc0d66bdb3e94eb88.infection.php(13): require_once('...')\n#35 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#36 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#37 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#42 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#43 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItem",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Create;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\AutomatedMessage;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class CreateHandler\n{\n    private const EVENT_CAMPAIGN_CREATED = 'event.automated-messages.created';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageQueryInterface $automatedMessageQuery)\n    {\n    }\n    public function __invoke(Create $command) : void\n    {\n        $id = Str::uuid()->toString();\n        $automatedMessage = AutomatedMessage::create(['id' => $id, 'site_id' => $command->siteId(), 'name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        $automatedMessage->filters()->createMany($command->filters());\n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $id);\n        $this->messageBus->dispatch(new Message(self::EVENT_CAMPAIGN_CREATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Create;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\AutomatedMessage;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class CreateHandler\n{\n    private const EVENT_CAMPAIGN_CREATED = 'event.automated-messages.created';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageQueryInterface $automatedMessageQuery)\n    {\n    }\n    public function __invoke(Create $command) : void\n    {\n        $id = Str::uuid()->toString();\n        $automatedMessage = AutomatedMessage::create(['id' => $id, 'site_id' => $command->siteId(), 'name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' > $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        $automatedMessage->filters()->createMany($command->filters());\n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $id);\n        $this->messageBus->dispatch(new Message(self::EVENT_CAMPAIGN_CREATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/CreateHandler.php",
        "originalStartLine": 33
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     public function __invoke(Create $command) : void\n     {\n         $id = Str::uuid()->toString();\n-        $automatedMessage = AutomatedMessage::create(['id' => $id, 'site_id' => $command->siteId(), 'name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n+        $automatedMessage = AutomatedMessage::create(['id' => $id, 'site_id' => $command->siteId(), 'name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' > $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n         $automatedMessage->filters()->createMany($command->filters());\n         $automatedMessage->templateSettings()->createMany($command->templateSettings());\n         $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $id);",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.filters' doesn't exist (SQL: alter table `filters` add constraint `filters_automated_message_id_foreign` foreign key (`automated_message_id`) references `automated_messages` (`id`))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_09_224222_create_filters_table.php(23): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateFiltersTable->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.9f7dec43b079f83171399147aa522160.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItem",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Create;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\AutomatedMessage;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class CreateHandler\n{\n    private const EVENT_CAMPAIGN_CREATED = 'event.automated-messages.created';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageQueryInterface $automatedMessageQuery)\n    {\n    }\n    public function __invoke(Create $command) : void\n    {\n        $id = Str::uuid()->toString();\n        $automatedMessage = AutomatedMessage::create(['id' => $id, 'site_id' => $command->siteId(), 'name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        $automatedMessage->filters()->createMany($command->filters());\n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $id);\n        $this->messageBus->dispatch(new Message(self::EVENT_CAMPAIGN_CREATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Create;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\AutomatedMessage;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class CreateHandler\n{\n    private const EVENT_CAMPAIGN_CREATED = 'event.automated-messages.created';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageQueryInterface $automatedMessageQuery)\n    {\n    }\n    public function __invoke(Create $command) : void\n    {\n        $id = Str::uuid()->toString();\n        $automatedMessage = AutomatedMessage::create(['id' => $id, 'site_id' => $command->siteId(), 'name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' > $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        $automatedMessage->filters()->createMany($command->filters());\n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $id);\n        $this->messageBus->dispatch(new Message(self::EVENT_CAMPAIGN_CREATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/CreateHandler.php",
        "originalStartLine": 34
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     public function __invoke(Create $command) : void\n     {\n         $id = Str::uuid()->toString();\n-        $automatedMessage = AutomatedMessage::create(['id' => $id, 'site_id' => $command->siteId(), 'name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n+        $automatedMessage = AutomatedMessage::create(['id' => $id, 'site_id' => $command->siteId(), 'name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' > $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n         $automatedMessage->filters()->createMany($command->filters());\n         $automatedMessage->templateSettings()->createMany($command->templateSettings());\n         $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $id);",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: insert into `migrations` (`migration`, `batch`) values (2022_07_09_220313_create_template_settings, 1))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(497): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3198): Illuminate\\Database\\Connection->insert()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(107): Illuminate\\Database\\Query\\Builder->insert()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(211): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->log()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#17 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#28 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#30 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#31 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#32 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#36 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#37 \/tmp\/infection\/interceptor.autoload.b63243e440636153d361bc1eba46a4d5.infection.php(13): require_once('...')\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#45 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#46 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItem",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Create;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\AutomatedMessage;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class CreateHandler\n{\n    private const EVENT_CAMPAIGN_CREATED = 'event.automated-messages.created';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageQueryInterface $automatedMessageQuery)\n    {\n    }\n    public function __invoke(Create $command) : void\n    {\n        $id = Str::uuid()->toString();\n        $automatedMessage = AutomatedMessage::create(['id' => $id, 'site_id' => $command->siteId(), 'name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        $automatedMessage->filters()->createMany($command->filters());\n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $id);\n        $this->messageBus->dispatch(new Message(self::EVENT_CAMPAIGN_CREATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Create;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\AutomatedMessage;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class CreateHandler\n{\n    private const EVENT_CAMPAIGN_CREATED = 'event.automated-messages.created';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageQueryInterface $automatedMessageQuery)\n    {\n    }\n    public function __invoke(Create $command) : void\n    {\n        $id = Str::uuid()->toString();\n        $automatedMessage = AutomatedMessage::create(['id' => $id, 'site_id' => $command->siteId(), 'name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' > $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        $automatedMessage->filters()->createMany($command->filters());\n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $id);\n        $this->messageBus->dispatch(new Message(self::EVENT_CAMPAIGN_CREATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/CreateHandler.php",
        "originalStartLine": 35
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     public function __invoke(Create $command) : void\n     {\n         $id = Str::uuid()->toString();\n-        $automatedMessage = AutomatedMessage::create(['id' => $id, 'site_id' => $command->siteId(), 'name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n+        $automatedMessage = AutomatedMessage::create(['id' => $id, 'site_id' => $command->siteId(), 'name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' > $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n         $automatedMessage->filters()->createMany($command->filters());\n         $automatedMessage->templateSettings()->createMany($command->templateSettings());\n         $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $id);",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1051 Unknown table 'automated_messages.automated_messages,automated_messages.migrations,automated_messages.schedules,...' (SQL: drop table `automated_messages`,`migrations`,`schedules`,`template_settings`)\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/MySqlBuilder.php(87): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(82): Illuminate\\Database\\Schema\\MySqlBuilder->dropAllTables()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(59): Illuminate\\Database\\Console\\WipeCommand->dropAllTables()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\WipeCommand->handle()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#11 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(40): Illuminate\\Console\\Command->runCommand()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(45): Illuminate\\Console\\Command->callSilent()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Factory.php(56): Illuminate\\Console\\View\\Components\\Task->render()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(49): Illuminate\\Console\\View\\Components\\Factory->__call()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#29 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#33 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#34 \/tmp\/infection\/interceptor.autoload.c6b53f7898ef59e40b9d1de8ea0cd0be.infection.php(13): require_once('...')\n#35 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#36 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#37 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#42 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#43 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItem",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Create;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\AutomatedMessage;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class CreateHandler\n{\n    private const EVENT_CAMPAIGN_CREATED = 'event.automated-messages.created';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageQueryInterface $automatedMessageQuery)\n    {\n    }\n    public function __invoke(Create $command) : void\n    {\n        $id = Str::uuid()->toString();\n        $automatedMessage = AutomatedMessage::create(['id' => $id, 'site_id' => $command->siteId(), 'name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        $automatedMessage->filters()->createMany($command->filters());\n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $id);\n        $this->messageBus->dispatch(new Message(self::EVENT_CAMPAIGN_CREATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Create;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\AutomatedMessage;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class CreateHandler\n{\n    private const EVENT_CAMPAIGN_CREATED = 'event.automated-messages.created';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageQueryInterface $automatedMessageQuery)\n    {\n    }\n    public function __invoke(Create $command) : void\n    {\n        $id = Str::uuid()->toString();\n        $automatedMessage = AutomatedMessage::create(['id' => $id, 'site_id' => $command->siteId(), 'name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' > $command->triggerAction()]);\n        $automatedMessage->filters()->createMany($command->filters());\n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $id);\n        $this->messageBus->dispatch(new Message(self::EVENT_CAMPAIGN_CREATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/CreateHandler.php",
        "originalStartLine": 36
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     public function __invoke(Create $command) : void\n     {\n         $id = Str::uuid()->toString();\n-        $automatedMessage = AutomatedMessage::create(['id' => $id, 'site_id' => $command->siteId(), 'name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n+        $automatedMessage = AutomatedMessage::create(['id' => $id, 'site_id' => $command->siteId(), 'name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' > $command->triggerAction()]);\n         $automatedMessage->filters()->createMany($command->filters());\n         $automatedMessage->templateSettings()->createMany($command->templateSettings());\n         $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $id);",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[HY000]: General error: 1005 Can't create table `automated_messages`.`template_settings` (errno: 150 \"Foreign key constraint is incorrectly formed\") (SQL: alter table `template_settings` add constraint `template_settings_automated_message_id_foreign` foreign key (`automated_message_id`) references `automated_messages` (`id`))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_09_220313_create_template_settings.php(25): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateTemplateSettings->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.414795324322e35c4706e2e2d801326e.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "MethodCallRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Create;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\AutomatedMessage;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class CreateHandler\n{\n    private const EVENT_CAMPAIGN_CREATED = 'event.automated-messages.created';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageQueryInterface $automatedMessageQuery)\n    {\n    }\n    public function __invoke(Create $command) : void\n    {\n        $id = Str::uuid()->toString();\n        $automatedMessage = AutomatedMessage::create(['id' => $id, 'site_id' => $command->siteId(), 'name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        $automatedMessage->filters()->createMany($command->filters());\n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $id);\n        $this->messageBus->dispatch(new Message(self::EVENT_CAMPAIGN_CREATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Create;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\AutomatedMessage;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class CreateHandler\n{\n    private const EVENT_CAMPAIGN_CREATED = 'event.automated-messages.created';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageQueryInterface $automatedMessageQuery)\n    {\n    }\n    public function __invoke(Create $command) : void\n    {\n        $id = Str::uuid()->toString();\n        $automatedMessage = AutomatedMessage::create(['id' => $id, 'site_id' => $command->siteId(), 'name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        \n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $id);\n        $this->messageBus->dispatch(new Message(self::EVENT_CAMPAIGN_CREATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/CreateHandler.php",
        "originalStartLine": 39
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     {\n         $id = Str::uuid()->toString();\n         $automatedMessage = AutomatedMessage::create(['id' => $id, 'site_id' => $command->siteId(), 'name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n-        $automatedMessage->filters()->createMany($command->filters());\n+        \n         $automatedMessage->templateSettings()->createMany($command->templateSettings());\n         $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $id);\n         $this->messageBus->dispatch(new Message(self::EVENT_CAMPAIGN_CREATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: insert into `migrations` (`migration`, `batch`) values (2022_07_07_213230_create_schedules_table, 1))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(497): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3198): Illuminate\\Database\\Connection->insert()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(107): Illuminate\\Database\\Query\\Builder->insert()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(211): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->log()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#17 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#28 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#30 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#31 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#32 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#36 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#37 \/tmp\/infection\/interceptor.autoload.d267efa25a324655e4b2d95f6e95afeb.infection.php(13): require_once('...')\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#45 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#46 {main}"
    },
    {
      "mutator": {
        "mutatorName": "MethodCallRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Create;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\AutomatedMessage;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class CreateHandler\n{\n    private const EVENT_CAMPAIGN_CREATED = 'event.automated-messages.created';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageQueryInterface $automatedMessageQuery)\n    {\n    }\n    public function __invoke(Create $command) : void\n    {\n        $id = Str::uuid()->toString();\n        $automatedMessage = AutomatedMessage::create(['id' => $id, 'site_id' => $command->siteId(), 'name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        $automatedMessage->filters()->createMany($command->filters());\n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $id);\n        $this->messageBus->dispatch(new Message(self::EVENT_CAMPAIGN_CREATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Create;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\AutomatedMessage;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class CreateHandler\n{\n    private const EVENT_CAMPAIGN_CREATED = 'event.automated-messages.created';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageQueryInterface $automatedMessageQuery)\n    {\n    }\n    public function __invoke(Create $command) : void\n    {\n        $id = Str::uuid()->toString();\n        $automatedMessage = AutomatedMessage::create(['id' => $id, 'site_id' => $command->siteId(), 'name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        $automatedMessage->filters()->createMany($command->filters());\n        \n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $id);\n        $this->messageBus->dispatch(new Message(self::EVENT_CAMPAIGN_CREATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/CreateHandler.php",
        "originalStartLine": 40
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         $id = Str::uuid()->toString();\n         $automatedMessage = AutomatedMessage::create(['id' => $id, 'site_id' => $command->siteId(), 'name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n         $automatedMessage->filters()->createMany($command->filters());\n-        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n+        \n         $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $id);\n         $this->messageBus->dispatch(new Message(self::EVENT_CAMPAIGN_CREATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1051 Unknown table 'automated_messages.automated_messages,automated_messages.migrations,automated_messages.schedules,...' (SQL: drop table `automated_messages`,`migrations`,`schedules`,`template_settings`)\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/MySqlBuilder.php(87): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(82): Illuminate\\Database\\Schema\\MySqlBuilder->dropAllTables()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(59): Illuminate\\Database\\Console\\WipeCommand->dropAllTables()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\WipeCommand->handle()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#11 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(40): Illuminate\\Console\\Command->runCommand()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(45): Illuminate\\Console\\Command->callSilent()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Factory.php(56): Illuminate\\Console\\View\\Components\\Task->render()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(49): Illuminate\\Console\\View\\Components\\Factory->__call()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#29 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#33 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#34 \/tmp\/infection\/interceptor.autoload.b72e16a40bfcd3083127ca15370ee49a.infection.php(13): require_once('...')\n#35 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#36 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#37 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#42 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#43 {main}"
    },
    {
      "mutator": {
        "mutatorName": "MethodCallRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Create;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\AutomatedMessage;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class CreateHandler\n{\n    private const EVENT_CAMPAIGN_CREATED = 'event.automated-messages.created';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageQueryInterface $automatedMessageQuery)\n    {\n    }\n    public function __invoke(Create $command) : void\n    {\n        $id = Str::uuid()->toString();\n        $automatedMessage = AutomatedMessage::create(['id' => $id, 'site_id' => $command->siteId(), 'name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        $automatedMessage->filters()->createMany($command->filters());\n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $id);\n        $this->messageBus->dispatch(new Message(self::EVENT_CAMPAIGN_CREATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Create;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\AutomatedMessage;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class CreateHandler\n{\n    private const EVENT_CAMPAIGN_CREATED = 'event.automated-messages.created';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageQueryInterface $automatedMessageQuery)\n    {\n    }\n    public function __invoke(Create $command) : void\n    {\n        $id = Str::uuid()->toString();\n        $automatedMessage = AutomatedMessage::create(['id' => $id, 'site_id' => $command->siteId(), 'name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        $automatedMessage->filters()->createMany($command->filters());\n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $id);\n        \n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/CreateHandler.php",
        "originalStartLine": 44
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         $automatedMessage->filters()->createMany($command->filters());\n         $automatedMessage->templateSettings()->createMany($command->templateSettings());\n         $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $id);\n-        $this->messageBus->dispatch(new Message(self::EVENT_CAMPAIGN_CREATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n+        \n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S01]: Base table or view already exists: 1050 Table 'schedules' already exists (SQL: create table `schedules` (`id` char(36) not null, `site_id` int not null, `automated_message_id` char(36) not null, `reference` varchar(255) not null, `reference_id` varchar(255) not null, `status` varchar(255) not null, `send_at` datetime not null, `sent_at` datetime null, `deleted_at` timestamp null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8 collate 'utf8_unicode_ci')\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_07_213230_create_schedules_table.php(27): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateSchedulesTable->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.6823e36aaf01bb2ded005d0d621b14a8.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItem",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Create;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\AutomatedMessage;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class CreateHandler\n{\n    private const EVENT_CAMPAIGN_CREATED = 'event.automated-messages.created';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageQueryInterface $automatedMessageQuery)\n    {\n    }\n    public function __invoke(Create $command) : void\n    {\n        $id = Str::uuid()->toString();\n        $automatedMessage = AutomatedMessage::create(['id' => $id, 'site_id' => $command->siteId(), 'name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        $automatedMessage->filters()->createMany($command->filters());\n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $id);\n        $this->messageBus->dispatch(new Message(self::EVENT_CAMPAIGN_CREATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Create;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\AutomatedMessage;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class CreateHandler\n{\n    private const EVENT_CAMPAIGN_CREATED = 'event.automated-messages.created';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageQueryInterface $automatedMessageQuery)\n    {\n    }\n    public function __invoke(Create $command) : void\n    {\n        $id = Str::uuid()->toString();\n        $automatedMessage = AutomatedMessage::create(['id' => $id, 'site_id' => $command->siteId(), 'name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        $automatedMessage->filters()->createMany($command->filters());\n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $id);\n        $this->messageBus->dispatch(new Message(self::EVENT_CAMPAIGN_CREATED, $automatedMessage->toArray(), ['!siteId' > $command->siteId()]), $command);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/CreateHandler.php",
        "originalStartLine": 47
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         $automatedMessage->filters()->createMany($command->filters());\n         $automatedMessage->templateSettings()->createMany($command->templateSettings());\n         $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $id);\n-        $this->messageBus->dispatch(new Message(self::EVENT_CAMPAIGN_CREATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n+        $this->messageBus->dispatch(new Message(self::EVENT_CAMPAIGN_CREATED, $automatedMessage->toArray(), ['!siteId' > $command->siteId()]), $command);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: insert into `migrations` (`migration`, `batch`) values (2022_07_07_213230_create_schedules_table, 1))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(497): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3198): Illuminate\\Database\\Connection->insert()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(107): Illuminate\\Database\\Query\\Builder->insert()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(211): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->log()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#17 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#28 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#30 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#31 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#32 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#36 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#37 \/tmp\/infection\/interceptor.autoload.438966fcd02600f79f34d5e087308d75.infection.php(13): require_once('...')\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#45 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#46 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItemRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Create;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\AutomatedMessage;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class CreateHandler\n{\n    private const EVENT_CAMPAIGN_CREATED = 'event.automated-messages.created';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageQueryInterface $automatedMessageQuery)\n    {\n    }\n    public function __invoke(Create $command) : void\n    {\n        $id = Str::uuid()->toString();\n        $automatedMessage = AutomatedMessage::create(['id' => $id, 'site_id' => $command->siteId(), 'name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        $automatedMessage->filters()->createMany($command->filters());\n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $id);\n        $this->messageBus->dispatch(new Message(self::EVENT_CAMPAIGN_CREATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Create;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\AutomatedMessage;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class CreateHandler\n{\n    private const EVENT_CAMPAIGN_CREATED = 'event.automated-messages.created';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageQueryInterface $automatedMessageQuery)\n    {\n    }\n    public function __invoke(Create $command) : void\n    {\n        $id = Str::uuid()->toString();\n        $automatedMessage = AutomatedMessage::create(['id' => $id, 'site_id' => $command->siteId(), 'name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        $automatedMessage->filters()->createMany($command->filters());\n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $id);\n        $this->messageBus->dispatch(new Message(self::EVENT_CAMPAIGN_CREATED, $automatedMessage->toArray(), []), $command);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/CreateHandler.php",
        "originalStartLine": 47
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         $automatedMessage->filters()->createMany($command->filters());\n         $automatedMessage->templateSettings()->createMany($command->templateSettings());\n         $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $id);\n-        $this->messageBus->dispatch(new Message(self::EVENT_CAMPAIGN_CREATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n+        $this->messageBus->dispatch(new Message(self::EVENT_CAMPAIGN_CREATED, $automatedMessage->toArray(), []), $command);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: insert into `migrations` (`migration`, `batch`) values (2022_07_09_220313_create_template_settings, 1))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(497): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3198): Illuminate\\Database\\Connection->insert()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(107): Illuminate\\Database\\Query\\Builder->insert()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(211): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->log()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#17 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#28 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#30 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#31 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#32 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#36 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#37 \/tmp\/infection\/interceptor.autoload.7cb87b0a5c0524e41ba9a4474f208edf.infection.php(13): require_once('...')\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#45 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#46 {main}"
    },
    {
      "mutator": {
        "mutatorName": "FalseValue",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Deactivate;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class DeactivateHandler\n{\n    private const EVENT_DEACTIVATED = 'event.automated-messages.deactivated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Deactivate $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['is_active' => false]);\n        $this->scheduling->whenDeactivated($command->siteId(), $command->messageId());\n        $this->messageBus->dispatch(new Message(self::EVENT_DEACTIVATED, ['id' => $command->messageId()], ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Deactivate;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class DeactivateHandler\n{\n    private const EVENT_DEACTIVATED = 'event.automated-messages.deactivated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Deactivate $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['is_active' => true]);\n        $this->scheduling->whenDeactivated($command->siteId(), $command->messageId());\n        $this->messageBus->dispatch(new Message(self::EVENT_DEACTIVATED, ['id' => $command->messageId()], ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/DeactivateHandler.php",
        "originalStartLine": 27
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     public function __invoke(Deactivate $command) : void\n     {\n         $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n-        $automatedMessage->update(['is_active' => false]);\n+        $automatedMessage->update(['is_active' => true]);\n         $this->scheduling->whenDeactivated($command->siteId(), $command->messageId());\n         $this->messageBus->dispatch(new Message(self::EVENT_DEACTIVATED, ['id' => $command->messageId()], ['!siteId' => $command->siteId()]), $command);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.template_settings' doesn't exist (SQL: alter table `template_settings` add constraint `template_settings_automated_message_id_foreign` foreign key (`automated_message_id`) references `automated_messages` (`id`))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_09_220313_create_template_settings.php(25): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateTemplateSettings->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.e68fc34b793a7bc8c19033507cb264f5.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItemRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Deactivate;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class DeactivateHandler\n{\n    private const EVENT_DEACTIVATED = 'event.automated-messages.deactivated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Deactivate $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['is_active' => false]);\n        $this->scheduling->whenDeactivated($command->siteId(), $command->messageId());\n        $this->messageBus->dispatch(new Message(self::EVENT_DEACTIVATED, ['id' => $command->messageId()], ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Deactivate;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class DeactivateHandler\n{\n    private const EVENT_DEACTIVATED = 'event.automated-messages.deactivated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Deactivate $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update([]);\n        $this->scheduling->whenDeactivated($command->siteId(), $command->messageId());\n        $this->messageBus->dispatch(new Message(self::EVENT_DEACTIVATED, ['id' => $command->messageId()], ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/DeactivateHandler.php",
        "originalStartLine": 27
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     public function __invoke(Deactivate $command) : void\n     {\n         $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n-        $automatedMessage->update(['is_active' => false]);\n+        $automatedMessage->update([]);\n         $this->scheduling->whenDeactivated($command->siteId(), $command->messageId());\n         $this->messageBus->dispatch(new Message(self::EVENT_DEACTIVATED, ['id' => $command->messageId()], ['!siteId' => $command->siteId()]), $command);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: insert into `migrations` (`migration`, `batch`) values (2022_07_07_213230_create_schedules_table, 1))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(497): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3198): Illuminate\\Database\\Connection->insert()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(107): Illuminate\\Database\\Query\\Builder->insert()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(211): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->log()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#17 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#28 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#30 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#31 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#32 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#36 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#37 \/tmp\/infection\/interceptor.autoload.d961abd8b80872c70f551980502b58f2.infection.php(13): require_once('...')\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#45 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#46 {main}"
    },
    {
      "mutator": {
        "mutatorName": "MethodCallRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Deactivate;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class DeactivateHandler\n{\n    private const EVENT_DEACTIVATED = 'event.automated-messages.deactivated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Deactivate $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['is_active' => false]);\n        $this->scheduling->whenDeactivated($command->siteId(), $command->messageId());\n        $this->messageBus->dispatch(new Message(self::EVENT_DEACTIVATED, ['id' => $command->messageId()], ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Deactivate;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class DeactivateHandler\n{\n    private const EVENT_DEACTIVATED = 'event.automated-messages.deactivated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Deactivate $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        \n        $this->scheduling->whenDeactivated($command->siteId(), $command->messageId());\n        $this->messageBus->dispatch(new Message(self::EVENT_DEACTIVATED, ['id' => $command->messageId()], ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/DeactivateHandler.php",
        "originalStartLine": 27
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     public function __invoke(Deactivate $command) : void\n     {\n         $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n-        $automatedMessage->update(['is_active' => false]);\n+        \n         $this->scheduling->whenDeactivated($command->siteId(), $command->messageId());\n         $this->messageBus->dispatch(new Message(self::EVENT_DEACTIVATED, ['id' => $command->messageId()], ['!siteId' => $command->siteId()]), $command);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.schedules' doesn't exist (SQL: alter table `schedules` add primary key `schedules_id_primary`(`id`))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_07_213230_create_schedules_table.php(27): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateSchedulesTable->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.ac36a29f1d0dc7fab21391c9cea1a1cf.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "MethodCallRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Deactivate;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class DeactivateHandler\n{\n    private const EVENT_DEACTIVATED = 'event.automated-messages.deactivated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Deactivate $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['is_active' => false]);\n        $this->scheduling->whenDeactivated($command->siteId(), $command->messageId());\n        $this->messageBus->dispatch(new Message(self::EVENT_DEACTIVATED, ['id' => $command->messageId()], ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Deactivate;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class DeactivateHandler\n{\n    private const EVENT_DEACTIVATED = 'event.automated-messages.deactivated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Deactivate $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['is_active' => false]);\n        \n        $this->messageBus->dispatch(new Message(self::EVENT_DEACTIVATED, ['id' => $command->messageId()], ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/DeactivateHandler.php",
        "originalStartLine": 29
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     {\n         $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n         $automatedMessage->update(['is_active' => false]);\n-        $this->scheduling->whenDeactivated($command->siteId(), $command->messageId());\n+        \n         $this->messageBus->dispatch(new Message(self::EVENT_DEACTIVATED, ['id' => $command->messageId()], ['!siteId' => $command->siteId()]), $command);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: insert into `migrations` (`migration`, `batch`) values (2022_07_07_205040_create_automated_messages_table, 1))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(497): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3198): Illuminate\\Database\\Connection->insert()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(107): Illuminate\\Database\\Query\\Builder->insert()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(211): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->log()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#17 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#28 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#30 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#31 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#32 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#36 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#37 \/tmp\/infection\/interceptor.autoload.ce6f0f8b6772e1e75819d5d2c4aaca47.infection.php(13): require_once('...')\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#45 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#46 {main}"
    },
    {
      "mutator": {
        "mutatorName": "MethodCallRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Deactivate;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class DeactivateHandler\n{\n    private const EVENT_DEACTIVATED = 'event.automated-messages.deactivated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Deactivate $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['is_active' => false]);\n        $this->scheduling->whenDeactivated($command->siteId(), $command->messageId());\n        $this->messageBus->dispatch(new Message(self::EVENT_DEACTIVATED, ['id' => $command->messageId()], ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Deactivate;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class DeactivateHandler\n{\n    private const EVENT_DEACTIVATED = 'event.automated-messages.deactivated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Deactivate $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['is_active' => false]);\n        $this->scheduling->whenDeactivated($command->siteId(), $command->messageId());\n        \n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/DeactivateHandler.php",
        "originalStartLine": 31
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n         $automatedMessage->update(['is_active' => false]);\n         $this->scheduling->whenDeactivated($command->siteId(), $command->messageId());\n-        $this->messageBus->dispatch(new Message(self::EVENT_DEACTIVATED, ['id' => $command->messageId()], ['!siteId' => $command->siteId()]), $command);\n+        \n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: insert into `migrations` (`migration`, `batch`) values (2022_07_09_220313_create_template_settings, 1))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(497): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3198): Illuminate\\Database\\Connection->insert()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(107): Illuminate\\Database\\Query\\Builder->insert()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(211): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->log()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#17 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#28 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#30 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#31 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#32 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#36 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#37 \/tmp\/infection\/interceptor.autoload.e572a0bf8be17376dde4739dbf37f541.infection.php(13): require_once('...')\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#45 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#46 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItem",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Deactivate;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class DeactivateHandler\n{\n    private const EVENT_DEACTIVATED = 'event.automated-messages.deactivated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Deactivate $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['is_active' => false]);\n        $this->scheduling->whenDeactivated($command->siteId(), $command->messageId());\n        $this->messageBus->dispatch(new Message(self::EVENT_DEACTIVATED, ['id' => $command->messageId()], ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Deactivate;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class DeactivateHandler\n{\n    private const EVENT_DEACTIVATED = 'event.automated-messages.deactivated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Deactivate $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['is_active' => false]);\n        $this->scheduling->whenDeactivated($command->siteId(), $command->messageId());\n        $this->messageBus->dispatch(new Message(self::EVENT_DEACTIVATED, ['id' > $command->messageId()], ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/DeactivateHandler.php",
        "originalStartLine": 33
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n         $automatedMessage->update(['is_active' => false]);\n         $this->scheduling->whenDeactivated($command->siteId(), $command->messageId());\n-        $this->messageBus->dispatch(new Message(self::EVENT_DEACTIVATED, ['id' => $command->messageId()], ['!siteId' => $command->siteId()]), $command);\n+        $this->messageBus->dispatch(new Message(self::EVENT_DEACTIVATED, ['id' > $command->messageId()], ['!siteId' => $command->siteId()]), $command);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: insert into `migrations` (`migration`, `batch`) values (2022_07_07_213230_create_schedules_table, 1))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(497): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3198): Illuminate\\Database\\Connection->insert()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(107): Illuminate\\Database\\Query\\Builder->insert()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(211): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->log()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#17 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#28 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#30 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#31 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#32 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#36 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#37 \/tmp\/infection\/interceptor.autoload.4654f8da32f787d653128dcef9f4a445.infection.php(13): require_once('...')\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#45 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#46 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItemRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Deactivate;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class DeactivateHandler\n{\n    private const EVENT_DEACTIVATED = 'event.automated-messages.deactivated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Deactivate $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['is_active' => false]);\n        $this->scheduling->whenDeactivated($command->siteId(), $command->messageId());\n        $this->messageBus->dispatch(new Message(self::EVENT_DEACTIVATED, ['id' => $command->messageId()], ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Deactivate;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class DeactivateHandler\n{\n    private const EVENT_DEACTIVATED = 'event.automated-messages.deactivated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Deactivate $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['is_active' => false]);\n        $this->scheduling->whenDeactivated($command->siteId(), $command->messageId());\n        $this->messageBus->dispatch(new Message(self::EVENT_DEACTIVATED, [], ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/DeactivateHandler.php",
        "originalStartLine": 33
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n         $automatedMessage->update(['is_active' => false]);\n         $this->scheduling->whenDeactivated($command->siteId(), $command->messageId());\n-        $this->messageBus->dispatch(new Message(self::EVENT_DEACTIVATED, ['id' => $command->messageId()], ['!siteId' => $command->siteId()]), $command);\n+        $this->messageBus->dispatch(new Message(self::EVENT_DEACTIVATED, [], ['!siteId' => $command->siteId()]), $command);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.schedules' doesn't exist (SQL: alter table `schedules` add constraint `schedules_automated_message_id_foreign` foreign key (`automated_message_id`) references `automated_messages` (`id`))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_07_213230_create_schedules_table.php(27): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateSchedulesTable->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.9df9de1d8364e37971e8bd42238efed5.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItem",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Deactivate;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class DeactivateHandler\n{\n    private const EVENT_DEACTIVATED = 'event.automated-messages.deactivated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Deactivate $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['is_active' => false]);\n        $this->scheduling->whenDeactivated($command->siteId(), $command->messageId());\n        $this->messageBus->dispatch(new Message(self::EVENT_DEACTIVATED, ['id' => $command->messageId()], ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Deactivate;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class DeactivateHandler\n{\n    private const EVENT_DEACTIVATED = 'event.automated-messages.deactivated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Deactivate $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['is_active' => false]);\n        $this->scheduling->whenDeactivated($command->siteId(), $command->messageId());\n        $this->messageBus->dispatch(new Message(self::EVENT_DEACTIVATED, ['id' => $command->messageId()], ['!siteId' > $command->siteId()]), $command);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/DeactivateHandler.php",
        "originalStartLine": 34
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n         $automatedMessage->update(['is_active' => false]);\n         $this->scheduling->whenDeactivated($command->siteId(), $command->messageId());\n-        $this->messageBus->dispatch(new Message(self::EVENT_DEACTIVATED, ['id' => $command->messageId()], ['!siteId' => $command->siteId()]), $command);\n+        $this->messageBus->dispatch(new Message(self::EVENT_DEACTIVATED, ['id' => $command->messageId()], ['!siteId' > $command->siteId()]), $command);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: insert into `migrations` (`migration`, `batch`) values (2022_07_09_220313_create_template_settings, 1))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(497): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3198): Illuminate\\Database\\Connection->insert()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(107): Illuminate\\Database\\Query\\Builder->insert()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(211): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->log()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#17 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#28 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#30 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#31 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#32 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#36 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#37 \/tmp\/infection\/interceptor.autoload.82ba1f96953b22677248b794f0735cd6.infection.php(13): require_once('...')\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#45 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#46 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItemRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Deactivate;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class DeactivateHandler\n{\n    private const EVENT_DEACTIVATED = 'event.automated-messages.deactivated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Deactivate $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['is_active' => false]);\n        $this->scheduling->whenDeactivated($command->siteId(), $command->messageId());\n        $this->messageBus->dispatch(new Message(self::EVENT_DEACTIVATED, ['id' => $command->messageId()], ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Deactivate;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class DeactivateHandler\n{\n    private const EVENT_DEACTIVATED = 'event.automated-messages.deactivated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Deactivate $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['is_active' => false]);\n        $this->scheduling->whenDeactivated($command->siteId(), $command->messageId());\n        $this->messageBus->dispatch(new Message(self::EVENT_DEACTIVATED, ['id' => $command->messageId()], []), $command);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/DeactivateHandler.php",
        "originalStartLine": 34
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n         $automatedMessage->update(['is_active' => false]);\n         $this->scheduling->whenDeactivated($command->siteId(), $command->messageId());\n-        $this->messageBus->dispatch(new Message(self::EVENT_DEACTIVATED, ['id' => $command->messageId()], ['!siteId' => $command->siteId()]), $command);\n+        $this->messageBus->dispatch(new Message(self::EVENT_DEACTIVATED, ['id' => $command->messageId()], []), $command);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[HY000]: General error: 1005 Can't create table `automated_messages`.`automated_messages` (errno: 150 \"Foreign key constraint is incorrectly formed\") (SQL: create table `automated_messages` (`id` char(36) not null, `site_id` int not null, `name` varchar(255) not null, `reply_to` varchar(255) not null, `trigger_time_unit` varchar(255) not null, `trigger_value` int not null, `trigger_time_aspect` varchar(255) not null, `trigger_action` varchar(255) not null, `last_message_sent_at` datetime null, `is_active` tinyint(1) not null default '0', `deleted_at` timestamp null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8 collate 'utf8_unicode_ci')\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_07_205040_create_automated_messages_table.php(27): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateAutomatedMessagesTable->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.72c86037e5d0da8516efa068aa1eb611.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "MethodCallRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Delete;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class DeleteHandler\n{\n    private const EVENT_DELETED = 'event.automated-messages.deleted';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Delete $command) : void\n    {\n        $this->scheduling->whenDeleted($command->siteId(), $command->messageId());\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->delete();\n        $this->messageBus->dispatch(new Message(self::EVENT_DELETED, [], ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Delete;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class DeleteHandler\n{\n    private const EVENT_DELETED = 'event.automated-messages.deleted';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Delete $command) : void\n    {\n        \n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->delete();\n        $this->messageBus->dispatch(new Message(self::EVENT_DELETED, [], ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/DeleteHandler.php",
        "originalStartLine": 26
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     }\n     public function __invoke(Delete $command) : void\n     {\n-        $this->scheduling->whenDeleted($command->siteId(), $command->messageId());\n+        \n         $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n         $automatedMessage->delete();\n         $this->messageBus->dispatch(new Message(self::EVENT_DELETED, [], ['!siteId' => $command->siteId()]), $command);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S01]: Base table or view already exists: 1050 Table 'migrations' already exists (SQL: create table `migrations` (`id` int unsigned not null auto_increment primary key, `migration` varchar(255) not null, `batch` int not null) default character set utf8 collate 'utf8_unicode_ci')\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(157): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/InstallCommand.php(54): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->createRepository()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\InstallCommand->handle()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#13 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(40): Illuminate\\Console\\Command->runCommand()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(120): Illuminate\\Console\\Command->callSilent()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Factory.php(56): Illuminate\\Console\\View\\Components\\Task->render()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(122): Illuminate\\Console\\View\\Components\\Factory->__call()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(79): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->prepareDatabase()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#30 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#36 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#38 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#39 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#40 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#41 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#43 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#44 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#45 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#46 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#47 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#48 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#49 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#50 \/tmp\/infection\/interceptor.autoload.25c6c5758356724f4f0d8012c9208395.infection.php(13): require_once('...')\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#53 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#54 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#55 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#56 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#57 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#58 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#59 {main}"
    },
    {
      "mutator": {
        "mutatorName": "MethodCallRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Delete;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class DeleteHandler\n{\n    private const EVENT_DELETED = 'event.automated-messages.deleted';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Delete $command) : void\n    {\n        $this->scheduling->whenDeleted($command->siteId(), $command->messageId());\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->delete();\n        $this->messageBus->dispatch(new Message(self::EVENT_DELETED, [], ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Delete;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class DeleteHandler\n{\n    private const EVENT_DELETED = 'event.automated-messages.deleted';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Delete $command) : void\n    {\n        $this->scheduling->whenDeleted($command->siteId(), $command->messageId());\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        \n        $this->messageBus->dispatch(new Message(self::EVENT_DELETED, [], ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/DeleteHandler.php",
        "originalStartLine": 29
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     {\n         $this->scheduling->whenDeleted($command->siteId(), $command->messageId());\n         $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n-        $automatedMessage->delete();\n+        \n         $this->messageBus->dispatch(new Message(self::EVENT_DELETED, [], ['!siteId' => $command->siteId()]), $command);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S01]: Base table or view already exists: 1050 Table 'migrations' already exists (SQL: create table `migrations` (`id` int unsigned not null auto_increment primary key, `migration` varchar(255) not null, `batch` int not null) default character set utf8 collate 'utf8_unicode_ci')\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(157): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/InstallCommand.php(54): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->createRepository()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\InstallCommand->handle()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#13 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(40): Illuminate\\Console\\Command->runCommand()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(120): Illuminate\\Console\\Command->callSilent()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Factory.php(56): Illuminate\\Console\\View\\Components\\Task->render()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(122): Illuminate\\Console\\View\\Components\\Factory->__call()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(79): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->prepareDatabase()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#30 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#36 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#38 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#39 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#40 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#41 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#43 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#44 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#45 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#46 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#47 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#48 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#49 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#50 \/tmp\/infection\/interceptor.autoload.6333066f5b872bc6fb5d092e38f9c9cf.infection.php(13): require_once('...')\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#53 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#54 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#55 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#56 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#57 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#58 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#59 {main}"
    },
    {
      "mutator": {
        "mutatorName": "MethodCallRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Delete;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class DeleteHandler\n{\n    private const EVENT_DELETED = 'event.automated-messages.deleted';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Delete $command) : void\n    {\n        $this->scheduling->whenDeleted($command->siteId(), $command->messageId());\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->delete();\n        $this->messageBus->dispatch(new Message(self::EVENT_DELETED, [], ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Delete;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class DeleteHandler\n{\n    private const EVENT_DELETED = 'event.automated-messages.deleted';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Delete $command) : void\n    {\n        $this->scheduling->whenDeleted($command->siteId(), $command->messageId());\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->delete();\n        \n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/DeleteHandler.php",
        "originalStartLine": 31
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         $this->scheduling->whenDeleted($command->siteId(), $command->messageId());\n         $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n         $automatedMessage->delete();\n-        $this->messageBus->dispatch(new Message(self::EVENT_DELETED, [], ['!siteId' => $command->siteId()]), $command);\n+        \n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: insert into `migrations` (`migration`, `batch`) values (2022_07_09_220313_create_template_settings, 1))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(497): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3198): Illuminate\\Database\\Connection->insert()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(107): Illuminate\\Database\\Query\\Builder->insert()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(211): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->log()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#17 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#28 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#30 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#31 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#32 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#36 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#37 \/tmp\/infection\/interceptor.autoload.1a7296286d70a3e782fa54a44f12416c.infection.php(13): require_once('...')\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#45 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#46 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItem",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Delete;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class DeleteHandler\n{\n    private const EVENT_DELETED = 'event.automated-messages.deleted';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Delete $command) : void\n    {\n        $this->scheduling->whenDeleted($command->siteId(), $command->messageId());\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->delete();\n        $this->messageBus->dispatch(new Message(self::EVENT_DELETED, [], ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Delete;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class DeleteHandler\n{\n    private const EVENT_DELETED = 'event.automated-messages.deleted';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Delete $command) : void\n    {\n        $this->scheduling->whenDeleted($command->siteId(), $command->messageId());\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->delete();\n        $this->messageBus->dispatch(new Message(self::EVENT_DELETED, [], ['!siteId' > $command->siteId()]), $command);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/DeleteHandler.php",
        "originalStartLine": 34
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         $this->scheduling->whenDeleted($command->siteId(), $command->messageId());\n         $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n         $automatedMessage->delete();\n-        $this->messageBus->dispatch(new Message(self::EVENT_DELETED, [], ['!siteId' => $command->siteId()]), $command);\n+        $this->messageBus->dispatch(new Message(self::EVENT_DELETED, [], ['!siteId' > $command->siteId()]), $command);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: insert into `migrations` (`migration`, `batch`) values (2022_07_09_220313_create_template_settings, 1))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(497): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3198): Illuminate\\Database\\Connection->insert()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(107): Illuminate\\Database\\Query\\Builder->insert()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(211): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->log()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#17 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#28 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#30 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#31 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#32 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#36 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#37 \/tmp\/infection\/interceptor.autoload.0f903bafd33dcac6b77235b2942922d3.infection.php(13): require_once('...')\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#45 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#46 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItemRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Delete;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class DeleteHandler\n{\n    private const EVENT_DELETED = 'event.automated-messages.deleted';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Delete $command) : void\n    {\n        $this->scheduling->whenDeleted($command->siteId(), $command->messageId());\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->delete();\n        $this->messageBus->dispatch(new Message(self::EVENT_DELETED, [], ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Delete;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class DeleteHandler\n{\n    private const EVENT_DELETED = 'event.automated-messages.deleted';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Delete $command) : void\n    {\n        $this->scheduling->whenDeleted($command->siteId(), $command->messageId());\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->delete();\n        $this->messageBus->dispatch(new Message(self::EVENT_DELETED, [], []), $command);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/DeleteHandler.php",
        "originalStartLine": 34
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         $this->scheduling->whenDeleted($command->siteId(), $command->messageId());\n         $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n         $automatedMessage->delete();\n-        $this->messageBus->dispatch(new Message(self::EVENT_DELETED, [], ['!siteId' => $command->siteId()]), $command);\n+        $this->messageBus->dispatch(new Message(self::EVENT_DELETED, [], []), $command);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.filters' doesn't exist (SQL: alter table `filters` add constraint `filters_automated_message_id_foreign` foreign key (`automated_message_id`) references `automated_messages` (`id`))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_09_224222_create_filters_table.php(23): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateFiltersTable->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.f20b769ae092e5e8d519ea01549962f6.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "MethodCallRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Query\\Get;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class GetHandler\n{\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageQueryInterface $automatedMessageQuery)\n    {\n    }\n    public function __invoke(Get $query) : void\n    {\n        $automatedMessage = $this->automatedMessageQuery->find($query->siteId(), $query->messageId());\n        $payload = $automatedMessage->toArray();\n        $this->messageBus->dispatch(Message::queryResponse($payload), $query);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Query\\Get;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class GetHandler\n{\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageQueryInterface $automatedMessageQuery)\n    {\n    }\n    public function __invoke(Get $query) : void\n    {\n        $automatedMessage = $this->automatedMessageQuery->find($query->siteId(), $query->messageId());\n        $payload = $automatedMessage->toArray();\n        \n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/GetHandler.php",
        "originalStartLine": 26
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     {\n         $automatedMessage = $this->automatedMessageQuery->find($query->siteId(), $query->messageId());\n         $payload = $automatedMessage->toArray();\n-        $this->messageBus->dispatch(Message::queryResponse($payload), $query);\n+        \n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S01]: Base table or view already exists: 1050 Table 'automated_messages' already exists (SQL: create table `automated_messages` (`id` char(36) not null, `site_id` int not null, `name` varchar(255) not null, `reply_to` varchar(255) not null, `trigger_time_unit` varchar(255) not null, `trigger_value` int not null, `trigger_time_aspect` varchar(255) not null, `trigger_action` varchar(255) not null, `last_message_sent_at` datetime null, `is_active` tinyint(1) not null default '0', `deleted_at` timestamp null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8 collate 'utf8_unicode_ci')\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_07_205040_create_automated_messages_table.php(27): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateAutomatedMessagesTable->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.e7738010df6bd87d2c49e4922de15819.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "UnwrapArrayMap",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Query\\ListMessages;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Dto\\AutomatedMessage;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class ListMessagesHandler\n{\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageQueryInterface $automatedMessageQuery)\n    {\n    }\n    public function __invoke(ListMessages $query) : void\n    {\n        $messages = $this->automatedMessageQuery->findAll($query->siteId());\n        $payload = array_map(static fn(AutomatedMessage $message): array => $message->toArray(), $messages);\n        $this->messageBus->dispatch(Message::queryResponse($payload), $query);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Query\\ListMessages;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Dto\\AutomatedMessage;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class ListMessagesHandler\n{\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageQueryInterface $automatedMessageQuery)\n    {\n    }\n    public function __invoke(ListMessages $query) : void\n    {\n        $messages = $this->automatedMessageQuery->findAll($query->siteId());\n        $payload = $messages;\n        $this->messageBus->dispatch(Message::queryResponse($payload), $query);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ListMessagesHandler.php",
        "originalStartLine": 25
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     public function __invoke(ListMessages $query) : void\n     {\n         $messages = $this->automatedMessageQuery->findAll($query->siteId());\n-        $payload = array_map(static fn(AutomatedMessage $message): array => $message->toArray(), $messages);\n+        $payload = $messages;\n         $this->messageBus->dispatch(Message::queryResponse($payload), $query);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.template_settings' doesn't exist (SQL: alter table `template_settings` add primary key `template_settings_automated_message_id_language_code_primary`(`automated_message_id`, `language_code`))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_09_220313_create_template_settings.php(25): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateTemplateSettings->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.022bd40f8bd64b024488e386212a3501.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "MethodCallRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Query\\ListMessages;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Dto\\AutomatedMessage;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class ListMessagesHandler\n{\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageQueryInterface $automatedMessageQuery)\n    {\n    }\n    public function __invoke(ListMessages $query) : void\n    {\n        $messages = $this->automatedMessageQuery->findAll($query->siteId());\n        $payload = array_map(static fn(AutomatedMessage $message): array => $message->toArray(), $messages);\n        $this->messageBus->dispatch(Message::queryResponse($payload), $query);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Query\\ListMessages;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Dto\\AutomatedMessage;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class ListMessagesHandler\n{\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageQueryInterface $automatedMessageQuery)\n    {\n    }\n    public function __invoke(ListMessages $query) : void\n    {\n        $messages = $this->automatedMessageQuery->findAll($query->siteId());\n        $payload = array_map(static fn(AutomatedMessage $message): array => $message->toArray(), $messages);\n        \n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ListMessagesHandler.php",
        "originalStartLine": 27
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     {\n         $messages = $this->automatedMessageQuery->findAll($query->siteId());\n         $payload = array_map(static fn(AutomatedMessage $message): array => $message->toArray(), $messages);\n-        $this->messageBus->dispatch(Message::queryResponse($payload), $query);\n+        \n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: insert into `migrations` (`migration`, `batch`) values (2022_07_07_213230_create_schedules_table, 1))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(497): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3198): Illuminate\\Database\\Connection->insert()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(107): Illuminate\\Database\\Query\\Builder->insert()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(211): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->log()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#17 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#28 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#30 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#31 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#32 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#36 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#37 \/tmp\/infection\/interceptor.autoload.725bac2397ca371ce3672326da70ccdd.infection.php(13): require_once('...')\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#45 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#46 {main}"
    },
    {
      "mutator": {
        "mutatorName": "CastInt",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse RuntimeException;\nfinal class ReservationCancelledHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-cancelled';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository)\n    {\n    }\n    public function __invoke(Message $event) : void\n    {\n        $reservation = $this->reservationRepository->find((int) $event->meta()['!siteId'], $event->payload()['reservationId']['system'], $event->payload()['reservationId']['systemId']);\n        if (!$reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot cancel a reservation that is not found');\n        }\n        $reservation->update(['status' => ReservationStatus::CANCELLED->value, 'cancellation_date' => new DateTimeImmutable()]);\n        $this->scheduling->whenReservationCancelled((int) $event->meta()['!siteId'], $reservation);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse RuntimeException;\nfinal class ReservationCancelledHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-cancelled';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository)\n    {\n    }\n    public function __invoke(Message $event) : void\n    {\n        $reservation = $this->reservationRepository->find($event->meta()['!siteId'], $event->payload()['reservationId']['system'], $event->payload()['reservationId']['systemId']);\n        if (!$reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot cancel a reservation that is not found');\n        }\n        $reservation->update(['status' => ReservationStatus::CANCELLED->value, 'cancellation_date' => new DateTimeImmutable()]);\n        $this->scheduling->whenReservationCancelled((int) $event->meta()['!siteId'], $reservation);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ReservationCancelledHandler.php",
        "originalStartLine": 28
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     }\n     public function __invoke(Message $event) : void\n     {\n-        $reservation = $this->reservationRepository->find((int) $event->meta()['!siteId'], $event->payload()['reservationId']['system'], $event->payload()['reservationId']['systemId']);\n+        $reservation = $this->reservationRepository->find($event->meta()['!siteId'], $event->payload()['reservationId']['system'], $event->payload()['reservationId']['systemId']);\n         if (!$reservation instanceof Reservation) {\n             throw new RuntimeException('Cannot cancel a reservation that is not found');\n         }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S01]: Base table or view already exists: 1050 Table 'migrations' already exists (SQL: create table `migrations` (`id` int unsigned not null auto_increment primary key, `migration` varchar(255) not null, `batch` int not null) default character set utf8 collate 'utf8_unicode_ci')\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(157): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/InstallCommand.php(54): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->createRepository()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\InstallCommand->handle()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#13 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(40): Illuminate\\Console\\Command->runCommand()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(120): Illuminate\\Console\\Command->callSilent()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Factory.php(56): Illuminate\\Console\\View\\Components\\Task->render()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(122): Illuminate\\Console\\View\\Components\\Factory->__call()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(79): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->prepareDatabase()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#30 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#36 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#38 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#39 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#40 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#41 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#43 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#44 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#45 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#46 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#47 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#48 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#49 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#50 \/tmp\/infection\/interceptor.autoload.48a33c83b3876eafa067304206a4bb2f.infection.php(13): require_once('...')\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#53 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#54 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#55 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#56 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#57 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#58 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#59 {main}"
    },
    {
      "mutator": {
        "mutatorName": "InstanceOf_",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse RuntimeException;\nfinal class ReservationCancelledHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-cancelled';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository)\n    {\n    }\n    public function __invoke(Message $event) : void\n    {\n        $reservation = $this->reservationRepository->find((int) $event->meta()['!siteId'], $event->payload()['reservationId']['system'], $event->payload()['reservationId']['systemId']);\n        if (!$reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot cancel a reservation that is not found');\n        }\n        $reservation->update(['status' => ReservationStatus::CANCELLED->value, 'cancellation_date' => new DateTimeImmutable()]);\n        $this->scheduling->whenReservationCancelled((int) $event->meta()['!siteId'], $reservation);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse RuntimeException;\nfinal class ReservationCancelledHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-cancelled';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository)\n    {\n    }\n    public function __invoke(Message $event) : void\n    {\n        $reservation = $this->reservationRepository->find((int) $event->meta()['!siteId'], $event->payload()['reservationId']['system'], $event->payload()['reservationId']['systemId']);\n        if (!true) {\n            throw new RuntimeException('Cannot cancel a reservation that is not found');\n        }\n        $reservation->update(['status' => ReservationStatus::CANCELLED->value, 'cancellation_date' => new DateTimeImmutable()]);\n        $this->scheduling->whenReservationCancelled((int) $event->meta()['!siteId'], $reservation);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ReservationCancelledHandler.php",
        "originalStartLine": 33
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     public function __invoke(Message $event) : void\n     {\n         $reservation = $this->reservationRepository->find((int) $event->meta()['!siteId'], $event->payload()['reservationId']['system'], $event->payload()['reservationId']['systemId']);\n-        if (!$reservation instanceof Reservation) {\n+        if (!true) {\n             throw new RuntimeException('Cannot cancel a reservation that is not found');\n         }\n         $reservation->update(['status' => ReservationStatus::CANCELLED->value, 'cancellation_date' => new DateTimeImmutable()]);",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.reservations' doesn't exist (SQL: alter table `reservations` add primary key `reservations_id_primary`(`id`))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_09_224222_create_reservations_table.php(32): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateReservationsTable->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.d3a6154faa28e5acdd575c9d4fd2bfcf.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "LogicalNot",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse RuntimeException;\nfinal class ReservationCancelledHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-cancelled';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository)\n    {\n    }\n    public function __invoke(Message $event) : void\n    {\n        $reservation = $this->reservationRepository->find((int) $event->meta()['!siteId'], $event->payload()['reservationId']['system'], $event->payload()['reservationId']['systemId']);\n        if (!$reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot cancel a reservation that is not found');\n        }\n        $reservation->update(['status' => ReservationStatus::CANCELLED->value, 'cancellation_date' => new DateTimeImmutable()]);\n        $this->scheduling->whenReservationCancelled((int) $event->meta()['!siteId'], $reservation);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse RuntimeException;\nfinal class ReservationCancelledHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-cancelled';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository)\n    {\n    }\n    public function __invoke(Message $event) : void\n    {\n        $reservation = $this->reservationRepository->find((int) $event->meta()['!siteId'], $event->payload()['reservationId']['system'], $event->payload()['reservationId']['systemId']);\n        if ($reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot cancel a reservation that is not found');\n        }\n        $reservation->update(['status' => ReservationStatus::CANCELLED->value, 'cancellation_date' => new DateTimeImmutable()]);\n        $this->scheduling->whenReservationCancelled((int) $event->meta()['!siteId'], $reservation);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ReservationCancelledHandler.php",
        "originalStartLine": 33
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     public function __invoke(Message $event) : void\n     {\n         $reservation = $this->reservationRepository->find((int) $event->meta()['!siteId'], $event->payload()['reservationId']['system'], $event->payload()['reservationId']['systemId']);\n-        if (!$reservation instanceof Reservation) {\n+        if ($reservation instanceof Reservation) {\n             throw new RuntimeException('Cannot cancel a reservation that is not found');\n         }\n         $reservation->update(['status' => ReservationStatus::CANCELLED->value, 'cancellation_date' => new DateTimeImmutable()]);",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1051 Unknown table 'automated_messages.schedules,automated_messages.template_settings' (SQL: drop table `schedules`,`template_settings`)\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/MySqlBuilder.php(87): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(82): Illuminate\\Database\\Schema\\MySqlBuilder->dropAllTables()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(59): Illuminate\\Database\\Console\\WipeCommand->dropAllTables()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\WipeCommand->handle()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#11 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(40): Illuminate\\Console\\Command->runCommand()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(45): Illuminate\\Console\\Command->callSilent()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Factory.php(56): Illuminate\\Console\\View\\Components\\Task->render()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(49): Illuminate\\Console\\View\\Components\\Factory->__call()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#29 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#33 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#34 \/tmp\/infection\/interceptor.autoload.85ad636f1117ba19e712565e149c38e6.infection.php(13): require_once('...')\n#35 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#36 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#37 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#42 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#43 {main}"
    },
    {
      "mutator": {
        "mutatorName": "InstanceOf_",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse RuntimeException;\nfinal class ReservationCancelledHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-cancelled';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository)\n    {\n    }\n    public function __invoke(Message $event) : void\n    {\n        $reservation = $this->reservationRepository->find((int) $event->meta()['!siteId'], $event->payload()['reservationId']['system'], $event->payload()['reservationId']['systemId']);\n        if (!$reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot cancel a reservation that is not found');\n        }\n        $reservation->update(['status' => ReservationStatus::CANCELLED->value, 'cancellation_date' => new DateTimeImmutable()]);\n        $this->scheduling->whenReservationCancelled((int) $event->meta()['!siteId'], $reservation);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse RuntimeException;\nfinal class ReservationCancelledHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-cancelled';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository)\n    {\n    }\n    public function __invoke(Message $event) : void\n    {\n        $reservation = $this->reservationRepository->find((int) $event->meta()['!siteId'], $event->payload()['reservationId']['system'], $event->payload()['reservationId']['systemId']);\n        if (!false) {\n            throw new RuntimeException('Cannot cancel a reservation that is not found');\n        }\n        $reservation->update(['status' => ReservationStatus::CANCELLED->value, 'cancellation_date' => new DateTimeImmutable()]);\n        $this->scheduling->whenReservationCancelled((int) $event->meta()['!siteId'], $reservation);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ReservationCancelledHandler.php",
        "originalStartLine": 33
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     public function __invoke(Message $event) : void\n     {\n         $reservation = $this->reservationRepository->find((int) $event->meta()['!siteId'], $event->payload()['reservationId']['system'], $event->payload()['reservationId']['systemId']);\n-        if (!$reservation instanceof Reservation) {\n+        if (!false) {\n             throw new RuntimeException('Cannot cancel a reservation that is not found');\n         }\n         $reservation->update(['status' => ReservationStatus::CANCELLED->value, 'cancellation_date' => new DateTimeImmutable()]);",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.template_settings' doesn't exist (SQL: alter table `template_settings` add primary key `template_settings_automated_message_id_language_code_primary`(`automated_message_id`, `language_code`))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_09_220313_create_template_settings.php(25): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateTemplateSettings->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.7675adac019b1087a9e3a534de8dde2f.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "MethodCallRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse RuntimeException;\nfinal class ReservationCancelledHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-cancelled';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository)\n    {\n    }\n    public function __invoke(Message $event) : void\n    {\n        $reservation = $this->reservationRepository->find((int) $event->meta()['!siteId'], $event->payload()['reservationId']['system'], $event->payload()['reservationId']['systemId']);\n        if (!$reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot cancel a reservation that is not found');\n        }\n        $reservation->update(['status' => ReservationStatus::CANCELLED->value, 'cancellation_date' => new DateTimeImmutable()]);\n        $this->scheduling->whenReservationCancelled((int) $event->meta()['!siteId'], $reservation);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse RuntimeException;\nfinal class ReservationCancelledHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-cancelled';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository)\n    {\n    }\n    public function __invoke(Message $event) : void\n    {\n        $reservation = $this->reservationRepository->find((int) $event->meta()['!siteId'], $event->payload()['reservationId']['system'], $event->payload()['reservationId']['systemId']);\n        if (!$reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot cancel a reservation that is not found');\n        }\n        \n        $this->scheduling->whenReservationCancelled((int) $event->meta()['!siteId'], $reservation);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ReservationCancelledHandler.php",
        "originalStartLine": 37
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         if (!$reservation instanceof Reservation) {\n             throw new RuntimeException('Cannot cancel a reservation that is not found');\n         }\n-        $reservation->update(['status' => ReservationStatus::CANCELLED->value, 'cancellation_date' => new DateTimeImmutable()]);\n+        \n         $this->scheduling->whenReservationCancelled((int) $event->meta()['!siteId'], $reservation);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1051 Unknown table 'automated_messages.schedules,automated_messages.template_settings' (SQL: drop table `reservations`,`schedules`,`template_settings`)\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/MySqlBuilder.php(87): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(82): Illuminate\\Database\\Schema\\MySqlBuilder->dropAllTables()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(59): Illuminate\\Database\\Console\\WipeCommand->dropAllTables()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\WipeCommand->handle()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#11 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(40): Illuminate\\Console\\Command->runCommand()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(45): Illuminate\\Console\\Command->callSilent()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Factory.php(56): Illuminate\\Console\\View\\Components\\Task->render()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(49): Illuminate\\Console\\View\\Components\\Factory->__call()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#29 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#33 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#34 \/tmp\/infection\/interceptor.autoload.37959e9e256aa49726365d8be46f3041.infection.php(13): require_once('...')\n#35 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#36 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#37 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#42 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#43 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItemRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse RuntimeException;\nfinal class ReservationCancelledHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-cancelled';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository)\n    {\n    }\n    public function __invoke(Message $event) : void\n    {\n        $reservation = $this->reservationRepository->find((int) $event->meta()['!siteId'], $event->payload()['reservationId']['system'], $event->payload()['reservationId']['systemId']);\n        if (!$reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot cancel a reservation that is not found');\n        }\n        $reservation->update(['status' => ReservationStatus::CANCELLED->value, 'cancellation_date' => new DateTimeImmutable()]);\n        $this->scheduling->whenReservationCancelled((int) $event->meta()['!siteId'], $reservation);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse RuntimeException;\nfinal class ReservationCancelledHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-cancelled';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository)\n    {\n    }\n    public function __invoke(Message $event) : void\n    {\n        $reservation = $this->reservationRepository->find((int) $event->meta()['!siteId'], $event->payload()['reservationId']['system'], $event->payload()['reservationId']['systemId']);\n        if (!$reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot cancel a reservation that is not found');\n        }\n        $reservation->update(['cancellation_date' => new DateTimeImmutable()]);\n        $this->scheduling->whenReservationCancelled((int) $event->meta()['!siteId'], $reservation);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ReservationCancelledHandler.php",
        "originalStartLine": 38
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         if (!$reservation instanceof Reservation) {\n             throw new RuntimeException('Cannot cancel a reservation that is not found');\n         }\n-        $reservation->update(['status' => ReservationStatus::CANCELLED->value, 'cancellation_date' => new DateTimeImmutable()]);\n+        $reservation->update(['cancellation_date' => new DateTimeImmutable()]);\n         $this->scheduling->whenReservationCancelled((int) $event->meta()['!siteId'], $reservation);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.schedules' doesn't exist (SQL: alter table `schedules` add constraint `schedules_automated_message_id_foreign` foreign key (`automated_message_id`) references `automated_messages` (`id`))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_07_213230_create_schedules_table.php(27): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateSchedulesTable->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.19d698ab534c178097615f9b5095d5ee.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItem",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse RuntimeException;\nfinal class ReservationCancelledHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-cancelled';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository)\n    {\n    }\n    public function __invoke(Message $event) : void\n    {\n        $reservation = $this->reservationRepository->find((int) $event->meta()['!siteId'], $event->payload()['reservationId']['system'], $event->payload()['reservationId']['systemId']);\n        if (!$reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot cancel a reservation that is not found');\n        }\n        $reservation->update(['status' => ReservationStatus::CANCELLED->value, 'cancellation_date' => new DateTimeImmutable()]);\n        $this->scheduling->whenReservationCancelled((int) $event->meta()['!siteId'], $reservation);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse RuntimeException;\nfinal class ReservationCancelledHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-cancelled';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository)\n    {\n    }\n    public function __invoke(Message $event) : void\n    {\n        $reservation = $this->reservationRepository->find((int) $event->meta()['!siteId'], $event->payload()['reservationId']['system'], $event->payload()['reservationId']['systemId']);\n        if (!$reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot cancel a reservation that is not found');\n        }\n        $reservation->update(['status' > ReservationStatus::CANCELLED->value, 'cancellation_date' => new DateTimeImmutable()]);\n        $this->scheduling->whenReservationCancelled((int) $event->meta()['!siteId'], $reservation);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ReservationCancelledHandler.php",
        "originalStartLine": 39
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         if (!$reservation instanceof Reservation) {\n             throw new RuntimeException('Cannot cancel a reservation that is not found');\n         }\n-        $reservation->update(['status' => ReservationStatus::CANCELLED->value, 'cancellation_date' => new DateTimeImmutable()]);\n+        $reservation->update(['status' > ReservationStatus::CANCELLED->value, 'cancellation_date' => new DateTimeImmutable()]);\n         $this->scheduling->whenReservationCancelled((int) $event->meta()['!siteId'], $reservation);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.reservations' doesn't exist (SQL: alter table `reservations` add primary key `reservations_id_primary`(`id`))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_09_224222_create_reservations_table.php(32): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateReservationsTable->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.ae8ad151eb71b25787ffb570ed5ddebb.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "MethodCallRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse RuntimeException;\nfinal class ReservationCancelledHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-cancelled';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository)\n    {\n    }\n    public function __invoke(Message $event) : void\n    {\n        $reservation = $this->reservationRepository->find((int) $event->meta()['!siteId'], $event->payload()['reservationId']['system'], $event->payload()['reservationId']['systemId']);\n        if (!$reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot cancel a reservation that is not found');\n        }\n        $reservation->update(['status' => ReservationStatus::CANCELLED->value, 'cancellation_date' => new DateTimeImmutable()]);\n        $this->scheduling->whenReservationCancelled((int) $event->meta()['!siteId'], $reservation);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse RuntimeException;\nfinal class ReservationCancelledHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-cancelled';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository)\n    {\n    }\n    public function __invoke(Message $event) : void\n    {\n        $reservation = $this->reservationRepository->find((int) $event->meta()['!siteId'], $event->payload()['reservationId']['system'], $event->payload()['reservationId']['systemId']);\n        if (!$reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot cancel a reservation that is not found');\n        }\n        $reservation->update(['status' => ReservationStatus::CANCELLED->value, 'cancellation_date' => new DateTimeImmutable()]);\n        \n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ReservationCancelledHandler.php",
        "originalStartLine": 44
      },
      "diff": "--- Original\n+++ New\n@@ @@\n             throw new RuntimeException('Cannot cancel a reservation that is not found');\n         }\n         $reservation->update(['status' => ReservationStatus::CANCELLED->value, 'cancellation_date' => new DateTimeImmutable()]);\n-        $this->scheduling->whenReservationCancelled((int) $event->meta()['!siteId'], $reservation);\n+        \n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1051 Unknown table 'automated_messages.migrations,automated_messages.reservations,automated_messages.schedules,automa...' (SQL: drop table `migrations`,`reservations`,`schedules`,`template_settings`)\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/MySqlBuilder.php(87): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(82): Illuminate\\Database\\Schema\\MySqlBuilder->dropAllTables()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(59): Illuminate\\Database\\Console\\WipeCommand->dropAllTables()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\WipeCommand->handle()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#11 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(40): Illuminate\\Console\\Command->runCommand()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(45): Illuminate\\Console\\Command->callSilent()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Factory.php(56): Illuminate\\Console\\View\\Components\\Task->render()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(49): Illuminate\\Console\\View\\Components\\Factory->__call()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#29 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#33 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#34 \/tmp\/infection\/interceptor.autoload.37bbbdb5b61ae4c02dd7341bd3a296c3.infection.php(13): require_once('...')\n#35 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#36 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#37 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#42 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#43 {main}"
    },
    {
      "mutator": {
        "mutatorName": "InstanceOf_",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationChanged;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\TimeZoneConverter;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse RuntimeException;\nfinal class ReservationChangedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-changed';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository, private readonly SitesQueryInterface $sitesQuery)\n    {\n    }\n    public function __invoke(ReservationChanged $event) : void\n    {\n        $reservation = $this->reservationRepository->find($event->siteId(), $event->system(), $event->systemId());\n        if (!$reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot change a reservation that is not found');\n        }\n        $site = $this->sitesQuery->get($event->siteId());\n        $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n        $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n        $reservation->update(['reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n        $this->scheduling->whenReservationChanged($event->siteId(), $reservation);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationChanged;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\TimeZoneConverter;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse RuntimeException;\nfinal class ReservationChangedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-changed';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository, private readonly SitesQueryInterface $sitesQuery)\n    {\n    }\n    public function __invoke(ReservationChanged $event) : void\n    {\n        $reservation = $this->reservationRepository->find($event->siteId(), $event->system(), $event->systemId());\n        if (!true) {\n            throw new RuntimeException('Cannot change a reservation that is not found');\n        }\n        $site = $this->sitesQuery->get($event->siteId());\n        $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n        $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n        $reservation->update(['reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n        $this->scheduling->whenReservationChanged($event->siteId(), $reservation);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ReservationChangedHandler.php",
        "originalStartLine": 34
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     public function __invoke(ReservationChanged $event) : void\n     {\n         $reservation = $this->reservationRepository->find($event->siteId(), $event->system(), $event->systemId());\n-        if (!$reservation instanceof Reservation) {\n+        if (!true) {\n             throw new RuntimeException('Cannot change a reservation that is not found');\n         }\n         $site = $this->sitesQuery->get($event->siteId());",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.schedules' doesn't exist (SQL: alter table `schedules` add primary key `schedules_id_primary`(`id`))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_07_213230_create_schedules_table.php(27): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateSchedulesTable->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.ad69cf8a6de1246b23f2b2894cbc7064.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "LogicalNot",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationChanged;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\TimeZoneConverter;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse RuntimeException;\nfinal class ReservationChangedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-changed';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository, private readonly SitesQueryInterface $sitesQuery)\n    {\n    }\n    public function __invoke(ReservationChanged $event) : void\n    {\n        $reservation = $this->reservationRepository->find($event->siteId(), $event->system(), $event->systemId());\n        if (!$reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot change a reservation that is not found');\n        }\n        $site = $this->sitesQuery->get($event->siteId());\n        $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n        $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n        $reservation->update(['reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n        $this->scheduling->whenReservationChanged($event->siteId(), $reservation);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationChanged;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\TimeZoneConverter;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse RuntimeException;\nfinal class ReservationChangedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-changed';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository, private readonly SitesQueryInterface $sitesQuery)\n    {\n    }\n    public function __invoke(ReservationChanged $event) : void\n    {\n        $reservation = $this->reservationRepository->find($event->siteId(), $event->system(), $event->systemId());\n        if ($reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot change a reservation that is not found');\n        }\n        $site = $this->sitesQuery->get($event->siteId());\n        $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n        $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n        $reservation->update(['reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n        $this->scheduling->whenReservationChanged($event->siteId(), $reservation);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ReservationChangedHandler.php",
        "originalStartLine": 34
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     public function __invoke(ReservationChanged $event) : void\n     {\n         $reservation = $this->reservationRepository->find($event->siteId(), $event->system(), $event->systemId());\n-        if (!$reservation instanceof Reservation) {\n+        if ($reservation instanceof Reservation) {\n             throw new RuntimeException('Cannot change a reservation that is not found');\n         }\n         $site = $this->sitesQuery->get($event->siteId());",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1051 Unknown table 'automated_messages.automated_messages,automated_messages.filters,automated_messages.migrations,au...' (SQL: drop table `automated_messages`,`filters`,`migrations`,`schedules`,`template_settings`)\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/MySqlBuilder.php(87): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(82): Illuminate\\Database\\Schema\\MySqlBuilder->dropAllTables()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(59): Illuminate\\Database\\Console\\WipeCommand->dropAllTables()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\WipeCommand->handle()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#11 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(40): Illuminate\\Console\\Command->runCommand()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(45): Illuminate\\Console\\Command->callSilent()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Factory.php(56): Illuminate\\Console\\View\\Components\\Task->render()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(49): Illuminate\\Console\\View\\Components\\Factory->__call()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#29 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#33 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#34 \/tmp\/infection\/interceptor.autoload.8aa75ba3d3a1ed1a9569d57b3f559c11.infection.php(13): require_once('...')\n#35 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#36 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#37 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#42 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#43 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItemRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationChanged;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\TimeZoneConverter;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse RuntimeException;\nfinal class ReservationChangedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-changed';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository, private readonly SitesQueryInterface $sitesQuery)\n    {\n    }\n    public function __invoke(ReservationChanged $event) : void\n    {\n        $reservation = $this->reservationRepository->find($event->siteId(), $event->system(), $event->systemId());\n        if (!$reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot change a reservation that is not found');\n        }\n        $site = $this->sitesQuery->get($event->siteId());\n        $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n        $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n        $reservation->update(['reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n        $this->scheduling->whenReservationChanged($event->siteId(), $reservation);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationChanged;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\TimeZoneConverter;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse RuntimeException;\nfinal class ReservationChangedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-changed';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository, private readonly SitesQueryInterface $sitesQuery)\n    {\n    }\n    public function __invoke(ReservationChanged $event) : void\n    {\n        $reservation = $this->reservationRepository->find($event->siteId(), $event->system(), $event->systemId());\n        if (!$reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot change a reservation that is not found');\n        }\n        $site = $this->sitesQuery->get($event->siteId());\n        $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n        $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n        $reservation->update(['channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n        $this->scheduling->whenReservationChanged($event->siteId(), $reservation);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ReservationChangedHandler.php",
        "originalStartLine": 43
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         $site = $this->sitesQuery->get($event->siteId());\n         $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n         $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n-        $reservation->update(['reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n+        $reservation->update(['channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n         $this->scheduling->whenReservationChanged($event->siteId(), $reservation);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: insert into `migrations` (`migration`, `batch`) values (2022_07_07_205040_create_automated_messages_table, 1))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(497): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3198): Illuminate\\Database\\Connection->insert()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(107): Illuminate\\Database\\Query\\Builder->insert()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(211): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->log()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#17 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#28 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#30 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#31 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#32 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#36 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#37 \/tmp\/infection\/interceptor.autoload.9c51cd42d2c0f36627a5fbdbe8b68dc2.infection.php(13): require_once('...')\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#45 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#46 {main}"
    },
    {
      "mutator": {
        "mutatorName": "MethodCallRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationChanged;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\TimeZoneConverter;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse RuntimeException;\nfinal class ReservationChangedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-changed';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository, private readonly SitesQueryInterface $sitesQuery)\n    {\n    }\n    public function __invoke(ReservationChanged $event) : void\n    {\n        $reservation = $this->reservationRepository->find($event->siteId(), $event->system(), $event->systemId());\n        if (!$reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot change a reservation that is not found');\n        }\n        $site = $this->sitesQuery->get($event->siteId());\n        $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n        $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n        $reservation->update(['reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n        $this->scheduling->whenReservationChanged($event->siteId(), $reservation);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationChanged;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\TimeZoneConverter;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse RuntimeException;\nfinal class ReservationChangedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-changed';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository, private readonly SitesQueryInterface $sitesQuery)\n    {\n    }\n    public function __invoke(ReservationChanged $event) : void\n    {\n        $reservation = $this->reservationRepository->find($event->siteId(), $event->system(), $event->systemId());\n        if (!$reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot change a reservation that is not found');\n        }\n        $site = $this->sitesQuery->get($event->siteId());\n        $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n        $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n        \n        $this->scheduling->whenReservationChanged($event->siteId(), $reservation);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ReservationChangedHandler.php",
        "originalStartLine": 43
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         $site = $this->sitesQuery->get($event->siteId());\n         $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n         $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n-        $reservation->update(['reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n+        \n         $this->scheduling->whenReservationChanged($event->siteId(), $reservation);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.reservations' doesn't exist (SQL: alter table `reservations` add primary key `reservations_id_primary`(`id`))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_09_224222_create_reservations_table.php(32): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateReservationsTable->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.58d1b3b4e57de938771c4913f5054aea.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItem",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationChanged;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\TimeZoneConverter;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse RuntimeException;\nfinal class ReservationChangedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-changed';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository, private readonly SitesQueryInterface $sitesQuery)\n    {\n    }\n    public function __invoke(ReservationChanged $event) : void\n    {\n        $reservation = $this->reservationRepository->find($event->siteId(), $event->system(), $event->systemId());\n        if (!$reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot change a reservation that is not found');\n        }\n        $site = $this->sitesQuery->get($event->siteId());\n        $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n        $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n        $reservation->update(['reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n        $this->scheduling->whenReservationChanged($event->siteId(), $reservation);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationChanged;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\TimeZoneConverter;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse RuntimeException;\nfinal class ReservationChangedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-changed';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository, private readonly SitesQueryInterface $sitesQuery)\n    {\n    }\n    public function __invoke(ReservationChanged $event) : void\n    {\n        $reservation = $this->reservationRepository->find($event->siteId(), $event->system(), $event->systemId());\n        if (!$reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot change a reservation that is not found');\n        }\n        $site = $this->sitesQuery->get($event->siteId());\n        $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n        $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n        $reservation->update(['reference' > $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n        $this->scheduling->whenReservationChanged($event->siteId(), $reservation);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ReservationChangedHandler.php",
        "originalStartLine": 44
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         $site = $this->sitesQuery->get($event->siteId());\n         $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n         $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n-        $reservation->update(['reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n+        $reservation->update(['reference' > $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n         $this->scheduling->whenReservationChanged($event->siteId(), $reservation);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: insert into `migrations` (`migration`, `batch`) values (2022_07_07_213230_create_schedules_table, 1))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(497): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3198): Illuminate\\Database\\Connection->insert()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(107): Illuminate\\Database\\Query\\Builder->insert()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(211): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->log()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#17 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#28 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#30 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#31 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#32 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#36 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#37 \/tmp\/infection\/interceptor.autoload.939f6285ae9ddeafb2a8e9c32ecc4fe5.infection.php(13): require_once('...')\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#45 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#46 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItem",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationChanged;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\TimeZoneConverter;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse RuntimeException;\nfinal class ReservationChangedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-changed';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository, private readonly SitesQueryInterface $sitesQuery)\n    {\n    }\n    public function __invoke(ReservationChanged $event) : void\n    {\n        $reservation = $this->reservationRepository->find($event->siteId(), $event->system(), $event->systemId());\n        if (!$reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot change a reservation that is not found');\n        }\n        $site = $this->sitesQuery->get($event->siteId());\n        $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n        $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n        $reservation->update(['reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n        $this->scheduling->whenReservationChanged($event->siteId(), $reservation);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationChanged;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\TimeZoneConverter;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse RuntimeException;\nfinal class ReservationChangedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-changed';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository, private readonly SitesQueryInterface $sitesQuery)\n    {\n    }\n    public function __invoke(ReservationChanged $event) : void\n    {\n        $reservation = $this->reservationRepository->find($event->siteId(), $event->system(), $event->systemId());\n        if (!$reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot change a reservation that is not found');\n        }\n        $site = $this->sitesQuery->get($event->siteId());\n        $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n        $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n        $reservation->update(['reference' => $event->reference(), 'channel_id' > $event->channelId(), 'offer_id' => $event->offerId(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n        $this->scheduling->whenReservationChanged($event->siteId(), $reservation);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ReservationChangedHandler.php",
        "originalStartLine": 45
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         $site = $this->sitesQuery->get($event->siteId());\n         $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n         $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n-        $reservation->update(['reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n+        $reservation->update(['reference' => $event->reference(), 'channel_id' > $event->channelId(), 'offer_id' => $event->offerId(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n         $this->scheduling->whenReservationChanged($event->siteId(), $reservation);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: insert into `migrations` (`migration`, `batch`) values (2022_07_09_220313_create_template_settings, 1))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(497): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3198): Illuminate\\Database\\Connection->insert()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(107): Illuminate\\Database\\Query\\Builder->insert()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(211): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->log()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#17 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#28 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#30 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#31 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#32 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#36 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#37 \/tmp\/infection\/interceptor.autoload.69f43c76c28121e51596343f5d202b18.infection.php(13): require_once('...')\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#45 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#46 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItem",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationChanged;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\TimeZoneConverter;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse RuntimeException;\nfinal class ReservationChangedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-changed';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository, private readonly SitesQueryInterface $sitesQuery)\n    {\n    }\n    public function __invoke(ReservationChanged $event) : void\n    {\n        $reservation = $this->reservationRepository->find($event->siteId(), $event->system(), $event->systemId());\n        if (!$reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot change a reservation that is not found');\n        }\n        $site = $this->sitesQuery->get($event->siteId());\n        $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n        $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n        $reservation->update(['reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n        $this->scheduling->whenReservationChanged($event->siteId(), $reservation);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationChanged;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\TimeZoneConverter;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse RuntimeException;\nfinal class ReservationChangedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-changed';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository, private readonly SitesQueryInterface $sitesQuery)\n    {\n    }\n    public function __invoke(ReservationChanged $event) : void\n    {\n        $reservation = $this->reservationRepository->find($event->siteId(), $event->system(), $event->systemId());\n        if (!$reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot change a reservation that is not found');\n        }\n        $site = $this->sitesQuery->get($event->siteId());\n        $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n        $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n        $reservation->update(['reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' > $event->offerId(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n        $this->scheduling->whenReservationChanged($event->siteId(), $reservation);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ReservationChangedHandler.php",
        "originalStartLine": 46
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         $site = $this->sitesQuery->get($event->siteId());\n         $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n         $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n-        $reservation->update(['reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n+        $reservation->update(['reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' > $event->offerId(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n         $this->scheduling->whenReservationChanged($event->siteId(), $reservation);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.schedules' doesn't exist (SQL: alter table `schedules` add primary key `schedules_id_primary`(`id`))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_07_213230_create_schedules_table.php(27): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateSchedulesTable->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.1a8c538350f12e6496675711ba571e5c.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItem",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationChanged;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\TimeZoneConverter;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse RuntimeException;\nfinal class ReservationChangedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-changed';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository, private readonly SitesQueryInterface $sitesQuery)\n    {\n    }\n    public function __invoke(ReservationChanged $event) : void\n    {\n        $reservation = $this->reservationRepository->find($event->siteId(), $event->system(), $event->systemId());\n        if (!$reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot change a reservation that is not found');\n        }\n        $site = $this->sitesQuery->get($event->siteId());\n        $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n        $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n        $reservation->update(['reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n        $this->scheduling->whenReservationChanged($event->siteId(), $reservation);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationChanged;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\TimeZoneConverter;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse RuntimeException;\nfinal class ReservationChangedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-changed';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository, private readonly SitesQueryInterface $sitesQuery)\n    {\n    }\n    public function __invoke(ReservationChanged $event) : void\n    {\n        $reservation = $this->reservationRepository->find($event->siteId(), $event->system(), $event->systemId());\n        if (!$reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot change a reservation that is not found');\n        }\n        $site = $this->sitesQuery->get($event->siteId());\n        $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n        $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n        $reservation->update(['reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'price' > $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n        $this->scheduling->whenReservationChanged($event->siteId(), $reservation);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ReservationChangedHandler.php",
        "originalStartLine": 47
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         $site = $this->sitesQuery->get($event->siteId());\n         $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n         $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n-        $reservation->update(['reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n+        $reservation->update(['reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'price' > $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n         $this->scheduling->whenReservationChanged($event->siteId(), $reservation);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: insert into `migrations` (`migration`, `batch`) values (2022_07_07_205040_create_automated_messages_table, 1))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(497): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3198): Illuminate\\Database\\Connection->insert()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(107): Illuminate\\Database\\Query\\Builder->insert()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(211): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->log()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#17 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#28 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#30 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#31 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#32 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#36 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#37 \/tmp\/infection\/interceptor.autoload.f3acc39e1e22c5a52eee13e728f6f203.infection.php(13): require_once('...')\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#45 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#46 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItem",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationChanged;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\TimeZoneConverter;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse RuntimeException;\nfinal class ReservationChangedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-changed';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository, private readonly SitesQueryInterface $sitesQuery)\n    {\n    }\n    public function __invoke(ReservationChanged $event) : void\n    {\n        $reservation = $this->reservationRepository->find($event->siteId(), $event->system(), $event->systemId());\n        if (!$reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot change a reservation that is not found');\n        }\n        $site = $this->sitesQuery->get($event->siteId());\n        $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n        $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n        $reservation->update(['reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n        $this->scheduling->whenReservationChanged($event->siteId(), $reservation);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationChanged;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\TimeZoneConverter;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse RuntimeException;\nfinal class ReservationChangedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-changed';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository, private readonly SitesQueryInterface $sitesQuery)\n    {\n    }\n    public function __invoke(ReservationChanged $event) : void\n    {\n        $reservation = $this->reservationRepository->find($event->siteId(), $event->system(), $event->systemId());\n        if (!$reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot change a reservation that is not found');\n        }\n        $site = $this->sitesQuery->get($event->siteId());\n        $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n        $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n        $reservation->update(['reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'price' => $event->price(), 'currency' > $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n        $this->scheduling->whenReservationChanged($event->siteId(), $reservation);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ReservationChangedHandler.php",
        "originalStartLine": 48
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         $site = $this->sitesQuery->get($event->siteId());\n         $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n         $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n-        $reservation->update(['reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n+        $reservation->update(['reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'price' => $event->price(), 'currency' > $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n         $this->scheduling->whenReservationChanged($event->siteId(), $reservation);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: insert into `migrations` (`migration`, `batch`) values (2022_07_09_224222_create_filters_table, 1))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(497): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3198): Illuminate\\Database\\Connection->insert()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(107): Illuminate\\Database\\Query\\Builder->insert()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(211): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->log()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#17 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#28 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#30 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#31 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#32 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#36 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#37 \/tmp\/infection\/interceptor.autoload.ae70023b1b2c07e68a35d64d8cc14dd4.infection.php(13): require_once('...')\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#45 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#46 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItem",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationChanged;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\TimeZoneConverter;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse RuntimeException;\nfinal class ReservationChangedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-changed';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository, private readonly SitesQueryInterface $sitesQuery)\n    {\n    }\n    public function __invoke(ReservationChanged $event) : void\n    {\n        $reservation = $this->reservationRepository->find($event->siteId(), $event->system(), $event->systemId());\n        if (!$reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot change a reservation that is not found');\n        }\n        $site = $this->sitesQuery->get($event->siteId());\n        $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n        $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n        $reservation->update(['reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n        $this->scheduling->whenReservationChanged($event->siteId(), $reservation);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationChanged;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\TimeZoneConverter;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse RuntimeException;\nfinal class ReservationChangedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-changed';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository, private readonly SitesQueryInterface $sitesQuery)\n    {\n    }\n    public function __invoke(ReservationChanged $event) : void\n    {\n        $reservation = $this->reservationRepository->find($event->siteId(), $event->system(), $event->systemId());\n        if (!$reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot change a reservation that is not found');\n        }\n        $site = $this->sitesQuery->get($event->siteId());\n        $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n        $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n        $reservation->update(['reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' > $event->status()]);\n        $this->scheduling->whenReservationChanged($event->siteId(), $reservation);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ReservationChangedHandler.php",
        "originalStartLine": 51
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         $site = $this->sitesQuery->get($event->siteId());\n         $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n         $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n-        $reservation->update(['reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n+        $reservation->update(['reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' > $event->status()]);\n         $this->scheduling->whenReservationChanged($event->siteId(), $reservation);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: insert into `migrations` (`migration`, `batch`) values (2022_07_07_205040_create_automated_messages_table, 1))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(497): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3198): Illuminate\\Database\\Connection->insert()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(107): Illuminate\\Database\\Query\\Builder->insert()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(211): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->log()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#17 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#28 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#30 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#31 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#32 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#36 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#37 \/tmp\/infection\/interceptor.autoload.60bea6b39a66dc6e01287ebff53d77cd.infection.php(13): require_once('...')\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#45 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#46 {main}"
    },
    {
      "mutator": {
        "mutatorName": "MethodCallRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationChanged;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\TimeZoneConverter;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse RuntimeException;\nfinal class ReservationChangedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-changed';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository, private readonly SitesQueryInterface $sitesQuery)\n    {\n    }\n    public function __invoke(ReservationChanged $event) : void\n    {\n        $reservation = $this->reservationRepository->find($event->siteId(), $event->system(), $event->systemId());\n        if (!$reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot change a reservation that is not found');\n        }\n        $site = $this->sitesQuery->get($event->siteId());\n        $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n        $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n        $reservation->update(['reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n        $this->scheduling->whenReservationChanged($event->siteId(), $reservation);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationChanged;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\TimeZoneConverter;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse RuntimeException;\nfinal class ReservationChangedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-changed';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository, private readonly SitesQueryInterface $sitesQuery)\n    {\n    }\n    public function __invoke(ReservationChanged $event) : void\n    {\n        $reservation = $this->reservationRepository->find($event->siteId(), $event->system(), $event->systemId());\n        if (!$reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot change a reservation that is not found');\n        }\n        $site = $this->sitesQuery->get($event->siteId());\n        $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n        $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n        $reservation->update(['reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n        \n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ReservationChangedHandler.php",
        "originalStartLine": 54
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n         $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n         $reservation->update(['reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n-        $this->scheduling->whenReservationChanged($event->siteId(), $reservation);\n+        \n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: select `migration` from `migrations` order by `batch` asc, `migration` asc)\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(421): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(2630): Illuminate\\Database\\Connection->select()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(2844): Illuminate\\Database\\Query\\Builder->runSelect()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3154): Illuminate\\Database\\Query\\Builder->Illuminate\\Database\\Query\\{closure}()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(2846): Illuminate\\Database\\Query\\Builder->onceWithColumns()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(53): Illuminate\\Database\\Query\\Builder->pluck()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(112): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->getRan()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#17 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#28 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#30 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#31 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#32 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#36 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#37 \/tmp\/infection\/interceptor.autoload.0c5dd2535d192caf191fd000427f97d8.infection.php(13): require_once('...')\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#45 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#46 {main}"
    },
    {
      "mutator": {
        "mutatorName": "CastInt",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse RuntimeException;\nfinal class ReservationConfirmedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-confirmed';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository)\n    {\n    }\n    public function __invoke(Message $event) : void\n    {\n        $reservation = $this->reservationRepository->find((int) $event->meta()['!siteId'], $event->payload()['reservationId']['system'], $event->payload()['reservationId']['systemId']);\n        if (!$reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot confirm a reservation that is not found');\n        }\n        $reservation->update(['status' => ReservationStatus::CONFIRMED]);\n        $this->scheduling->whenReservationConfirmed((int) $event->meta()['!siteId'], $reservation);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse RuntimeException;\nfinal class ReservationConfirmedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-confirmed';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository)\n    {\n    }\n    public function __invoke(Message $event) : void\n    {\n        $reservation = $this->reservationRepository->find($event->meta()['!siteId'], $event->payload()['reservationId']['system'], $event->payload()['reservationId']['systemId']);\n        if (!$reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot confirm a reservation that is not found');\n        }\n        $reservation->update(['status' => ReservationStatus::CONFIRMED]);\n        $this->scheduling->whenReservationConfirmed((int) $event->meta()['!siteId'], $reservation);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ReservationConfirmedHandler.php",
        "originalStartLine": 27
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     }\n     public function __invoke(Message $event) : void\n     {\n-        $reservation = $this->reservationRepository->find((int) $event->meta()['!siteId'], $event->payload()['reservationId']['system'], $event->payload()['reservationId']['systemId']);\n+        $reservation = $this->reservationRepository->find($event->meta()['!siteId'], $event->payload()['reservationId']['system'], $event->payload()['reservationId']['systemId']);\n         if (!$reservation instanceof Reservation) {\n             throw new RuntimeException('Cannot confirm a reservation that is not found');\n         }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: insert into `migrations` (`migration`, `batch`) values (2022_07_07_205040_create_automated_messages_table, 1))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(497): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3198): Illuminate\\Database\\Connection->insert()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(107): Illuminate\\Database\\Query\\Builder->insert()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(211): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->log()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#17 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#28 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#30 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#31 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#32 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#36 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#37 \/tmp\/infection\/interceptor.autoload.6880105e656ba1b5f6d48cef56d7b718.infection.php(13): require_once('...')\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#45 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#46 {main}"
    },
    {
      "mutator": {
        "mutatorName": "InstanceOf_",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse RuntimeException;\nfinal class ReservationConfirmedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-confirmed';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository)\n    {\n    }\n    public function __invoke(Message $event) : void\n    {\n        $reservation = $this->reservationRepository->find((int) $event->meta()['!siteId'], $event->payload()['reservationId']['system'], $event->payload()['reservationId']['systemId']);\n        if (!$reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot confirm a reservation that is not found');\n        }\n        $reservation->update(['status' => ReservationStatus::CONFIRMED]);\n        $this->scheduling->whenReservationConfirmed((int) $event->meta()['!siteId'], $reservation);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse RuntimeException;\nfinal class ReservationConfirmedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-confirmed';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository)\n    {\n    }\n    public function __invoke(Message $event) : void\n    {\n        $reservation = $this->reservationRepository->find((int) $event->meta()['!siteId'], $event->payload()['reservationId']['system'], $event->payload()['reservationId']['systemId']);\n        if (!false) {\n            throw new RuntimeException('Cannot confirm a reservation that is not found');\n        }\n        $reservation->update(['status' => ReservationStatus::CONFIRMED]);\n        $this->scheduling->whenReservationConfirmed((int) $event->meta()['!siteId'], $reservation);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ReservationConfirmedHandler.php",
        "originalStartLine": 32
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     public function __invoke(Message $event) : void\n     {\n         $reservation = $this->reservationRepository->find((int) $event->meta()['!siteId'], $event->payload()['reservationId']['system'], $event->payload()['reservationId']['systemId']);\n-        if (!$reservation instanceof Reservation) {\n+        if (!false) {\n             throw new RuntimeException('Cannot confirm a reservation that is not found');\n         }\n         $reservation->update(['status' => ReservationStatus::CONFIRMED]);",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: select `migration` from `migrations` order by `batch` asc, `migration` asc)\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(421): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(2630): Illuminate\\Database\\Connection->select()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(2844): Illuminate\\Database\\Query\\Builder->runSelect()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3154): Illuminate\\Database\\Query\\Builder->Illuminate\\Database\\Query\\{closure}()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(2846): Illuminate\\Database\\Query\\Builder->onceWithColumns()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(53): Illuminate\\Database\\Query\\Builder->pluck()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(685): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->getRan()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(127): Illuminate\\Database\\Migrations\\Migrator->hasRunAnyMigrations()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(79): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->prepareDatabase()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#18 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#29 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#31 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#32 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#33 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#36 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#37 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#38 \/tmp\/infection\/interceptor.autoload.a95308d0ffc65c88940856c32a1b6b5c.infection.php(13): require_once('...')\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#45 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#46 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#47 {main}"
    },
    {
      "mutator": {
        "mutatorName": "LogicalNot",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse RuntimeException;\nfinal class ReservationConfirmedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-confirmed';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository)\n    {\n    }\n    public function __invoke(Message $event) : void\n    {\n        $reservation = $this->reservationRepository->find((int) $event->meta()['!siteId'], $event->payload()['reservationId']['system'], $event->payload()['reservationId']['systemId']);\n        if (!$reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot confirm a reservation that is not found');\n        }\n        $reservation->update(['status' => ReservationStatus::CONFIRMED]);\n        $this->scheduling->whenReservationConfirmed((int) $event->meta()['!siteId'], $reservation);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse RuntimeException;\nfinal class ReservationConfirmedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-confirmed';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository)\n    {\n    }\n    public function __invoke(Message $event) : void\n    {\n        $reservation = $this->reservationRepository->find((int) $event->meta()['!siteId'], $event->payload()['reservationId']['system'], $event->payload()['reservationId']['systemId']);\n        if ($reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot confirm a reservation that is not found');\n        }\n        $reservation->update(['status' => ReservationStatus::CONFIRMED]);\n        $this->scheduling->whenReservationConfirmed((int) $event->meta()['!siteId'], $reservation);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ReservationConfirmedHandler.php",
        "originalStartLine": 32
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     public function __invoke(Message $event) : void\n     {\n         $reservation = $this->reservationRepository->find((int) $event->meta()['!siteId'], $event->payload()['reservationId']['system'], $event->payload()['reservationId']['systemId']);\n-        if (!$reservation instanceof Reservation) {\n+        if ($reservation instanceof Reservation) {\n             throw new RuntimeException('Cannot confirm a reservation that is not found');\n         }\n         $reservation->update(['status' => ReservationStatus::CONFIRMED]);",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.automated_messages' doesn't exist (SQL: alter table `automated_messages` add primary key `automated_messages_id_primary`(`id`))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_07_205040_create_automated_messages_table.php(27): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateAutomatedMessagesTable->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.73f074c639fcf5d942d02ff450545f31.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItemRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse RuntimeException;\nfinal class ReservationConfirmedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-confirmed';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository)\n    {\n    }\n    public function __invoke(Message $event) : void\n    {\n        $reservation = $this->reservationRepository->find((int) $event->meta()['!siteId'], $event->payload()['reservationId']['system'], $event->payload()['reservationId']['systemId']);\n        if (!$reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot confirm a reservation that is not found');\n        }\n        $reservation->update(['status' => ReservationStatus::CONFIRMED]);\n        $this->scheduling->whenReservationConfirmed((int) $event->meta()['!siteId'], $reservation);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse RuntimeException;\nfinal class ReservationConfirmedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-confirmed';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository)\n    {\n    }\n    public function __invoke(Message $event) : void\n    {\n        $reservation = $this->reservationRepository->find((int) $event->meta()['!siteId'], $event->payload()['reservationId']['system'], $event->payload()['reservationId']['systemId']);\n        if (!$reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot confirm a reservation that is not found');\n        }\n        $reservation->update([]);\n        $this->scheduling->whenReservationConfirmed((int) $event->meta()['!siteId'], $reservation);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ReservationConfirmedHandler.php",
        "originalStartLine": 36
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         if (!$reservation instanceof Reservation) {\n             throw new RuntimeException('Cannot confirm a reservation that is not found');\n         }\n-        $reservation->update(['status' => ReservationStatus::CONFIRMED]);\n+        $reservation->update([]);\n         $this->scheduling->whenReservationConfirmed((int) $event->meta()['!siteId'], $reservation);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1051 Unknown table 'automated_messages.automated_messages,automated_messages.migrations' (SQL: drop table `automated_messages`,`migrations`)\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/MySqlBuilder.php(87): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(82): Illuminate\\Database\\Schema\\MySqlBuilder->dropAllTables()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(59): Illuminate\\Database\\Console\\WipeCommand->dropAllTables()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\WipeCommand->handle()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#11 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(40): Illuminate\\Console\\Command->runCommand()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(45): Illuminate\\Console\\Command->callSilent()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Factory.php(56): Illuminate\\Console\\View\\Components\\Task->render()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(49): Illuminate\\Console\\View\\Components\\Factory->__call()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#29 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#33 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#34 \/tmp\/infection\/interceptor.autoload.b8ef42803fd91d3755d81f4f1c9185d5.infection.php(13): require_once('...')\n#35 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#36 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#37 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#42 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#43 {main}"
    },
    {
      "mutator": {
        "mutatorName": "MethodCallRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse RuntimeException;\nfinal class ReservationConfirmedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-confirmed';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository)\n    {\n    }\n    public function __invoke(Message $event) : void\n    {\n        $reservation = $this->reservationRepository->find((int) $event->meta()['!siteId'], $event->payload()['reservationId']['system'], $event->payload()['reservationId']['systemId']);\n        if (!$reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot confirm a reservation that is not found');\n        }\n        $reservation->update(['status' => ReservationStatus::CONFIRMED]);\n        $this->scheduling->whenReservationConfirmed((int) $event->meta()['!siteId'], $reservation);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse RuntimeException;\nfinal class ReservationConfirmedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-confirmed';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository)\n    {\n    }\n    public function __invoke(Message $event) : void\n    {\n        $reservation = $this->reservationRepository->find((int) $event->meta()['!siteId'], $event->payload()['reservationId']['system'], $event->payload()['reservationId']['systemId']);\n        if (!$reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot confirm a reservation that is not found');\n        }\n        \n        $this->scheduling->whenReservationConfirmed((int) $event->meta()['!siteId'], $reservation);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ReservationConfirmedHandler.php",
        "originalStartLine": 36
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         if (!$reservation instanceof Reservation) {\n             throw new RuntimeException('Cannot confirm a reservation that is not found');\n         }\n-        $reservation->update(['status' => ReservationStatus::CONFIRMED]);\n+        \n         $this->scheduling->whenReservationConfirmed((int) $event->meta()['!siteId'], $reservation);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: insert into `migrations` (`migration`, `batch`) values (2022_07_07_213230_create_schedules_table, 1))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(497): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3198): Illuminate\\Database\\Connection->insert()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(107): Illuminate\\Database\\Query\\Builder->insert()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(211): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->log()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#17 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#28 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#30 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#31 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#32 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#36 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#37 \/tmp\/infection\/interceptor.autoload.c28db232f5ded3466e9502ce065f4289.infection.php(13): require_once('...')\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#45 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#46 {main}"
    },
    {
      "mutator": {
        "mutatorName": "MethodCallRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse RuntimeException;\nfinal class ReservationConfirmedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-confirmed';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository)\n    {\n    }\n    public function __invoke(Message $event) : void\n    {\n        $reservation = $this->reservationRepository->find((int) $event->meta()['!siteId'], $event->payload()['reservationId']['system'], $event->payload()['reservationId']['systemId']);\n        if (!$reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot confirm a reservation that is not found');\n        }\n        $reservation->update(['status' => ReservationStatus::CONFIRMED]);\n        $this->scheduling->whenReservationConfirmed((int) $event->meta()['!siteId'], $reservation);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse RuntimeException;\nfinal class ReservationConfirmedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-confirmed';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository)\n    {\n    }\n    public function __invoke(Message $event) : void\n    {\n        $reservation = $this->reservationRepository->find((int) $event->meta()['!siteId'], $event->payload()['reservationId']['system'], $event->payload()['reservationId']['systemId']);\n        if (!$reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot confirm a reservation that is not found');\n        }\n        $reservation->update(['status' => ReservationStatus::CONFIRMED]);\n        \n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ReservationConfirmedHandler.php",
        "originalStartLine": 38
      },
      "diff": "--- Original\n+++ New\n@@ @@\n             throw new RuntimeException('Cannot confirm a reservation that is not found');\n         }\n         $reservation->update(['status' => ReservationStatus::CONFIRMED]);\n-        $this->scheduling->whenReservationConfirmed((int) $event->meta()['!siteId'], $reservation);\n+        \n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1051 Unknown table 'automated_messages.migrations,automated_messages.schedules' (SQL: drop table `migrations`,`schedules`)\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/MySqlBuilder.php(87): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(82): Illuminate\\Database\\Schema\\MySqlBuilder->dropAllTables()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(59): Illuminate\\Database\\Console\\WipeCommand->dropAllTables()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\WipeCommand->handle()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#11 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(40): Illuminate\\Console\\Command->runCommand()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(45): Illuminate\\Console\\Command->callSilent()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Factory.php(56): Illuminate\\Console\\View\\Components\\Task->render()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(49): Illuminate\\Console\\View\\Components\\Factory->__call()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#29 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#33 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#34 \/tmp\/infection\/interceptor.autoload.af6c6260330376c7c9ea9305ad1d8861.infection.php(13): require_once('...')\n#35 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#36 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#37 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#42 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#43 {main}"
    },
    {
      "mutator": {
        "mutatorName": "CastInt",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse RuntimeException;\nfinal class ReservationConfirmedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-confirmed';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository)\n    {\n    }\n    public function __invoke(Message $event) : void\n    {\n        $reservation = $this->reservationRepository->find((int) $event->meta()['!siteId'], $event->payload()['reservationId']['system'], $event->payload()['reservationId']['systemId']);\n        if (!$reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot confirm a reservation that is not found');\n        }\n        $reservation->update(['status' => ReservationStatus::CONFIRMED]);\n        $this->scheduling->whenReservationConfirmed((int) $event->meta()['!siteId'], $reservation);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse RuntimeException;\nfinal class ReservationConfirmedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-confirmed';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository)\n    {\n    }\n    public function __invoke(Message $event) : void\n    {\n        $reservation = $this->reservationRepository->find((int) $event->meta()['!siteId'], $event->payload()['reservationId']['system'], $event->payload()['reservationId']['systemId']);\n        if (!$reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot confirm a reservation that is not found');\n        }\n        $reservation->update(['status' => ReservationStatus::CONFIRMED]);\n        $this->scheduling->whenReservationConfirmed($event->meta()['!siteId'], $reservation);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ReservationConfirmedHandler.php",
        "originalStartLine": 38
      },
      "diff": "--- Original\n+++ New\n@@ @@\n             throw new RuntimeException('Cannot confirm a reservation that is not found');\n         }\n         $reservation->update(['status' => ReservationStatus::CONFIRMED]);\n-        $this->scheduling->whenReservationConfirmed((int) $event->meta()['!siteId'], $reservation);\n+        $this->scheduling->whenReservationConfirmed($event->meta()['!siteId'], $reservation);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S01]: Base table or view already exists: 1050 Table 'migrations' already exists (SQL: create table `migrations` (`id` int unsigned not null auto_increment primary key, `migration` varchar(255) not null, `batch` int not null) default character set utf8 collate 'utf8_unicode_ci')\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(157): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/InstallCommand.php(54): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->createRepository()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\InstallCommand->handle()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#13 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(40): Illuminate\\Console\\Command->runCommand()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(120): Illuminate\\Console\\Command->callSilent()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Factory.php(56): Illuminate\\Console\\View\\Components\\Task->render()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(122): Illuminate\\Console\\View\\Components\\Factory->__call()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(79): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->prepareDatabase()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#30 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#36 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#38 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#39 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#40 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#41 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#43 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#44 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#45 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#46 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#47 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#48 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#49 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#50 \/tmp\/infection\/interceptor.autoload.0ef387e3de9e023dae04ee1089ed76d5.infection.php(13): require_once('...')\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#53 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#54 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#55 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#56 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#57 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#58 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#59 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItemRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationCreated;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\TimeZoneConverter;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nfinal class ReservationCreatedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-created';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly SitesQueryInterface $sitesQuery)\n    {\n    }\n    public function __invoke(ReservationCreated $event) : void\n    {\n        $site = $this->sitesQuery->get($event->siteId());\n        $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n        $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n        $reservation = Reservation::create(['id' => Str::uuid()->toString(), 'site_id' => $event->siteId(), 'system' => $event->system(), 'system_id' => $event->systemId(), 'reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'booked_date' => $event->createdAt(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n        $this->scheduling->whenReservationCreated($event->siteId(), $reservation);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationCreated;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\TimeZoneConverter;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nfinal class ReservationCreatedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-created';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly SitesQueryInterface $sitesQuery)\n    {\n    }\n    public function __invoke(ReservationCreated $event) : void\n    {\n        $site = $this->sitesQuery->get($event->siteId());\n        $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n        $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n        $reservation = Reservation::create(['site_id' => $event->siteId(), 'system' => $event->system(), 'system_id' => $event->systemId(), 'reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'booked_date' => $event->createdAt(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n        $this->scheduling->whenReservationCreated($event->siteId(), $reservation);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ReservationCreatedHandler.php",
        "originalStartLine": 31
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         $site = $this->sitesQuery->get($event->siteId());\n         $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n         $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n-        $reservation = Reservation::create(['id' => Str::uuid()->toString(), 'site_id' => $event->siteId(), 'system' => $event->system(), 'system_id' => $event->systemId(), 'reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'booked_date' => $event->createdAt(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n+        $reservation = Reservation::create(['site_id' => $event->siteId(), 'system' => $event->system(), 'system_id' => $event->systemId(), 'reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'booked_date' => $event->createdAt(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n         $this->scheduling->whenReservationCreated($event->siteId(), $reservation);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: select `migration` from `migrations` order by `batch` asc, `migration` asc)\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(421): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(2630): Illuminate\\Database\\Connection->select()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(2844): Illuminate\\Database\\Query\\Builder->runSelect()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3154): Illuminate\\Database\\Query\\Builder->Illuminate\\Database\\Query\\{closure}()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(2846): Illuminate\\Database\\Query\\Builder->onceWithColumns()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(53): Illuminate\\Database\\Query\\Builder->pluck()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(685): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->getRan()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(127): Illuminate\\Database\\Migrations\\Migrator->hasRunAnyMigrations()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(79): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->prepareDatabase()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#18 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#29 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#31 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#32 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#33 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#36 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#37 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#38 \/tmp\/infection\/interceptor.autoload.bbecbf6d560c1836ae4ee98a9cadcadc.infection.php(13): require_once('...')\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#45 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#46 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#47 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItem",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationCreated;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\TimeZoneConverter;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nfinal class ReservationCreatedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-created';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly SitesQueryInterface $sitesQuery)\n    {\n    }\n    public function __invoke(ReservationCreated $event) : void\n    {\n        $site = $this->sitesQuery->get($event->siteId());\n        $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n        $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n        $reservation = Reservation::create(['id' => Str::uuid()->toString(), 'site_id' => $event->siteId(), 'system' => $event->system(), 'system_id' => $event->systemId(), 'reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'booked_date' => $event->createdAt(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n        $this->scheduling->whenReservationCreated($event->siteId(), $reservation);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationCreated;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\TimeZoneConverter;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nfinal class ReservationCreatedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-created';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly SitesQueryInterface $sitesQuery)\n    {\n    }\n    public function __invoke(ReservationCreated $event) : void\n    {\n        $site = $this->sitesQuery->get($event->siteId());\n        $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n        $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n        $reservation = Reservation::create(['id' > Str::uuid()->toString(), 'site_id' => $event->siteId(), 'system' => $event->system(), 'system_id' => $event->systemId(), 'reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'booked_date' => $event->createdAt(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n        $this->scheduling->whenReservationCreated($event->siteId(), $reservation);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ReservationCreatedHandler.php",
        "originalStartLine": 32
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         $site = $this->sitesQuery->get($event->siteId());\n         $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n         $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n-        $reservation = Reservation::create(['id' => Str::uuid()->toString(), 'site_id' => $event->siteId(), 'system' => $event->system(), 'system_id' => $event->systemId(), 'reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'booked_date' => $event->createdAt(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n+        $reservation = Reservation::create(['id' > Str::uuid()->toString(), 'site_id' => $event->siteId(), 'system' => $event->system(), 'system_id' => $event->systemId(), 'reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'booked_date' => $event->createdAt(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n         $this->scheduling->whenReservationCreated($event->siteId(), $reservation);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nE                                                                   1 \/ 1 (100%)\n\nTime: 00:00.975, Memory: 24.00 MB\n\nThere was 1 error:\n\n1) Tests\\Feature\\Handlers\\ReservationCreatedTest::test_new_reservation_should_be_stored\nIlluminate\\Database\\QueryException: SQLSTATE[42S02]: Base table or view not found: 1051 Unknown table 'automated_messages.automated_messages,automated_messages.filters,automated_messages.migrations,au...' (SQL: drop table `automated_messages`,`filters`,`migrations`,`reservations`,`schedules`,`template_settings`)\n\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php:759\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php:719\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php:545\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/MySqlBuilder.php:87\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php:82\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php:59\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php:36\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php:41\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php:93\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php:37\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php:651\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php:139\n\/var\/www\/vendor\/symfony\/console\/Command\/Command.php:308\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php:124\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php:68\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php:40\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php:45\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php:36\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Factory.php:56\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php:49\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php:36\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php:41\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php:93\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php:37\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php:651\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php:139\n\/var\/www\/vendor\/symfony\/console\/Command\/Command.php:308\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php:124\n\/var\/www\/vendor\/symfony\/console\/Application.php:998\n\/var\/www\/vendor\/symfony\/console\/Application.php:299\n\/var\/www\/vendor\/symfony\/console\/Application.php:171\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php:102\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php:194\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php:263\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Testing\/PendingCommand.php:286\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Testing\/PendingCommand.php:465\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Testing\/Concerns\/InteractsWithConsole.php:80\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Testing\/DatabaseMigrations.php:19\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Testing\/TestCase.php:127\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Testing\/TestCase.php:92\n\/var\/www\/tests\/Feature\/Handlers\/ReservationCreatedTest.php:24\n\nCaused by\nPDOException: SQLSTATE[42S02]: Base table or view not found: 1051 Unknown table 'automated_messages.automated_messages,automated_messages.filters,automated_messages.migrations,au...'\n\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php:544\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php:752\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php:719\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php:545\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/MySqlBuilder.php:87\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php:82\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php:59\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php:36\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php:41\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php:93\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php:37\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php:651\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php:139\n\/var\/www\/vendor\/symfony\/console\/Command\/Command.php:308\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php:124\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php:68\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php:40\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php:45\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php:36\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Factory.php:56\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php:49\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php:36\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php:41\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php:93\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php:37\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php:651\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php:139\n\/var\/www\/vendor\/symfony\/console\/Command\/Command.php:308\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php:124\n\/var\/www\/vendor\/symfony\/console\/Application.php:998\n\/var\/www\/vendor\/symfony\/console\/Application.php:299\n\/var\/www\/vendor\/symfony\/console\/Application.php:171\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php:102\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php:194\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php:263\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Testing\/PendingCommand.php:286\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Testing\/PendingCommand.php:465\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Testing\/Concerns\/InteractsWithConsole.php:80\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Testing\/DatabaseMigrations.php:19\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Testing\/TestCase.php:127\n\/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Testing\/TestCase.php:92\n\/var\/www\/tests\/Feature\/Handlers\/ReservationCreatedTest.php:24\n\nERRORS!\nTests: 1, Assertions: 0, Errors: 1."
    },
    {
      "mutator": {
        "mutatorName": "ArrayItem",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationCreated;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\TimeZoneConverter;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nfinal class ReservationCreatedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-created';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly SitesQueryInterface $sitesQuery)\n    {\n    }\n    public function __invoke(ReservationCreated $event) : void\n    {\n        $site = $this->sitesQuery->get($event->siteId());\n        $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n        $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n        $reservation = Reservation::create(['id' => Str::uuid()->toString(), 'site_id' => $event->siteId(), 'system' => $event->system(), 'system_id' => $event->systemId(), 'reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'booked_date' => $event->createdAt(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n        $this->scheduling->whenReservationCreated($event->siteId(), $reservation);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationCreated;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\TimeZoneConverter;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nfinal class ReservationCreatedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-created';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly SitesQueryInterface $sitesQuery)\n    {\n    }\n    public function __invoke(ReservationCreated $event) : void\n    {\n        $site = $this->sitesQuery->get($event->siteId());\n        $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n        $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n        $reservation = Reservation::create(['id' => Str::uuid()->toString(), 'site_id' => $event->siteId(), 'system' > $event->system(), 'system_id' => $event->systemId(), 'reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'booked_date' => $event->createdAt(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n        $this->scheduling->whenReservationCreated($event->siteId(), $reservation);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ReservationCreatedHandler.php",
        "originalStartLine": 34
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         $site = $this->sitesQuery->get($event->siteId());\n         $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n         $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n-        $reservation = Reservation::create(['id' => Str::uuid()->toString(), 'site_id' => $event->siteId(), 'system' => $event->system(), 'system_id' => $event->systemId(), 'reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'booked_date' => $event->createdAt(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n+        $reservation = Reservation::create(['id' => Str::uuid()->toString(), 'site_id' => $event->siteId(), 'system' > $event->system(), 'system_id' => $event->systemId(), 'reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'booked_date' => $event->createdAt(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n         $this->scheduling->whenReservationCreated($event->siteId(), $reservation);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1051 Unknown table 'automated_messages.filters,automated_messages.migrations,automated_messages.reservations,automate...' (SQL: drop table `filters`,`migrations`,`reservations`,`schedules`,`template_settings`)\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/MySqlBuilder.php(87): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(82): Illuminate\\Database\\Schema\\MySqlBuilder->dropAllTables()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(59): Illuminate\\Database\\Console\\WipeCommand->dropAllTables()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\WipeCommand->handle()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#11 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(40): Illuminate\\Console\\Command->runCommand()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(45): Illuminate\\Console\\Command->callSilent()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Factory.php(56): Illuminate\\Console\\View\\Components\\Task->render()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(49): Illuminate\\Console\\View\\Components\\Factory->__call()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#29 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#33 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#34 \/tmp\/infection\/interceptor.autoload.e6b6ae07abef45439e509919aa42488f.infection.php(13): require_once('...')\n#35 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#36 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#37 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#42 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#43 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItem",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationCreated;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\TimeZoneConverter;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nfinal class ReservationCreatedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-created';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly SitesQueryInterface $sitesQuery)\n    {\n    }\n    public function __invoke(ReservationCreated $event) : void\n    {\n        $site = $this->sitesQuery->get($event->siteId());\n        $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n        $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n        $reservation = Reservation::create(['id' => Str::uuid()->toString(), 'site_id' => $event->siteId(), 'system' => $event->system(), 'system_id' => $event->systemId(), 'reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'booked_date' => $event->createdAt(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n        $this->scheduling->whenReservationCreated($event->siteId(), $reservation);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationCreated;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\TimeZoneConverter;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nfinal class ReservationCreatedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-created';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly SitesQueryInterface $sitesQuery)\n    {\n    }\n    public function __invoke(ReservationCreated $event) : void\n    {\n        $site = $this->sitesQuery->get($event->siteId());\n        $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n        $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n        $reservation = Reservation::create(['id' => Str::uuid()->toString(), 'site_id' => $event->siteId(), 'system' => $event->system(), 'system_id' > $event->systemId(), 'reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'booked_date' => $event->createdAt(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n        $this->scheduling->whenReservationCreated($event->siteId(), $reservation);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ReservationCreatedHandler.php",
        "originalStartLine": 35
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         $site = $this->sitesQuery->get($event->siteId());\n         $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n         $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n-        $reservation = Reservation::create(['id' => Str::uuid()->toString(), 'site_id' => $event->siteId(), 'system' => $event->system(), 'system_id' => $event->systemId(), 'reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'booked_date' => $event->createdAt(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n+        $reservation = Reservation::create(['id' => Str::uuid()->toString(), 'site_id' => $event->siteId(), 'system' => $event->system(), 'system_id' > $event->systemId(), 'reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'booked_date' => $event->createdAt(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n         $this->scheduling->whenReservationCreated($event->siteId(), $reservation);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1051 Unknown table 'automated_messages.automated_messages,automated_messages.filters,automated_messages.migrations,au...' (SQL: drop table `automated_messages`,`filters`,`migrations`,`reservations`,`schedules`,`template_settings`)\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/MySqlBuilder.php(87): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(82): Illuminate\\Database\\Schema\\MySqlBuilder->dropAllTables()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(59): Illuminate\\Database\\Console\\WipeCommand->dropAllTables()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\WipeCommand->handle()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#11 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(40): Illuminate\\Console\\Command->runCommand()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(45): Illuminate\\Console\\Command->callSilent()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Factory.php(56): Illuminate\\Console\\View\\Components\\Task->render()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(49): Illuminate\\Console\\View\\Components\\Factory->__call()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#29 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#33 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#34 \/tmp\/infection\/interceptor.autoload.e8036880286df9645f96f2bf3a44a4cc.infection.php(13): require_once('...')\n#35 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#36 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#37 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#42 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#43 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItem",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationCreated;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\TimeZoneConverter;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nfinal class ReservationCreatedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-created';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly SitesQueryInterface $sitesQuery)\n    {\n    }\n    public function __invoke(ReservationCreated $event) : void\n    {\n        $site = $this->sitesQuery->get($event->siteId());\n        $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n        $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n        $reservation = Reservation::create(['id' => Str::uuid()->toString(), 'site_id' => $event->siteId(), 'system' => $event->system(), 'system_id' => $event->systemId(), 'reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'booked_date' => $event->createdAt(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n        $this->scheduling->whenReservationCreated($event->siteId(), $reservation);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationCreated;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\TimeZoneConverter;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nfinal class ReservationCreatedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-created';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly SitesQueryInterface $sitesQuery)\n    {\n    }\n    public function __invoke(ReservationCreated $event) : void\n    {\n        $site = $this->sitesQuery->get($event->siteId());\n        $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n        $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n        $reservation = Reservation::create(['id' => Str::uuid()->toString(), 'site_id' => $event->siteId(), 'system' => $event->system(), 'system_id' => $event->systemId(), 'reference' > $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'booked_date' => $event->createdAt(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n        $this->scheduling->whenReservationCreated($event->siteId(), $reservation);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ReservationCreatedHandler.php",
        "originalStartLine": 36
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         $site = $this->sitesQuery->get($event->siteId());\n         $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n         $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n-        $reservation = Reservation::create(['id' => Str::uuid()->toString(), 'site_id' => $event->siteId(), 'system' => $event->system(), 'system_id' => $event->systemId(), 'reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'booked_date' => $event->createdAt(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n+        $reservation = Reservation::create(['id' => Str::uuid()->toString(), 'site_id' => $event->siteId(), 'system' => $event->system(), 'system_id' => $event->systemId(), 'reference' > $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'booked_date' => $event->createdAt(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n         $this->scheduling->whenReservationCreated($event->siteId(), $reservation);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1051 Unknown table 'automated_messages.automated_messages,automated_messages.filters,automated_messages.migrations,au...' (SQL: drop table `automated_messages`,`filters`,`migrations`,`reservations`,`schedules`,`template_settings`)\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/MySqlBuilder.php(87): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(82): Illuminate\\Database\\Schema\\MySqlBuilder->dropAllTables()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(59): Illuminate\\Database\\Console\\WipeCommand->dropAllTables()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\WipeCommand->handle()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#11 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(40): Illuminate\\Console\\Command->runCommand()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(45): Illuminate\\Console\\Command->callSilent()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Factory.php(56): Illuminate\\Console\\View\\Components\\Task->render()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(49): Illuminate\\Console\\View\\Components\\Factory->__call()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#29 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#33 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#34 \/tmp\/infection\/interceptor.autoload.3bc64e41ca85f04c57812193d03f23b9.infection.php(13): require_once('...')\n#35 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#36 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#37 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#42 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#43 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItem",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationCreated;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\TimeZoneConverter;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nfinal class ReservationCreatedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-created';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly SitesQueryInterface $sitesQuery)\n    {\n    }\n    public function __invoke(ReservationCreated $event) : void\n    {\n        $site = $this->sitesQuery->get($event->siteId());\n        $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n        $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n        $reservation = Reservation::create(['id' => Str::uuid()->toString(), 'site_id' => $event->siteId(), 'system' => $event->system(), 'system_id' => $event->systemId(), 'reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'booked_date' => $event->createdAt(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n        $this->scheduling->whenReservationCreated($event->siteId(), $reservation);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationCreated;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\TimeZoneConverter;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nfinal class ReservationCreatedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-created';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly SitesQueryInterface $sitesQuery)\n    {\n    }\n    public function __invoke(ReservationCreated $event) : void\n    {\n        $site = $this->sitesQuery->get($event->siteId());\n        $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n        $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n        $reservation = Reservation::create(['id' => Str::uuid()->toString(), 'site_id' => $event->siteId(), 'system' => $event->system(), 'system_id' => $event->systemId(), 'reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' > $event->offerId(), 'booked_date' => $event->createdAt(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n        $this->scheduling->whenReservationCreated($event->siteId(), $reservation);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ReservationCreatedHandler.php",
        "originalStartLine": 38
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         $site = $this->sitesQuery->get($event->siteId());\n         $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n         $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n-        $reservation = Reservation::create(['id' => Str::uuid()->toString(), 'site_id' => $event->siteId(), 'system' => $event->system(), 'system_id' => $event->systemId(), 'reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'booked_date' => $event->createdAt(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n+        $reservation = Reservation::create(['id' => Str::uuid()->toString(), 'site_id' => $event->siteId(), 'system' => $event->system(), 'system_id' => $event->systemId(), 'reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' > $event->offerId(), 'booked_date' => $event->createdAt(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n         $this->scheduling->whenReservationCreated($event->siteId(), $reservation);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1051 Unknown table 'automated_messages.automated_messages,automated_messages.migrations' (SQL: drop table `automated_messages`,`migrations`)\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/MySqlBuilder.php(87): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(82): Illuminate\\Database\\Schema\\MySqlBuilder->dropAllTables()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(59): Illuminate\\Database\\Console\\WipeCommand->dropAllTables()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\WipeCommand->handle()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#11 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(40): Illuminate\\Console\\Command->runCommand()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(45): Illuminate\\Console\\Command->callSilent()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Factory.php(56): Illuminate\\Console\\View\\Components\\Task->render()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(49): Illuminate\\Console\\View\\Components\\Factory->__call()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#29 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#33 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#34 \/tmp\/infection\/interceptor.autoload.6e0cb76a84a534a5a7802c444f8945aa.infection.php(13): require_once('...')\n#35 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#36 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#37 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#42 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#43 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItem",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationCreated;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\TimeZoneConverter;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nfinal class ReservationCreatedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-created';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly SitesQueryInterface $sitesQuery)\n    {\n    }\n    public function __invoke(ReservationCreated $event) : void\n    {\n        $site = $this->sitesQuery->get($event->siteId());\n        $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n        $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n        $reservation = Reservation::create(['id' => Str::uuid()->toString(), 'site_id' => $event->siteId(), 'system' => $event->system(), 'system_id' => $event->systemId(), 'reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'booked_date' => $event->createdAt(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n        $this->scheduling->whenReservationCreated($event->siteId(), $reservation);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationCreated;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\TimeZoneConverter;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nfinal class ReservationCreatedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-created';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly SitesQueryInterface $sitesQuery)\n    {\n    }\n    public function __invoke(ReservationCreated $event) : void\n    {\n        $site = $this->sitesQuery->get($event->siteId());\n        $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n        $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n        $reservation = Reservation::create(['id' => Str::uuid()->toString(), 'site_id' => $event->siteId(), 'system' => $event->system(), 'system_id' => $event->systemId(), 'reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'booked_date' > $event->createdAt(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n        $this->scheduling->whenReservationCreated($event->siteId(), $reservation);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ReservationCreatedHandler.php",
        "originalStartLine": 39
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         $site = $this->sitesQuery->get($event->siteId());\n         $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n         $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n-        $reservation = Reservation::create(['id' => Str::uuid()->toString(), 'site_id' => $event->siteId(), 'system' => $event->system(), 'system_id' => $event->systemId(), 'reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'booked_date' => $event->createdAt(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n+        $reservation = Reservation::create(['id' => Str::uuid()->toString(), 'site_id' => $event->siteId(), 'system' => $event->system(), 'system_id' => $event->systemId(), 'reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'booked_date' > $event->createdAt(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n         $this->scheduling->whenReservationCreated($event->siteId(), $reservation);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S01]: Base table or view already exists: 1050 Table 'automated_messages' already exists (SQL: create table `automated_messages` (`id` char(36) not null, `site_id` int not null, `name` varchar(255) not null, `reply_to` varchar(255) not null, `trigger_time_unit` varchar(255) not null, `trigger_value` int not null, `trigger_time_aspect` varchar(255) not null, `trigger_action` varchar(255) not null, `last_message_sent_at` datetime null, `is_active` tinyint(1) not null default '0', `deleted_at` timestamp null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8 collate 'utf8_unicode_ci')\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_07_205040_create_automated_messages_table.php(27): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateAutomatedMessagesTable->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.b595a1e7183f5bd7e687afce23ae778a.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItem",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationCreated;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\TimeZoneConverter;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nfinal class ReservationCreatedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-created';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly SitesQueryInterface $sitesQuery)\n    {\n    }\n    public function __invoke(ReservationCreated $event) : void\n    {\n        $site = $this->sitesQuery->get($event->siteId());\n        $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n        $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n        $reservation = Reservation::create(['id' => Str::uuid()->toString(), 'site_id' => $event->siteId(), 'system' => $event->system(), 'system_id' => $event->systemId(), 'reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'booked_date' => $event->createdAt(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n        $this->scheduling->whenReservationCreated($event->siteId(), $reservation);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationCreated;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\TimeZoneConverter;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nfinal class ReservationCreatedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-created';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly SitesQueryInterface $sitesQuery)\n    {\n    }\n    public function __invoke(ReservationCreated $event) : void\n    {\n        $site = $this->sitesQuery->get($event->siteId());\n        $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n        $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n        $reservation = Reservation::create(['id' => Str::uuid()->toString(), 'site_id' => $event->siteId(), 'system' => $event->system(), 'system_id' => $event->systemId(), 'reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'booked_date' => $event->createdAt(), 'price' > $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n        $this->scheduling->whenReservationCreated($event->siteId(), $reservation);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ReservationCreatedHandler.php",
        "originalStartLine": 40
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         $site = $this->sitesQuery->get($event->siteId());\n         $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n         $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n-        $reservation = Reservation::create(['id' => Str::uuid()->toString(), 'site_id' => $event->siteId(), 'system' => $event->system(), 'system_id' => $event->systemId(), 'reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'booked_date' => $event->createdAt(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n+        $reservation = Reservation::create(['id' => Str::uuid()->toString(), 'site_id' => $event->siteId(), 'system' => $event->system(), 'system_id' => $event->systemId(), 'reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'booked_date' => $event->createdAt(), 'price' > $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n         $this->scheduling->whenReservationCreated($event->siteId(), $reservation);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1051 Unknown table 'automated_messages.migrations' (SQL: drop table `migrations`)\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/MySqlBuilder.php(87): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(82): Illuminate\\Database\\Schema\\MySqlBuilder->dropAllTables()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(59): Illuminate\\Database\\Console\\WipeCommand->dropAllTables()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\WipeCommand->handle()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#11 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(40): Illuminate\\Console\\Command->runCommand()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(45): Illuminate\\Console\\Command->callSilent()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Factory.php(56): Illuminate\\Console\\View\\Components\\Task->render()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(49): Illuminate\\Console\\View\\Components\\Factory->__call()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#29 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#33 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#34 \/tmp\/infection\/interceptor.autoload.c50523c7f2b3f38cf854996861059d3d.infection.php(13): require_once('...')\n#35 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#36 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#37 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#42 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#43 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItem",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationCreated;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\TimeZoneConverter;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nfinal class ReservationCreatedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-created';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly SitesQueryInterface $sitesQuery)\n    {\n    }\n    public function __invoke(ReservationCreated $event) : void\n    {\n        $site = $this->sitesQuery->get($event->siteId());\n        $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n        $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n        $reservation = Reservation::create(['id' => Str::uuid()->toString(), 'site_id' => $event->siteId(), 'system' => $event->system(), 'system_id' => $event->systemId(), 'reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'booked_date' => $event->createdAt(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n        $this->scheduling->whenReservationCreated($event->siteId(), $reservation);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationCreated;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\TimeZoneConverter;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nfinal class ReservationCreatedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-created';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly SitesQueryInterface $sitesQuery)\n    {\n    }\n    public function __invoke(ReservationCreated $event) : void\n    {\n        $site = $this->sitesQuery->get($event->siteId());\n        $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n        $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n        $reservation = Reservation::create(['id' => Str::uuid()->toString(), 'site_id' => $event->siteId(), 'system' => $event->system(), 'system_id' => $event->systemId(), 'reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'booked_date' => $event->createdAt(), 'price' => $event->price(), 'currency' > $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n        $this->scheduling->whenReservationCreated($event->siteId(), $reservation);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ReservationCreatedHandler.php",
        "originalStartLine": 41
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         $site = $this->sitesQuery->get($event->siteId());\n         $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n         $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n-        $reservation = Reservation::create(['id' => Str::uuid()->toString(), 'site_id' => $event->siteId(), 'system' => $event->system(), 'system_id' => $event->systemId(), 'reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'booked_date' => $event->createdAt(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n+        $reservation = Reservation::create(['id' => Str::uuid()->toString(), 'site_id' => $event->siteId(), 'system' => $event->system(), 'system_id' => $event->systemId(), 'reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'booked_date' => $event->createdAt(), 'price' => $event->price(), 'currency' > $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n         $this->scheduling->whenReservationCreated($event->siteId(), $reservation);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1051 Unknown table 'automated_messages.migrations' (SQL: drop table `migrations`)\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/MySqlBuilder.php(87): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(82): Illuminate\\Database\\Schema\\MySqlBuilder->dropAllTables()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(59): Illuminate\\Database\\Console\\WipeCommand->dropAllTables()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\WipeCommand->handle()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#11 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(40): Illuminate\\Console\\Command->runCommand()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(45): Illuminate\\Console\\Command->callSilent()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Factory.php(56): Illuminate\\Console\\View\\Components\\Task->render()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(49): Illuminate\\Console\\View\\Components\\Factory->__call()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#29 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#33 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#34 \/tmp\/infection\/interceptor.autoload.da16528cebd30a5c18db6e932aaddbd2.infection.php(13): require_once('...')\n#35 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#36 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#37 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#42 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#43 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItem",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationCreated;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\TimeZoneConverter;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nfinal class ReservationCreatedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-created';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly SitesQueryInterface $sitesQuery)\n    {\n    }\n    public function __invoke(ReservationCreated $event) : void\n    {\n        $site = $this->sitesQuery->get($event->siteId());\n        $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n        $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n        $reservation = Reservation::create(['id' => Str::uuid()->toString(), 'site_id' => $event->siteId(), 'system' => $event->system(), 'system_id' => $event->systemId(), 'reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'booked_date' => $event->createdAt(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n        $this->scheduling->whenReservationCreated($event->siteId(), $reservation);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationCreated;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\TimeZoneConverter;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nfinal class ReservationCreatedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-created';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly SitesQueryInterface $sitesQuery)\n    {\n    }\n    public function __invoke(ReservationCreated $event) : void\n    {\n        $site = $this->sitesQuery->get($event->siteId());\n        $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n        $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n        $reservation = Reservation::create(['id' => Str::uuid()->toString(), 'site_id' => $event->siteId(), 'system' => $event->system(), 'system_id' => $event->systemId(), 'reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'booked_date' => $event->createdAt(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' > $event->status()]);\n        $this->scheduling->whenReservationCreated($event->siteId(), $reservation);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ReservationCreatedHandler.php",
        "originalStartLine": 44
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         $site = $this->sitesQuery->get($event->siteId());\n         $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n         $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n-        $reservation = Reservation::create(['id' => Str::uuid()->toString(), 'site_id' => $event->siteId(), 'system' => $event->system(), 'system_id' => $event->systemId(), 'reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'booked_date' => $event->createdAt(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n+        $reservation = Reservation::create(['id' => Str::uuid()->toString(), 'site_id' => $event->siteId(), 'system' => $event->system(), 'system_id' => $event->systemId(), 'reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'booked_date' => $event->createdAt(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' > $event->status()]);\n         $this->scheduling->whenReservationCreated($event->siteId(), $reservation);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S01]: Base table or view already exists: 1050 Table 'migrations' already exists (SQL: create table `migrations` (`id` int unsigned not null auto_increment primary key, `migration` varchar(255) not null, `batch` int not null) default character set utf8 collate 'utf8_unicode_ci')\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(157): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/InstallCommand.php(54): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->createRepository()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\InstallCommand->handle()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#13 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(40): Illuminate\\Console\\Command->runCommand()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(120): Illuminate\\Console\\Command->callSilent()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Factory.php(56): Illuminate\\Console\\View\\Components\\Task->render()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(122): Illuminate\\Console\\View\\Components\\Factory->__call()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(79): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->prepareDatabase()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#30 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#36 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#38 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#39 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#40 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#41 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#43 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#44 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#45 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#46 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#47 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#48 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#49 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#50 \/tmp\/infection\/interceptor.autoload.cfa88aa4e2e95176177bd4f9106b4e85.infection.php(13): require_once('...')\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#53 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#54 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#55 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#56 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#57 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#58 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#59 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItemRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Update;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class UpdateHandler\n{\n    private const EVENT_UPDATED = 'event.automated-messages.updated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageQueryInterface $automatedMessageQuery, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Update $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        $automatedMessage->filters()->delete();\n        $automatedMessage->templateSettings()->delete();\n        $automatedMessage->filters()->createMany($command->filters());\n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $command->messageId());\n        $this->scheduling->whenUpdated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n        $this->messageBus->dispatch(new Message(self::EVENT_UPDATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Update;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class UpdateHandler\n{\n    private const EVENT_UPDATED = 'event.automated-messages.updated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageQueryInterface $automatedMessageQuery, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Update $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        $automatedMessage->filters()->delete();\n        $automatedMessage->templateSettings()->delete();\n        $automatedMessage->filters()->createMany($command->filters());\n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $command->messageId());\n        $this->scheduling->whenUpdated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n        $this->messageBus->dispatch(new Message(self::EVENT_UPDATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/UpdateHandler.php",
        "originalStartLine": 30
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     public function __invoke(Update $command) : void\n     {\n         $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n-        $automatedMessage->update(['name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n+        $automatedMessage->update(['reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n         $automatedMessage->filters()->delete();\n         $automatedMessage->templateSettings()->delete();\n         $automatedMessage->filters()->createMany($command->filters());",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[HY000]: General error: 1005 Can't create table `automated_messages`.`schedules` (errno: 150 \"Foreign key constraint is incorrectly formed\") (SQL: alter table `schedules` add constraint `schedules_automated_message_id_foreign` foreign key (`automated_message_id`) references `automated_messages` (`id`))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_07_213230_create_schedules_table.php(27): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateSchedulesTable->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.649385f8454e9a84313ecbfde34d09e6.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "MethodCallRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Update;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class UpdateHandler\n{\n    private const EVENT_UPDATED = 'event.automated-messages.updated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageQueryInterface $automatedMessageQuery, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Update $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        $automatedMessage->filters()->delete();\n        $automatedMessage->templateSettings()->delete();\n        $automatedMessage->filters()->createMany($command->filters());\n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $command->messageId());\n        $this->scheduling->whenUpdated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n        $this->messageBus->dispatch(new Message(self::EVENT_UPDATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Update;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class UpdateHandler\n{\n    private const EVENT_UPDATED = 'event.automated-messages.updated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageQueryInterface $automatedMessageQuery, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Update $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        \n        $automatedMessage->filters()->delete();\n        $automatedMessage->templateSettings()->delete();\n        $automatedMessage->filters()->createMany($command->filters());\n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $command->messageId());\n        $this->scheduling->whenUpdated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n        $this->messageBus->dispatch(new Message(self::EVENT_UPDATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/UpdateHandler.php",
        "originalStartLine": 30
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     public function __invoke(Update $command) : void\n     {\n         $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n-        $automatedMessage->update(['name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n+        \n         $automatedMessage->filters()->delete();\n         $automatedMessage->templateSettings()->delete();\n         $automatedMessage->filters()->createMany($command->filters());",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S01]: Base table or view already exists: 1050 Table 'schedules' already exists (SQL: create table `schedules` (`id` char(36) not null, `site_id` int not null, `automated_message_id` char(36) not null, `reference` varchar(255) not null, `reference_id` varchar(255) not null, `status` varchar(255) not null, `send_at` datetime not null, `sent_at` datetime null, `deleted_at` timestamp null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8 collate 'utf8_unicode_ci')\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_07_213230_create_schedules_table.php(27): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateSchedulesTable->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.055f7fc1660ab96b73a0bf32ac1b030c.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItem",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Update;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class UpdateHandler\n{\n    private const EVENT_UPDATED = 'event.automated-messages.updated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageQueryInterface $automatedMessageQuery, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Update $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        $automatedMessage->filters()->delete();\n        $automatedMessage->templateSettings()->delete();\n        $automatedMessage->filters()->createMany($command->filters());\n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $command->messageId());\n        $this->scheduling->whenUpdated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n        $this->messageBus->dispatch(new Message(self::EVENT_UPDATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Update;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class UpdateHandler\n{\n    private const EVENT_UPDATED = 'event.automated-messages.updated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageQueryInterface $automatedMessageQuery, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Update $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['name' > $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        $automatedMessage->filters()->delete();\n        $automatedMessage->templateSettings()->delete();\n        $automatedMessage->filters()->createMany($command->filters());\n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $command->messageId());\n        $this->scheduling->whenUpdated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n        $this->messageBus->dispatch(new Message(self::EVENT_UPDATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/UpdateHandler.php",
        "originalStartLine": 31
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     public function __invoke(Update $command) : void\n     {\n         $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n-        $automatedMessage->update(['name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n+        $automatedMessage->update(['name' > $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n         $automatedMessage->filters()->delete();\n         $automatedMessage->templateSettings()->delete();\n         $automatedMessage->filters()->createMany($command->filters());",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S01]: Base table or view already exists: 1050 Table 'automated_messages' already exists (SQL: create table `automated_messages` (`id` char(36) not null, `site_id` int not null, `name` varchar(255) not null, `reply_to` varchar(255) not null, `trigger_time_unit` varchar(255) not null, `trigger_value` int not null, `trigger_time_aspect` varchar(255) not null, `trigger_action` varchar(255) not null, `last_message_sent_at` datetime null, `is_active` tinyint(1) not null default '0', `deleted_at` timestamp null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8 collate 'utf8_unicode_ci')\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_07_205040_create_automated_messages_table.php(27): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateAutomatedMessagesTable->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.ac1ba6f7a4635eb4e69c0f7a8bfe7d17.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItem",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Update;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class UpdateHandler\n{\n    private const EVENT_UPDATED = 'event.automated-messages.updated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageQueryInterface $automatedMessageQuery, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Update $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        $automatedMessage->filters()->delete();\n        $automatedMessage->templateSettings()->delete();\n        $automatedMessage->filters()->createMany($command->filters());\n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $command->messageId());\n        $this->scheduling->whenUpdated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n        $this->messageBus->dispatch(new Message(self::EVENT_UPDATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Update;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class UpdateHandler\n{\n    private const EVENT_UPDATED = 'event.automated-messages.updated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageQueryInterface $automatedMessageQuery, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Update $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['name' => $command->automatedMessageName(), 'reply_to' > $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        $automatedMessage->filters()->delete();\n        $automatedMessage->templateSettings()->delete();\n        $automatedMessage->filters()->createMany($command->filters());\n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $command->messageId());\n        $this->scheduling->whenUpdated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n        $this->messageBus->dispatch(new Message(self::EVENT_UPDATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/UpdateHandler.php",
        "originalStartLine": 32
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     public function __invoke(Update $command) : void\n     {\n         $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n-        $automatedMessage->update(['name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n+        $automatedMessage->update(['name' => $command->automatedMessageName(), 'reply_to' > $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n         $automatedMessage->filters()->delete();\n         $automatedMessage->templateSettings()->delete();\n         $automatedMessage->filters()->createMany($command->filters());",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1051 Unknown table 'automated_messages.automated_messages,automated_messages.filters,automated_messages.migrations,au...' (SQL: drop table `automated_messages`,`filters`,`migrations`,`reservations`,`schedules`,`template_settings`)\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/MySqlBuilder.php(87): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(82): Illuminate\\Database\\Schema\\MySqlBuilder->dropAllTables()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(59): Illuminate\\Database\\Console\\WipeCommand->dropAllTables()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\WipeCommand->handle()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#11 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(40): Illuminate\\Console\\Command->runCommand()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(45): Illuminate\\Console\\Command->callSilent()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Factory.php(56): Illuminate\\Console\\View\\Components\\Task->render()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(49): Illuminate\\Console\\View\\Components\\Factory->__call()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#29 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#33 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#34 \/tmp\/infection\/interceptor.autoload.7cb1a86bfbf0376dcb4a690a579c035d.infection.php(13): require_once('...')\n#35 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#36 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#37 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#42 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#43 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItem",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Update;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class UpdateHandler\n{\n    private const EVENT_UPDATED = 'event.automated-messages.updated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageQueryInterface $automatedMessageQuery, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Update $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        $automatedMessage->filters()->delete();\n        $automatedMessage->templateSettings()->delete();\n        $automatedMessage->filters()->createMany($command->filters());\n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $command->messageId());\n        $this->scheduling->whenUpdated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n        $this->messageBus->dispatch(new Message(self::EVENT_UPDATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Update;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class UpdateHandler\n{\n    private const EVENT_UPDATED = 'event.automated-messages.updated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageQueryInterface $automatedMessageQuery, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Update $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' > $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        $automatedMessage->filters()->delete();\n        $automatedMessage->templateSettings()->delete();\n        $automatedMessage->filters()->createMany($command->filters());\n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $command->messageId());\n        $this->scheduling->whenUpdated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n        $this->messageBus->dispatch(new Message(self::EVENT_UPDATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/UpdateHandler.php",
        "originalStartLine": 33
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     public function __invoke(Update $command) : void\n     {\n         $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n-        $automatedMessage->update(['name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n+        $automatedMessage->update(['name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' > $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n         $automatedMessage->filters()->delete();\n         $automatedMessage->templateSettings()->delete();\n         $automatedMessage->filters()->createMany($command->filters());",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1051 Unknown table 'automated_messages.automated_messages,automated_messages.filters,automated_messages.migrations,au...' (SQL: drop table `automated_messages`,`filters`,`migrations`,`reservations`,`schedules`,`template_settings`)\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/MySqlBuilder.php(87): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(82): Illuminate\\Database\\Schema\\MySqlBuilder->dropAllTables()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(59): Illuminate\\Database\\Console\\WipeCommand->dropAllTables()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\WipeCommand->handle()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#11 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(40): Illuminate\\Console\\Command->runCommand()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(45): Illuminate\\Console\\Command->callSilent()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Factory.php(56): Illuminate\\Console\\View\\Components\\Task->render()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(49): Illuminate\\Console\\View\\Components\\Factory->__call()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#29 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#33 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#34 \/tmp\/infection\/interceptor.autoload.c22e57457c79e96191ff34f9387c169a.infection.php(13): require_once('...')\n#35 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#36 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#37 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#42 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#43 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItem",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Update;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class UpdateHandler\n{\n    private const EVENT_UPDATED = 'event.automated-messages.updated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageQueryInterface $automatedMessageQuery, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Update $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        $automatedMessage->filters()->delete();\n        $automatedMessage->templateSettings()->delete();\n        $automatedMessage->filters()->createMany($command->filters());\n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $command->messageId());\n        $this->scheduling->whenUpdated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n        $this->messageBus->dispatch(new Message(self::EVENT_UPDATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Update;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class UpdateHandler\n{\n    private const EVENT_UPDATED = 'event.automated-messages.updated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageQueryInterface $automatedMessageQuery, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Update $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' > $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        $automatedMessage->filters()->delete();\n        $automatedMessage->templateSettings()->delete();\n        $automatedMessage->filters()->createMany($command->filters());\n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $command->messageId());\n        $this->scheduling->whenUpdated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n        $this->messageBus->dispatch(new Message(self::EVENT_UPDATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/UpdateHandler.php",
        "originalStartLine": 34
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     public function __invoke(Update $command) : void\n     {\n         $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n-        $automatedMessage->update(['name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n+        $automatedMessage->update(['name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' > $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n         $automatedMessage->filters()->delete();\n         $automatedMessage->templateSettings()->delete();\n         $automatedMessage->filters()->createMany($command->filters());",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1051 Unknown table 'automated_messages.filters,automated_messages.migrations,automated_messages.reservations,automate...' (SQL: drop table `filters`,`migrations`,`reservations`,`schedules`,`template_settings`)\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/MySqlBuilder.php(87): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(82): Illuminate\\Database\\Schema\\MySqlBuilder->dropAllTables()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(59): Illuminate\\Database\\Console\\WipeCommand->dropAllTables()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\WipeCommand->handle()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#11 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(40): Illuminate\\Console\\Command->runCommand()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(45): Illuminate\\Console\\Command->callSilent()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Factory.php(56): Illuminate\\Console\\View\\Components\\Task->render()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(49): Illuminate\\Console\\View\\Components\\Factory->__call()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#29 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#33 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#34 \/tmp\/infection\/interceptor.autoload.5666ce909330f97512fa661aff514045.infection.php(13): require_once('...')\n#35 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#36 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#37 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#42 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#43 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItem",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Update;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class UpdateHandler\n{\n    private const EVENT_UPDATED = 'event.automated-messages.updated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageQueryInterface $automatedMessageQuery, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Update $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        $automatedMessage->filters()->delete();\n        $automatedMessage->templateSettings()->delete();\n        $automatedMessage->filters()->createMany($command->filters());\n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $command->messageId());\n        $this->scheduling->whenUpdated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n        $this->messageBus->dispatch(new Message(self::EVENT_UPDATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Update;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class UpdateHandler\n{\n    private const EVENT_UPDATED = 'event.automated-messages.updated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageQueryInterface $automatedMessageQuery, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Update $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' > $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        $automatedMessage->filters()->delete();\n        $automatedMessage->templateSettings()->delete();\n        $automatedMessage->filters()->createMany($command->filters());\n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $command->messageId());\n        $this->scheduling->whenUpdated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n        $this->messageBus->dispatch(new Message(self::EVENT_UPDATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/UpdateHandler.php",
        "originalStartLine": 35
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     public function __invoke(Update $command) : void\n     {\n         $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n-        $automatedMessage->update(['name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n+        $automatedMessage->update(['name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' > $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n         $automatedMessage->filters()->delete();\n         $automatedMessage->templateSettings()->delete();\n         $automatedMessage->filters()->createMany($command->filters());",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1051 Unknown table 'automated_messages.filters,automated_messages.migrations,automated_messages.schedules,automated_m...' (SQL: drop table `filters`,`migrations`,`schedules`,`template_settings`)\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/MySqlBuilder.php(87): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(82): Illuminate\\Database\\Schema\\MySqlBuilder->dropAllTables()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(59): Illuminate\\Database\\Console\\WipeCommand->dropAllTables()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\WipeCommand->handle()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#11 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(40): Illuminate\\Console\\Command->runCommand()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(45): Illuminate\\Console\\Command->callSilent()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Factory.php(56): Illuminate\\Console\\View\\Components\\Task->render()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(49): Illuminate\\Console\\View\\Components\\Factory->__call()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#29 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#33 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#34 \/tmp\/infection\/interceptor.autoload.2900de5e1851c0f46da9012b3e00c246.infection.php(13): require_once('...')\n#35 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#36 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#37 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#42 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#43 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItem",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Update;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class UpdateHandler\n{\n    private const EVENT_UPDATED = 'event.automated-messages.updated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageQueryInterface $automatedMessageQuery, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Update $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        $automatedMessage->filters()->delete();\n        $automatedMessage->templateSettings()->delete();\n        $automatedMessage->filters()->createMany($command->filters());\n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $command->messageId());\n        $this->scheduling->whenUpdated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n        $this->messageBus->dispatch(new Message(self::EVENT_UPDATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Update;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class UpdateHandler\n{\n    private const EVENT_UPDATED = 'event.automated-messages.updated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageQueryInterface $automatedMessageQuery, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Update $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' > $command->triggerAction()]);\n        $automatedMessage->filters()->delete();\n        $automatedMessage->templateSettings()->delete();\n        $automatedMessage->filters()->createMany($command->filters());\n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $command->messageId());\n        $this->scheduling->whenUpdated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n        $this->messageBus->dispatch(new Message(self::EVENT_UPDATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/UpdateHandler.php",
        "originalStartLine": 36
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     public function __invoke(Update $command) : void\n     {\n         $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n-        $automatedMessage->update(['name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n+        $automatedMessage->update(['name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' > $command->triggerAction()]);\n         $automatedMessage->filters()->delete();\n         $automatedMessage->templateSettings()->delete();\n         $automatedMessage->filters()->createMany($command->filters());",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: select `migration` from `migrations` order by `batch` asc, `migration` asc)\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(421): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(2630): Illuminate\\Database\\Connection->select()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(2844): Illuminate\\Database\\Query\\Builder->runSelect()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3154): Illuminate\\Database\\Query\\Builder->Illuminate\\Database\\Query\\{closure}()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(2846): Illuminate\\Database\\Query\\Builder->onceWithColumns()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(53): Illuminate\\Database\\Query\\Builder->pluck()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(112): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->getRan()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#17 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#28 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#30 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#31 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#32 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#36 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#37 \/tmp\/infection\/interceptor.autoload.0449696cf2b11910a39bd8c46de17bf5.infection.php(13): require_once('...')\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#45 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#46 {main}"
    },
    {
      "mutator": {
        "mutatorName": "MethodCallRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Update;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class UpdateHandler\n{\n    private const EVENT_UPDATED = 'event.automated-messages.updated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageQueryInterface $automatedMessageQuery, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Update $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        $automatedMessage->filters()->delete();\n        $automatedMessage->templateSettings()->delete();\n        $automatedMessage->filters()->createMany($command->filters());\n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $command->messageId());\n        $this->scheduling->whenUpdated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n        $this->messageBus->dispatch(new Message(self::EVENT_UPDATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Update;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class UpdateHandler\n{\n    private const EVENT_UPDATED = 'event.automated-messages.updated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageQueryInterface $automatedMessageQuery, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Update $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        \n        $automatedMessage->templateSettings()->delete();\n        $automatedMessage->filters()->createMany($command->filters());\n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $command->messageId());\n        $this->scheduling->whenUpdated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n        $this->messageBus->dispatch(new Message(self::EVENT_UPDATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/UpdateHandler.php",
        "originalStartLine": 39
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     {\n         $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n         $automatedMessage->update(['name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n-        $automatedMessage->filters()->delete();\n+        \n         $automatedMessage->templateSettings()->delete();\n         $automatedMessage->filters()->createMany($command->filters());\n         $automatedMessage->templateSettings()->createMany($command->templateSettings());",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: select `migration` from `migrations` order by `batch` asc, `migration` asc)\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(421): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(2630): Illuminate\\Database\\Connection->select()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(2844): Illuminate\\Database\\Query\\Builder->runSelect()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3154): Illuminate\\Database\\Query\\Builder->Illuminate\\Database\\Query\\{closure}()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(2846): Illuminate\\Database\\Query\\Builder->onceWithColumns()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(53): Illuminate\\Database\\Query\\Builder->pluck()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(685): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->getRan()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(127): Illuminate\\Database\\Migrations\\Migrator->hasRunAnyMigrations()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(79): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->prepareDatabase()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#18 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#29 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#31 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#32 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#33 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#36 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#37 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#38 \/tmp\/infection\/interceptor.autoload.617306bf326822caa8085fa298ab05c2.infection.php(13): require_once('...')\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#45 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#46 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#47 {main}"
    },
    {
      "mutator": {
        "mutatorName": "MethodCallRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Update;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class UpdateHandler\n{\n    private const EVENT_UPDATED = 'event.automated-messages.updated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageQueryInterface $automatedMessageQuery, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Update $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        $automatedMessage->filters()->delete();\n        $automatedMessage->templateSettings()->delete();\n        $automatedMessage->filters()->createMany($command->filters());\n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $command->messageId());\n        $this->scheduling->whenUpdated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n        $this->messageBus->dispatch(new Message(self::EVENT_UPDATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Update;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class UpdateHandler\n{\n    private const EVENT_UPDATED = 'event.automated-messages.updated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageQueryInterface $automatedMessageQuery, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Update $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        $automatedMessage->filters()->delete();\n        \n        $automatedMessage->filters()->createMany($command->filters());\n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $command->messageId());\n        $this->scheduling->whenUpdated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n        $this->messageBus->dispatch(new Message(self::EVENT_UPDATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/UpdateHandler.php",
        "originalStartLine": 40
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n         $automatedMessage->update(['name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n         $automatedMessage->filters()->delete();\n-        $automatedMessage->templateSettings()->delete();\n+        \n         $automatedMessage->filters()->createMany($command->filters());\n         $automatedMessage->templateSettings()->createMany($command->templateSettings());\n         $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $command->messageId());",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: insert into `migrations` (`migration`, `batch`) values (2022_07_07_213230_create_schedules_table, 1))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(497): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3198): Illuminate\\Database\\Connection->insert()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(107): Illuminate\\Database\\Query\\Builder->insert()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(211): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->log()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#17 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#28 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#30 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#31 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#32 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#36 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#37 \/tmp\/infection\/interceptor.autoload.4682d3161c4ee13b0e0b72aae8a639ad.infection.php(13): require_once('...')\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#45 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#46 {main}"
    },
    {
      "mutator": {
        "mutatorName": "MethodCallRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Update;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class UpdateHandler\n{\n    private const EVENT_UPDATED = 'event.automated-messages.updated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageQueryInterface $automatedMessageQuery, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Update $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        $automatedMessage->filters()->delete();\n        $automatedMessage->templateSettings()->delete();\n        $automatedMessage->filters()->createMany($command->filters());\n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $command->messageId());\n        $this->scheduling->whenUpdated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n        $this->messageBus->dispatch(new Message(self::EVENT_UPDATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Update;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class UpdateHandler\n{\n    private const EVENT_UPDATED = 'event.automated-messages.updated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageQueryInterface $automatedMessageQuery, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Update $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        $automatedMessage->filters()->delete();\n        $automatedMessage->templateSettings()->delete();\n        \n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $command->messageId());\n        $this->scheduling->whenUpdated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n        $this->messageBus->dispatch(new Message(self::EVENT_UPDATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/UpdateHandler.php",
        "originalStartLine": 42
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         $automatedMessage->update(['name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n         $automatedMessage->filters()->delete();\n         $automatedMessage->templateSettings()->delete();\n-        $automatedMessage->filters()->createMany($command->filters());\n+        \n         $automatedMessage->templateSettings()->createMany($command->templateSettings());\n         $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $command->messageId());\n         $this->scheduling->whenUpdated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: insert into `migrations` (`migration`, `batch`) values (2022_07_09_224222_create_reservations_table, 1))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(497): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3198): Illuminate\\Database\\Connection->insert()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(107): Illuminate\\Database\\Query\\Builder->insert()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(211): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->log()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#17 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#28 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#30 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#31 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#32 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#36 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#37 \/tmp\/infection\/interceptor.autoload.410281a4a75ef86e243fac42ff17d2ee.infection.php(13): require_once('...')\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#45 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#46 {main}"
    },
    {
      "mutator": {
        "mutatorName": "MethodCallRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Update;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class UpdateHandler\n{\n    private const EVENT_UPDATED = 'event.automated-messages.updated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageQueryInterface $automatedMessageQuery, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Update $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        $automatedMessage->filters()->delete();\n        $automatedMessage->templateSettings()->delete();\n        $automatedMessage->filters()->createMany($command->filters());\n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $command->messageId());\n        $this->scheduling->whenUpdated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n        $this->messageBus->dispatch(new Message(self::EVENT_UPDATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Update;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class UpdateHandler\n{\n    private const EVENT_UPDATED = 'event.automated-messages.updated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageQueryInterface $automatedMessageQuery, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Update $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        $automatedMessage->filters()->delete();\n        $automatedMessage->templateSettings()->delete();\n        $automatedMessage->filters()->createMany($command->filters());\n        \n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $command->messageId());\n        $this->scheduling->whenUpdated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n        $this->messageBus->dispatch(new Message(self::EVENT_UPDATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/UpdateHandler.php",
        "originalStartLine": 43
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         $automatedMessage->filters()->delete();\n         $automatedMessage->templateSettings()->delete();\n         $automatedMessage->filters()->createMany($command->filters());\n-        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n+        \n         $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $command->messageId());\n         $this->scheduling->whenUpdated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n         $this->messageBus->dispatch(new Message(self::EVENT_UPDATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S01]: Base table or view already exists: 1050 Table 'schedules' already exists (SQL: create table `schedules` (`id` char(36) not null, `site_id` int not null, `automated_message_id` char(36) not null, `reference` varchar(255) not null, `reference_id` varchar(255) not null, `status` varchar(255) not null, `send_at` datetime not null, `sent_at` datetime null, `deleted_at` timestamp null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8 collate 'utf8_unicode_ci')\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_07_213230_create_schedules_table.php(27): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateSchedulesTable->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.c3e87e2e13499d8f2a4e311a78d682d9.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "MethodCallRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Update;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class UpdateHandler\n{\n    private const EVENT_UPDATED = 'event.automated-messages.updated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageQueryInterface $automatedMessageQuery, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Update $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        $automatedMessage->filters()->delete();\n        $automatedMessage->templateSettings()->delete();\n        $automatedMessage->filters()->createMany($command->filters());\n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $command->messageId());\n        $this->scheduling->whenUpdated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n        $this->messageBus->dispatch(new Message(self::EVENT_UPDATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Update;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class UpdateHandler\n{\n    private const EVENT_UPDATED = 'event.automated-messages.updated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageQueryInterface $automatedMessageQuery, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Update $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        $automatedMessage->filters()->delete();\n        $automatedMessage->templateSettings()->delete();\n        $automatedMessage->filters()->createMany($command->filters());\n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $command->messageId());\n        \n        $this->messageBus->dispatch(new Message(self::EVENT_UPDATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/UpdateHandler.php",
        "originalStartLine": 47
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         $automatedMessage->filters()->createMany($command->filters());\n         $automatedMessage->templateSettings()->createMany($command->templateSettings());\n         $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $command->messageId());\n-        $this->scheduling->whenUpdated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n+        \n         $this->messageBus->dispatch(new Message(self::EVENT_UPDATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[HY000]: General error: 1005 Can't create table `automated_messages`.`schedules` (errno: 150 \"Foreign key constraint is incorrectly formed\") (SQL: alter table `schedules` add constraint `schedules_automated_message_id_foreign` foreign key (`automated_message_id`) references `automated_messages` (`id`))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_07_213230_create_schedules_table.php(27): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateSchedulesTable->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.38ce464b87f7efa038f5c653727e1845.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "MethodCallRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Update;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class UpdateHandler\n{\n    private const EVENT_UPDATED = 'event.automated-messages.updated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageQueryInterface $automatedMessageQuery, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Update $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        $automatedMessage->filters()->delete();\n        $automatedMessage->templateSettings()->delete();\n        $automatedMessage->filters()->createMany($command->filters());\n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $command->messageId());\n        $this->scheduling->whenUpdated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n        $this->messageBus->dispatch(new Message(self::EVENT_UPDATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Update;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class UpdateHandler\n{\n    private const EVENT_UPDATED = 'event.automated-messages.updated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageQueryInterface $automatedMessageQuery, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Update $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        $automatedMessage->filters()->delete();\n        $automatedMessage->templateSettings()->delete();\n        $automatedMessage->filters()->createMany($command->filters());\n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $command->messageId());\n        $this->scheduling->whenUpdated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n        \n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/UpdateHandler.php",
        "originalStartLine": 52
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         $automatedMessage->templateSettings()->createMany($command->templateSettings());\n         $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $command->messageId());\n         $this->scheduling->whenUpdated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n-        $this->messageBus->dispatch(new Message(self::EVENT_UPDATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n+        \n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[HY000]: General error: 1005 Can't create table `automated_messages`.`automated_messages` (errno: 150 \"Foreign key constraint is incorrectly formed\") (SQL: create table `automated_messages` (`id` char(36) not null, `site_id` int not null, `name` varchar(255) not null, `reply_to` varchar(255) not null, `trigger_time_unit` varchar(255) not null, `trigger_value` int not null, `trigger_time_aspect` varchar(255) not null, `trigger_action` varchar(255) not null, `last_message_sent_at` datetime null, `is_active` tinyint(1) not null default '0', `deleted_at` timestamp null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8 collate 'utf8_unicode_ci')\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_07_205040_create_automated_messages_table.php(27): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateAutomatedMessagesTable->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.b517b801b0e752aa80b68983488be971.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItem",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Update;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class UpdateHandler\n{\n    private const EVENT_UPDATED = 'event.automated-messages.updated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageQueryInterface $automatedMessageQuery, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Update $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        $automatedMessage->filters()->delete();\n        $automatedMessage->templateSettings()->delete();\n        $automatedMessage->filters()->createMany($command->filters());\n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $command->messageId());\n        $this->scheduling->whenUpdated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n        $this->messageBus->dispatch(new Message(self::EVENT_UPDATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Update;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class UpdateHandler\n{\n    private const EVENT_UPDATED = 'event.automated-messages.updated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageQueryInterface $automatedMessageQuery, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Update $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        $automatedMessage->filters()->delete();\n        $automatedMessage->templateSettings()->delete();\n        $automatedMessage->filters()->createMany($command->filters());\n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $command->messageId());\n        $this->scheduling->whenUpdated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n        $this->messageBus->dispatch(new Message(self::EVENT_UPDATED, $automatedMessage->toArray(), ['!siteId' > $command->siteId()]), $command);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/UpdateHandler.php",
        "originalStartLine": 55
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         $automatedMessage->templateSettings()->createMany($command->templateSettings());\n         $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $command->messageId());\n         $this->scheduling->whenUpdated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n-        $this->messageBus->dispatch(new Message(self::EVENT_UPDATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n+        $this->messageBus->dispatch(new Message(self::EVENT_UPDATED, $automatedMessage->toArray(), ['!siteId' > $command->siteId()]), $command);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S01]: Base table or view already exists: 1050 Table 'schedules' already exists (SQL: create table `schedules` (`id` char(36) not null, `site_id` int not null, `automated_message_id` char(36) not null, `reference` varchar(255) not null, `reference_id` varchar(255) not null, `status` varchar(255) not null, `send_at` datetime not null, `sent_at` datetime null, `deleted_at` timestamp null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8 collate 'utf8_unicode_ci')\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_07_213230_create_schedules_table.php(27): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateSchedulesTable->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.409610af9175d4984b9710a6a274b0b3.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItemRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Update;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class UpdateHandler\n{\n    private const EVENT_UPDATED = 'event.automated-messages.updated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageQueryInterface $automatedMessageQuery, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Update $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        $automatedMessage->filters()->delete();\n        $automatedMessage->templateSettings()->delete();\n        $automatedMessage->filters()->createMany($command->filters());\n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $command->messageId());\n        $this->scheduling->whenUpdated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n        $this->messageBus->dispatch(new Message(self::EVENT_UPDATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Update;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\AutomatedMessageScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\AutomatedMessageRepositoryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class UpdateHandler\n{\n    private const EVENT_UPDATED = 'event.automated-messages.updated';\n    public function __construct(private readonly MessageBusInterface $messageBus, private readonly AutomatedMessageRepositoryInterface $automatedMessageRepository, private readonly AutomatedMessageQueryInterface $automatedMessageQuery, private readonly AutomatedMessageScheduling $scheduling)\n    {\n    }\n    public function __invoke(Update $command) : void\n    {\n        $automatedMessage = $this->automatedMessageRepository->find($command->siteId(), $command->messageId());\n        $automatedMessage->update(['name' => $command->automatedMessageName(), 'reply_to' => $command->replyTo(), 'trigger_time_unit' => $command->triggerTimeUnit(), 'trigger_value' => $command->triggerValue(), 'trigger_time_aspect' => $command->triggerTimeAspect(), 'trigger_action' => $command->triggerAction()]);\n        $automatedMessage->filters()->delete();\n        $automatedMessage->templateSettings()->delete();\n        $automatedMessage->filters()->createMany($command->filters());\n        $automatedMessage->templateSettings()->createMany($command->templateSettings());\n        $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $command->messageId());\n        $this->scheduling->whenUpdated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n        $this->messageBus->dispatch(new Message(self::EVENT_UPDATED, $automatedMessage->toArray(), []), $command);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/UpdateHandler.php",
        "originalStartLine": 55
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         $automatedMessage->templateSettings()->createMany($command->templateSettings());\n         $automatedMessage = $this->automatedMessageQuery->find($command->siteId(), $command->messageId());\n         $this->scheduling->whenUpdated($command->siteId(), $this->automatedMessageQuery->find($command->siteId(), $command->messageId()));\n-        $this->messageBus->dispatch(new Message(self::EVENT_UPDATED, $automatedMessage->toArray(), ['!siteId' => $command->siteId()]), $command);\n+        $this->messageBus->dispatch(new Message(self::EVENT_UPDATED, $automatedMessage->toArray(), []), $command);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: insert into `migrations` (`migration`, `batch`) values (2022_07_09_220313_create_template_settings, 1))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(497): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3198): Illuminate\\Database\\Connection->insert()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(107): Illuminate\\Database\\Query\\Builder->insert()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(211): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->log()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#17 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#28 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#30 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#31 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#32 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#36 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#37 \/tmp\/infection\/interceptor.autoload.065f268bc1215e0d1557184fa1e34b98.infection.php(13): require_once('...')\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#45 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#46 {main}"
    },
    {
      "mutator": {
        "mutatorName": "PublicVisibility",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application;\n\nfinal class Message\n{\n    public function __construct(private readonly int $siteId, private readonly string $transactionalMessageId, private readonly array $from, private readonly string $subject, private readonly string $htmlBody, private readonly string $plaintextBody, private readonly string $recipient, private readonly array $replyTo)\n    {\n    }\n    public function siteId() : int\n    {\n        return $this->siteId;\n    }\n    public function message() : array\n    {\n        return ['from' => $this->from, 'recipient' => $this->recipient, 'subject' => $this->subject, 'replyTo' => $this->replyTo, 'body' => ['html' => $this->htmlBody, 'plaintext' => $this->plaintextBody]];\n    }\n    public function transactionalMessageId() : string\n    {\n        return $this->transactionalMessageId;\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application;\n\nfinal class Message\n{\n    public function __construct(private readonly int $siteId, private readonly string $transactionalMessageId, private readonly array $from, private readonly string $subject, private readonly string $htmlBody, private readonly string $plaintextBody, private readonly string $recipient, private readonly array $replyTo)\n    {\n    }\n    protected function siteId() : int\n    {\n        return $this->siteId;\n    }\n    public function message() : array\n    {\n        return ['from' => $this->from, 'recipient' => $this->recipient, 'subject' => $this->subject, 'replyTo' => $this->replyTo, 'body' => ['html' => $this->htmlBody, 'plaintext' => $this->plaintextBody]];\n    }\n    public function transactionalMessageId() : string\n    {\n        return $this->transactionalMessageId;\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Message.php",
        "originalStartLine": 21
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     public function __construct(private readonly int $siteId, private readonly string $transactionalMessageId, private readonly array $from, private readonly string $subject, private readonly string $htmlBody, private readonly string $plaintextBody, private readonly string $recipient, private readonly array $replyTo)\n     {\n     }\n-    public function siteId() : int\n+    protected function siteId() : int\n     {\n         return $this->siteId;\n     }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S01]: Base table or view already exists: 1050 Table 'migrations' already exists (SQL: create table `migrations` (`id` int unsigned not null auto_increment primary key, `migration` varchar(255) not null, `batch` int not null) default character set utf8 collate 'utf8_unicode_ci')\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(157): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/InstallCommand.php(54): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->createRepository()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\InstallCommand->handle()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#13 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(40): Illuminate\\Console\\Command->runCommand()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(120): Illuminate\\Console\\Command->callSilent()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Factory.php(56): Illuminate\\Console\\View\\Components\\Task->render()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(122): Illuminate\\Console\\View\\Components\\Factory->__call()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(79): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->prepareDatabase()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#30 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#36 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#38 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#39 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#40 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#41 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#43 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#44 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#45 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#46 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#47 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#48 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#49 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#50 \/tmp\/infection\/interceptor.autoload.fdd62b555ada555d97e007ad727a5131.infection.php(13): require_once('...')\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#53 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#54 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#55 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#56 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#57 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#58 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#59 {main}"
    },
    {
      "mutator": {
        "mutatorName": "PublicVisibility",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application;\n\nfinal class Message\n{\n    public function __construct(private readonly int $siteId, private readonly string $transactionalMessageId, private readonly array $from, private readonly string $subject, private readonly string $htmlBody, private readonly string $plaintextBody, private readonly string $recipient, private readonly array $replyTo)\n    {\n    }\n    public function siteId() : int\n    {\n        return $this->siteId;\n    }\n    public function message() : array\n    {\n        return ['from' => $this->from, 'recipient' => $this->recipient, 'subject' => $this->subject, 'replyTo' => $this->replyTo, 'body' => ['html' => $this->htmlBody, 'plaintext' => $this->plaintextBody]];\n    }\n    public function transactionalMessageId() : string\n    {\n        return $this->transactionalMessageId;\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application;\n\nfinal class Message\n{\n    public function __construct(private readonly int $siteId, private readonly string $transactionalMessageId, private readonly array $from, private readonly string $subject, private readonly string $htmlBody, private readonly string $plaintextBody, private readonly string $recipient, private readonly array $replyTo)\n    {\n    }\n    public function siteId() : int\n    {\n        return $this->siteId;\n    }\n    protected function message() : array\n    {\n        return ['from' => $this->from, 'recipient' => $this->recipient, 'subject' => $this->subject, 'replyTo' => $this->replyTo, 'body' => ['html' => $this->htmlBody, 'plaintext' => $this->plaintextBody]];\n    }\n    public function transactionalMessageId() : string\n    {\n        return $this->transactionalMessageId;\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Message.php",
        "originalStartLine": 26
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     {\n         return $this->siteId;\n     }\n-    public function message() : array\n+    protected function message() : array\n     {\n         return ['from' => $this->from, 'recipient' => $this->recipient, 'subject' => $this->subject, 'replyTo' => $this->replyTo, 'body' => ['html' => $this->htmlBody, 'plaintext' => $this->plaintextBody]];\n     }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1051 Unknown table 'automated_messages.filters,automated_messages.migrations,automated_messages.schedules,automated_m...' (SQL: drop table `filters`,`migrations`,`schedules`,`template_settings`)\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/MySqlBuilder.php(87): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(82): Illuminate\\Database\\Schema\\MySqlBuilder->dropAllTables()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(59): Illuminate\\Database\\Console\\WipeCommand->dropAllTables()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\WipeCommand->handle()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#11 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(40): Illuminate\\Console\\Command->runCommand()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(45): Illuminate\\Console\\Command->callSilent()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Factory.php(56): Illuminate\\Console\\View\\Components\\Task->render()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(49): Illuminate\\Console\\View\\Components\\Factory->__call()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#29 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#33 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#34 \/tmp\/infection\/interceptor.autoload.85eac763dc9b5d388c554a329b4033f5.infection.php(13): require_once('...')\n#35 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#36 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#37 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#42 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#43 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItem",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application;\n\nfinal class Message\n{\n    public function __construct(private readonly int $siteId, private readonly string $transactionalMessageId, private readonly array $from, private readonly string $subject, private readonly string $htmlBody, private readonly string $plaintextBody, private readonly string $recipient, private readonly array $replyTo)\n    {\n    }\n    public function siteId() : int\n    {\n        return $this->siteId;\n    }\n    public function message() : array\n    {\n        return ['from' => $this->from, 'recipient' => $this->recipient, 'subject' => $this->subject, 'replyTo' => $this->replyTo, 'body' => ['html' => $this->htmlBody, 'plaintext' => $this->plaintextBody]];\n    }\n    public function transactionalMessageId() : string\n    {\n        return $this->transactionalMessageId;\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application;\n\nfinal class Message\n{\n    public function __construct(private readonly int $siteId, private readonly string $transactionalMessageId, private readonly array $from, private readonly string $subject, private readonly string $htmlBody, private readonly string $plaintextBody, private readonly string $recipient, private readonly array $replyTo)\n    {\n    }\n    public function siteId() : int\n    {\n        return $this->siteId;\n    }\n    public function message() : array\n    {\n        return ['from' > $this->from, 'recipient' => $this->recipient, 'subject' => $this->subject, 'replyTo' => $this->replyTo, 'body' => ['html' => $this->htmlBody, 'plaintext' => $this->plaintextBody]];\n    }\n    public function transactionalMessageId() : string\n    {\n        return $this->transactionalMessageId;\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Message.php",
        "originalStartLine": 29
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     }\n     public function message() : array\n     {\n-        return ['from' => $this->from, 'recipient' => $this->recipient, 'subject' => $this->subject, 'replyTo' => $this->replyTo, 'body' => ['html' => $this->htmlBody, 'plaintext' => $this->plaintextBody]];\n+        return ['from' > $this->from, 'recipient' => $this->recipient, 'subject' => $this->subject, 'replyTo' => $this->replyTo, 'body' => ['html' => $this->htmlBody, 'plaintext' => $this->plaintextBody]];\n     }\n     public function transactionalMessageId() : string\n     {",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.schedules' doesn't exist (SQL: alter table `schedules` add primary key `schedules_id_primary`(`id`))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_07_213230_create_schedules_table.php(27): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateSchedulesTable->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.9bd1d1272f0c680b70a4e405796d3f22.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItem",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application;\n\nfinal class Message\n{\n    public function __construct(private readonly int $siteId, private readonly string $transactionalMessageId, private readonly array $from, private readonly string $subject, private readonly string $htmlBody, private readonly string $plaintextBody, private readonly string $recipient, private readonly array $replyTo)\n    {\n    }\n    public function siteId() : int\n    {\n        return $this->siteId;\n    }\n    public function message() : array\n    {\n        return ['from' => $this->from, 'recipient' => $this->recipient, 'subject' => $this->subject, 'replyTo' => $this->replyTo, 'body' => ['html' => $this->htmlBody, 'plaintext' => $this->plaintextBody]];\n    }\n    public function transactionalMessageId() : string\n    {\n        return $this->transactionalMessageId;\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application;\n\nfinal class Message\n{\n    public function __construct(private readonly int $siteId, private readonly string $transactionalMessageId, private readonly array $from, private readonly string $subject, private readonly string $htmlBody, private readonly string $plaintextBody, private readonly string $recipient, private readonly array $replyTo)\n    {\n    }\n    public function siteId() : int\n    {\n        return $this->siteId;\n    }\n    public function message() : array\n    {\n        return ['from' => $this->from, 'recipient' => $this->recipient, 'subject' > $this->subject, 'replyTo' => $this->replyTo, 'body' => ['html' => $this->htmlBody, 'plaintext' => $this->plaintextBody]];\n    }\n    public function transactionalMessageId() : string\n    {\n        return $this->transactionalMessageId;\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Message.php",
        "originalStartLine": 31
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     }\n     public function message() : array\n     {\n-        return ['from' => $this->from, 'recipient' => $this->recipient, 'subject' => $this->subject, 'replyTo' => $this->replyTo, 'body' => ['html' => $this->htmlBody, 'plaintext' => $this->plaintextBody]];\n+        return ['from' => $this->from, 'recipient' => $this->recipient, 'subject' > $this->subject, 'replyTo' => $this->replyTo, 'body' => ['html' => $this->htmlBody, 'plaintext' => $this->plaintextBody]];\n     }\n     public function transactionalMessageId() : string\n     {",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S01]: Base table or view already exists: 1050 Table 'migrations' already exists (SQL: create table `migrations` (`id` int unsigned not null auto_increment primary key, `migration` varchar(255) not null, `batch` int not null) default character set utf8 collate 'utf8_unicode_ci')\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(157): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/InstallCommand.php(54): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->createRepository()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\InstallCommand->handle()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#13 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(40): Illuminate\\Console\\Command->runCommand()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(120): Illuminate\\Console\\Command->callSilent()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Factory.php(56): Illuminate\\Console\\View\\Components\\Task->render()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(122): Illuminate\\Console\\View\\Components\\Factory->__call()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(79): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->prepareDatabase()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#30 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#36 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#38 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#39 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#40 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#41 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#43 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#44 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#45 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#46 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#47 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#48 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#49 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#50 \/tmp\/infection\/interceptor.autoload.a95f9dba98fee5f7236fe8667215f0fb.infection.php(13): require_once('...')\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#53 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#54 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#55 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#56 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#57 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#58 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#59 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItem",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application;\n\nfinal class Message\n{\n    public function __construct(private readonly int $siteId, private readonly string $transactionalMessageId, private readonly array $from, private readonly string $subject, private readonly string $htmlBody, private readonly string $plaintextBody, private readonly string $recipient, private readonly array $replyTo)\n    {\n    }\n    public function siteId() : int\n    {\n        return $this->siteId;\n    }\n    public function message() : array\n    {\n        return ['from' => $this->from, 'recipient' => $this->recipient, 'subject' => $this->subject, 'replyTo' => $this->replyTo, 'body' => ['html' => $this->htmlBody, 'plaintext' => $this->plaintextBody]];\n    }\n    public function transactionalMessageId() : string\n    {\n        return $this->transactionalMessageId;\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application;\n\nfinal class Message\n{\n    public function __construct(private readonly int $siteId, private readonly string $transactionalMessageId, private readonly array $from, private readonly string $subject, private readonly string $htmlBody, private readonly string $plaintextBody, private readonly string $recipient, private readonly array $replyTo)\n    {\n    }\n    public function siteId() : int\n    {\n        return $this->siteId;\n    }\n    public function message() : array\n    {\n        return ['from' => $this->from, 'recipient' => $this->recipient, 'subject' => $this->subject, 'replyTo' => $this->replyTo, 'body' => ['html' > $this->htmlBody, 'plaintext' => $this->plaintextBody]];\n    }\n    public function transactionalMessageId() : string\n    {\n        return $this->transactionalMessageId;\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Message.php",
        "originalStartLine": 34
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     }\n     public function message() : array\n     {\n-        return ['from' => $this->from, 'recipient' => $this->recipient, 'subject' => $this->subject, 'replyTo' => $this->replyTo, 'body' => ['html' => $this->htmlBody, 'plaintext' => $this->plaintextBody]];\n+        return ['from' => $this->from, 'recipient' => $this->recipient, 'subject' => $this->subject, 'replyTo' => $this->replyTo, 'body' => ['html' > $this->htmlBody, 'plaintext' => $this->plaintextBody]];\n     }\n     public function transactionalMessageId() : string\n     {",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S01]: Base table or view already exists: 1050 Table 'schedules' already exists (SQL: create table `schedules` (`id` char(36) not null, `site_id` int not null, `automated_message_id` char(36) not null, `reference` varchar(255) not null, `reference_id` varchar(255) not null, `status` varchar(255) not null, `send_at` datetime not null, `sent_at` datetime null, `deleted_at` timestamp null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8 collate 'utf8_unicode_ci')\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_07_213230_create_schedules_table.php(27): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateSchedulesTable->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.8cee5549f0e4f4ad160a223fcf2e8076.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "PublicVisibility",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Dto\\AutomatedMessage;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\ScheduleArranger;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ScheduleRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ScheduleStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Schedule;\nfinal class AutomatedMessageScheduling\n{\n    private const RESERVATION_REFERENCE = 'Reservation';\n    public function __construct(private readonly ReservationRepositoryInterface $reservationRepository, private readonly ScheduleRepositoryInterface $scheduleRepository, private readonly ScheduleArranger $scheduleArranger)\n    {\n    }\n    public function whenActivated(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $this->buildForAutomatedMessage($siteId, $automatedMessage);\n    }\n    public function whenUpdated(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessage->id);\n        $this->buildForAutomatedMessage($siteId, $automatedMessage);\n    }\n    public function whenDeactivated(int $siteId, string $automatedMessageId) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessageId);\n    }\n    public function whenDeleted(int $siteId, string $automatedMessageId) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessageId);\n    }\n    private function buildForAutomatedMessage(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $filters = [...$automatedMessage->filters, ...$automatedMessage->triggerAction->filters()];\n        $reservations = $this->reservationRepository->filter($siteId, $filters);\n        $schedules = [];\n        foreach ($reservations as $reservation) {\n            $occurrenceDate = $reservation->triggerOccurrence($automatedMessage->triggerAction);\n            $sendAt = $this->scheduleArranger->sendAt(triggerValue: $automatedMessage->triggerValue, triggerTimeUnit: $automatedMessage->triggerTimeUnit, triggerTimeAspect: $automatedMessage->triggerTimeAspect, occurrence: $occurrenceDate);\n            $schedules[] = ['id' => Str::uuid(), 'site_id' => $automatedMessage->siteId, 'automated_message_id' => $automatedMessage->id, 'reference' => self::RESERVATION_REFERENCE, 'reference_id' => $reservation->id, 'status' => ScheduleStatus::SCHEDULED, 'send_at' => $sendAt];\n        }\n        Schedule::insert($schedules);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Dto\\AutomatedMessage;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\ScheduleArranger;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ScheduleRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ScheduleStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Schedule;\nfinal class AutomatedMessageScheduling\n{\n    private const RESERVATION_REFERENCE = 'Reservation';\n    public function __construct(private readonly ReservationRepositoryInterface $reservationRepository, private readonly ScheduleRepositoryInterface $scheduleRepository, private readonly ScheduleArranger $scheduleArranger)\n    {\n    }\n    protected function whenActivated(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $this->buildForAutomatedMessage($siteId, $automatedMessage);\n    }\n    public function whenUpdated(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessage->id);\n        $this->buildForAutomatedMessage($siteId, $automatedMessage);\n    }\n    public function whenDeactivated(int $siteId, string $automatedMessageId) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessageId);\n    }\n    public function whenDeleted(int $siteId, string $automatedMessageId) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessageId);\n    }\n    private function buildForAutomatedMessage(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $filters = [...$automatedMessage->filters, ...$automatedMessage->triggerAction->filters()];\n        $reservations = $this->reservationRepository->filter($siteId, $filters);\n        $schedules = [];\n        foreach ($reservations as $reservation) {\n            $occurrenceDate = $reservation->triggerOccurrence($automatedMessage->triggerAction);\n            $sendAt = $this->scheduleArranger->sendAt(triggerValue: $automatedMessage->triggerValue, triggerTimeUnit: $automatedMessage->triggerTimeUnit, triggerTimeAspect: $automatedMessage->triggerTimeAspect, occurrence: $occurrenceDate);\n            $schedules[] = ['id' => Str::uuid(), 'site_id' => $automatedMessage->siteId, 'automated_message_id' => $automatedMessage->id, 'reference' => self::RESERVATION_REFERENCE, 'reference_id' => $reservation->id, 'status' => ScheduleStatus::SCHEDULED, 'send_at' => $sendAt];\n        }\n        Schedule::insert($schedules);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Scheduling\/Reservations\/AutomatedMessageScheduling.php",
        "originalStartLine": 26
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     public function __construct(private readonly ReservationRepositoryInterface $reservationRepository, private readonly ScheduleRepositoryInterface $scheduleRepository, private readonly ScheduleArranger $scheduleArranger)\n     {\n     }\n-    public function whenActivated(int $siteId, AutomatedMessage $automatedMessage) : void\n+    protected function whenActivated(int $siteId, AutomatedMessage $automatedMessage) : void\n     {\n         $this->buildForAutomatedMessage($siteId, $automatedMessage);\n     }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: select `migration` from `migrations` order by `batch` asc, `migration` asc)\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(421): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(2630): Illuminate\\Database\\Connection->select()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(2844): Illuminate\\Database\\Query\\Builder->runSelect()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3154): Illuminate\\Database\\Query\\Builder->Illuminate\\Database\\Query\\{closure}()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(2846): Illuminate\\Database\\Query\\Builder->onceWithColumns()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(53): Illuminate\\Database\\Query\\Builder->pluck()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(112): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->getRan()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#17 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#28 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#30 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#31 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#32 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#36 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#37 \/tmp\/infection\/interceptor.autoload.c5524faf81be538ac5b6f11a4617285b.infection.php(13): require_once('...')\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#45 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#46 {main}"
    },
    {
      "mutator": {
        "mutatorName": "MethodCallRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Dto\\AutomatedMessage;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\ScheduleArranger;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ScheduleRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ScheduleStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Schedule;\nfinal class AutomatedMessageScheduling\n{\n    private const RESERVATION_REFERENCE = 'Reservation';\n    public function __construct(private readonly ReservationRepositoryInterface $reservationRepository, private readonly ScheduleRepositoryInterface $scheduleRepository, private readonly ScheduleArranger $scheduleArranger)\n    {\n    }\n    public function whenActivated(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $this->buildForAutomatedMessage($siteId, $automatedMessage);\n    }\n    public function whenUpdated(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessage->id);\n        $this->buildForAutomatedMessage($siteId, $automatedMessage);\n    }\n    public function whenDeactivated(int $siteId, string $automatedMessageId) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessageId);\n    }\n    public function whenDeleted(int $siteId, string $automatedMessageId) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessageId);\n    }\n    private function buildForAutomatedMessage(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $filters = [...$automatedMessage->filters, ...$automatedMessage->triggerAction->filters()];\n        $reservations = $this->reservationRepository->filter($siteId, $filters);\n        $schedules = [];\n        foreach ($reservations as $reservation) {\n            $occurrenceDate = $reservation->triggerOccurrence($automatedMessage->triggerAction);\n            $sendAt = $this->scheduleArranger->sendAt(triggerValue: $automatedMessage->triggerValue, triggerTimeUnit: $automatedMessage->triggerTimeUnit, triggerTimeAspect: $automatedMessage->triggerTimeAspect, occurrence: $occurrenceDate);\n            $schedules[] = ['id' => Str::uuid(), 'site_id' => $automatedMessage->siteId, 'automated_message_id' => $automatedMessage->id, 'reference' => self::RESERVATION_REFERENCE, 'reference_id' => $reservation->id, 'status' => ScheduleStatus::SCHEDULED, 'send_at' => $sendAt];\n        }\n        Schedule::insert($schedules);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Dto\\AutomatedMessage;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\ScheduleArranger;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ScheduleRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ScheduleStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Schedule;\nfinal class AutomatedMessageScheduling\n{\n    private const RESERVATION_REFERENCE = 'Reservation';\n    public function __construct(private readonly ReservationRepositoryInterface $reservationRepository, private readonly ScheduleRepositoryInterface $scheduleRepository, private readonly ScheduleArranger $scheduleArranger)\n    {\n    }\n    public function whenActivated(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        \n    }\n    public function whenUpdated(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessage->id);\n        $this->buildForAutomatedMessage($siteId, $automatedMessage);\n    }\n    public function whenDeactivated(int $siteId, string $automatedMessageId) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessageId);\n    }\n    public function whenDeleted(int $siteId, string $automatedMessageId) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessageId);\n    }\n    private function buildForAutomatedMessage(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $filters = [...$automatedMessage->filters, ...$automatedMessage->triggerAction->filters()];\n        $reservations = $this->reservationRepository->filter($siteId, $filters);\n        $schedules = [];\n        foreach ($reservations as $reservation) {\n            $occurrenceDate = $reservation->triggerOccurrence($automatedMessage->triggerAction);\n            $sendAt = $this->scheduleArranger->sendAt(triggerValue: $automatedMessage->triggerValue, triggerTimeUnit: $automatedMessage->triggerTimeUnit, triggerTimeAspect: $automatedMessage->triggerTimeAspect, occurrence: $occurrenceDate);\n            $schedules[] = ['id' => Str::uuid(), 'site_id' => $automatedMessage->siteId, 'automated_message_id' => $automatedMessage->id, 'reference' => self::RESERVATION_REFERENCE, 'reference_id' => $reservation->id, 'status' => ScheduleStatus::SCHEDULED, 'send_at' => $sendAt];\n        }\n        Schedule::insert($schedules);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Scheduling\/Reservations\/AutomatedMessageScheduling.php",
        "originalStartLine": 28
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     }\n     public function whenActivated(int $siteId, AutomatedMessage $automatedMessage) : void\n     {\n-        $this->buildForAutomatedMessage($siteId, $automatedMessage);\n+        \n     }\n     public function whenUpdated(int $siteId, AutomatedMessage $automatedMessage) : void\n     {",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S01]: Base table or view already exists: 1050 Table 'schedules' already exists (SQL: create table `schedules` (`id` char(36) not null, `site_id` int not null, `automated_message_id` char(36) not null, `reference` varchar(255) not null, `reference_id` varchar(255) not null, `status` varchar(255) not null, `send_at` datetime not null, `sent_at` datetime null, `deleted_at` timestamp null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8 collate 'utf8_unicode_ci')\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_07_213230_create_schedules_table.php(27): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateSchedulesTable->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.3bea3a601520f7977a6272be01fdedd2.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "PublicVisibility",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Dto\\AutomatedMessage;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\ScheduleArranger;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ScheduleRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ScheduleStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Schedule;\nfinal class AutomatedMessageScheduling\n{\n    private const RESERVATION_REFERENCE = 'Reservation';\n    public function __construct(private readonly ReservationRepositoryInterface $reservationRepository, private readonly ScheduleRepositoryInterface $scheduleRepository, private readonly ScheduleArranger $scheduleArranger)\n    {\n    }\n    public function whenActivated(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $this->buildForAutomatedMessage($siteId, $automatedMessage);\n    }\n    public function whenUpdated(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessage->id);\n        $this->buildForAutomatedMessage($siteId, $automatedMessage);\n    }\n    public function whenDeactivated(int $siteId, string $automatedMessageId) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessageId);\n    }\n    public function whenDeleted(int $siteId, string $automatedMessageId) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessageId);\n    }\n    private function buildForAutomatedMessage(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $filters = [...$automatedMessage->filters, ...$automatedMessage->triggerAction->filters()];\n        $reservations = $this->reservationRepository->filter($siteId, $filters);\n        $schedules = [];\n        foreach ($reservations as $reservation) {\n            $occurrenceDate = $reservation->triggerOccurrence($automatedMessage->triggerAction);\n            $sendAt = $this->scheduleArranger->sendAt(triggerValue: $automatedMessage->triggerValue, triggerTimeUnit: $automatedMessage->triggerTimeUnit, triggerTimeAspect: $automatedMessage->triggerTimeAspect, occurrence: $occurrenceDate);\n            $schedules[] = ['id' => Str::uuid(), 'site_id' => $automatedMessage->siteId, 'automated_message_id' => $automatedMessage->id, 'reference' => self::RESERVATION_REFERENCE, 'reference_id' => $reservation->id, 'status' => ScheduleStatus::SCHEDULED, 'send_at' => $sendAt];\n        }\n        Schedule::insert($schedules);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Dto\\AutomatedMessage;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\ScheduleArranger;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ScheduleRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ScheduleStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Schedule;\nfinal class AutomatedMessageScheduling\n{\n    private const RESERVATION_REFERENCE = 'Reservation';\n    public function __construct(private readonly ReservationRepositoryInterface $reservationRepository, private readonly ScheduleRepositoryInterface $scheduleRepository, private readonly ScheduleArranger $scheduleArranger)\n    {\n    }\n    public function whenActivated(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $this->buildForAutomatedMessage($siteId, $automatedMessage);\n    }\n    public function whenUpdated(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessage->id);\n        $this->buildForAutomatedMessage($siteId, $automatedMessage);\n    }\n    protected function whenDeactivated(int $siteId, string $automatedMessageId) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessageId);\n    }\n    public function whenDeleted(int $siteId, string $automatedMessageId) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessageId);\n    }\n    private function buildForAutomatedMessage(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $filters = [...$automatedMessage->filters, ...$automatedMessage->triggerAction->filters()];\n        $reservations = $this->reservationRepository->filter($siteId, $filters);\n        $schedules = [];\n        foreach ($reservations as $reservation) {\n            $occurrenceDate = $reservation->triggerOccurrence($automatedMessage->triggerAction);\n            $sendAt = $this->scheduleArranger->sendAt(triggerValue: $automatedMessage->triggerValue, triggerTimeUnit: $automatedMessage->triggerTimeUnit, triggerTimeAspect: $automatedMessage->triggerTimeAspect, occurrence: $occurrenceDate);\n            $schedules[] = ['id' => Str::uuid(), 'site_id' => $automatedMessage->siteId, 'automated_message_id' => $automatedMessage->id, 'reference' => self::RESERVATION_REFERENCE, 'reference_id' => $reservation->id, 'status' => ScheduleStatus::SCHEDULED, 'send_at' => $sendAt];\n        }\n        Schedule::insert($schedules);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Scheduling\/Reservations\/AutomatedMessageScheduling.php",
        "originalStartLine": 38
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessage->id);\n         $this->buildForAutomatedMessage($siteId, $automatedMessage);\n     }\n-    public function whenDeactivated(int $siteId, string $automatedMessageId) : void\n+    protected function whenDeactivated(int $siteId, string $automatedMessageId) : void\n     {\n         $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessageId);\n     }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: insert into `migrations` (`migration`, `batch`) values (2022_07_09_220313_create_template_settings, 1))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(497): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3198): Illuminate\\Database\\Connection->insert()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(107): Illuminate\\Database\\Query\\Builder->insert()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(211): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->log()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#17 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#28 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#30 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#31 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#32 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#36 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#37 \/tmp\/infection\/interceptor.autoload.6ed88b773e613ee6a024dea22997bf74.infection.php(13): require_once('...')\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#45 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#46 {main}"
    },
    {
      "mutator": {
        "mutatorName": "MethodCallRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Dto\\AutomatedMessage;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\ScheduleArranger;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ScheduleRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ScheduleStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Schedule;\nfinal class AutomatedMessageScheduling\n{\n    private const RESERVATION_REFERENCE = 'Reservation';\n    public function __construct(private readonly ReservationRepositoryInterface $reservationRepository, private readonly ScheduleRepositoryInterface $scheduleRepository, private readonly ScheduleArranger $scheduleArranger)\n    {\n    }\n    public function whenActivated(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $this->buildForAutomatedMessage($siteId, $automatedMessage);\n    }\n    public function whenUpdated(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessage->id);\n        $this->buildForAutomatedMessage($siteId, $automatedMessage);\n    }\n    public function whenDeactivated(int $siteId, string $automatedMessageId) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessageId);\n    }\n    public function whenDeleted(int $siteId, string $automatedMessageId) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessageId);\n    }\n    private function buildForAutomatedMessage(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $filters = [...$automatedMessage->filters, ...$automatedMessage->triggerAction->filters()];\n        $reservations = $this->reservationRepository->filter($siteId, $filters);\n        $schedules = [];\n        foreach ($reservations as $reservation) {\n            $occurrenceDate = $reservation->triggerOccurrence($automatedMessage->triggerAction);\n            $sendAt = $this->scheduleArranger->sendAt(triggerValue: $automatedMessage->triggerValue, triggerTimeUnit: $automatedMessage->triggerTimeUnit, triggerTimeAspect: $automatedMessage->triggerTimeAspect, occurrence: $occurrenceDate);\n            $schedules[] = ['id' => Str::uuid(), 'site_id' => $automatedMessage->siteId, 'automated_message_id' => $automatedMessage->id, 'reference' => self::RESERVATION_REFERENCE, 'reference_id' => $reservation->id, 'status' => ScheduleStatus::SCHEDULED, 'send_at' => $sendAt];\n        }\n        Schedule::insert($schedules);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Dto\\AutomatedMessage;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\ScheduleArranger;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ScheduleRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ScheduleStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Schedule;\nfinal class AutomatedMessageScheduling\n{\n    private const RESERVATION_REFERENCE = 'Reservation';\n    public function __construct(private readonly ReservationRepositoryInterface $reservationRepository, private readonly ScheduleRepositoryInterface $scheduleRepository, private readonly ScheduleArranger $scheduleArranger)\n    {\n    }\n    public function whenActivated(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $this->buildForAutomatedMessage($siteId, $automatedMessage);\n    }\n    public function whenUpdated(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessage->id);\n        $this->buildForAutomatedMessage($siteId, $automatedMessage);\n    }\n    public function whenDeactivated(int $siteId, string $automatedMessageId) : void\n    {\n        \n    }\n    public function whenDeleted(int $siteId, string $automatedMessageId) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessageId);\n    }\n    private function buildForAutomatedMessage(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $filters = [...$automatedMessage->filters, ...$automatedMessage->triggerAction->filters()];\n        $reservations = $this->reservationRepository->filter($siteId, $filters);\n        $schedules = [];\n        foreach ($reservations as $reservation) {\n            $occurrenceDate = $reservation->triggerOccurrence($automatedMessage->triggerAction);\n            $sendAt = $this->scheduleArranger->sendAt(triggerValue: $automatedMessage->triggerValue, triggerTimeUnit: $automatedMessage->triggerTimeUnit, triggerTimeAspect: $automatedMessage->triggerTimeAspect, occurrence: $occurrenceDate);\n            $schedules[] = ['id' => Str::uuid(), 'site_id' => $automatedMessage->siteId, 'automated_message_id' => $automatedMessage->id, 'reference' => self::RESERVATION_REFERENCE, 'reference_id' => $reservation->id, 'status' => ScheduleStatus::SCHEDULED, 'send_at' => $sendAt];\n        }\n        Schedule::insert($schedules);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Scheduling\/Reservations\/AutomatedMessageScheduling.php",
        "originalStartLine": 40
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     }\n     public function whenDeactivated(int $siteId, string $automatedMessageId) : void\n     {\n-        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessageId);\n+        \n     }\n     public function whenDeleted(int $siteId, string $automatedMessageId) : void\n     {",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.schedules' doesn't exist (SQL: alter table `schedules` add primary key `schedules_id_primary`(`id`))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_07_213230_create_schedules_table.php(27): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateSchedulesTable->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.2a7271bdd06cb907f2ad16fd3f7108db.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "PublicVisibility",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Dto\\AutomatedMessage;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\ScheduleArranger;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ScheduleRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ScheduleStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Schedule;\nfinal class AutomatedMessageScheduling\n{\n    private const RESERVATION_REFERENCE = 'Reservation';\n    public function __construct(private readonly ReservationRepositoryInterface $reservationRepository, private readonly ScheduleRepositoryInterface $scheduleRepository, private readonly ScheduleArranger $scheduleArranger)\n    {\n    }\n    public function whenActivated(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $this->buildForAutomatedMessage($siteId, $automatedMessage);\n    }\n    public function whenUpdated(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessage->id);\n        $this->buildForAutomatedMessage($siteId, $automatedMessage);\n    }\n    public function whenDeactivated(int $siteId, string $automatedMessageId) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessageId);\n    }\n    public function whenDeleted(int $siteId, string $automatedMessageId) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessageId);\n    }\n    private function buildForAutomatedMessage(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $filters = [...$automatedMessage->filters, ...$automatedMessage->triggerAction->filters()];\n        $reservations = $this->reservationRepository->filter($siteId, $filters);\n        $schedules = [];\n        foreach ($reservations as $reservation) {\n            $occurrenceDate = $reservation->triggerOccurrence($automatedMessage->triggerAction);\n            $sendAt = $this->scheduleArranger->sendAt(triggerValue: $automatedMessage->triggerValue, triggerTimeUnit: $automatedMessage->triggerTimeUnit, triggerTimeAspect: $automatedMessage->triggerTimeAspect, occurrence: $occurrenceDate);\n            $schedules[] = ['id' => Str::uuid(), 'site_id' => $automatedMessage->siteId, 'automated_message_id' => $automatedMessage->id, 'reference' => self::RESERVATION_REFERENCE, 'reference_id' => $reservation->id, 'status' => ScheduleStatus::SCHEDULED, 'send_at' => $sendAt];\n        }\n        Schedule::insert($schedules);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Dto\\AutomatedMessage;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\ScheduleArranger;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ScheduleRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ScheduleStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Schedule;\nfinal class AutomatedMessageScheduling\n{\n    private const RESERVATION_REFERENCE = 'Reservation';\n    public function __construct(private readonly ReservationRepositoryInterface $reservationRepository, private readonly ScheduleRepositoryInterface $scheduleRepository, private readonly ScheduleArranger $scheduleArranger)\n    {\n    }\n    public function whenActivated(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $this->buildForAutomatedMessage($siteId, $automatedMessage);\n    }\n    public function whenUpdated(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessage->id);\n        $this->buildForAutomatedMessage($siteId, $automatedMessage);\n    }\n    public function whenDeactivated(int $siteId, string $automatedMessageId) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessageId);\n    }\n    protected function whenDeleted(int $siteId, string $automatedMessageId) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessageId);\n    }\n    private function buildForAutomatedMessage(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $filters = [...$automatedMessage->filters, ...$automatedMessage->triggerAction->filters()];\n        $reservations = $this->reservationRepository->filter($siteId, $filters);\n        $schedules = [];\n        foreach ($reservations as $reservation) {\n            $occurrenceDate = $reservation->triggerOccurrence($automatedMessage->triggerAction);\n            $sendAt = $this->scheduleArranger->sendAt(triggerValue: $automatedMessage->triggerValue, triggerTimeUnit: $automatedMessage->triggerTimeUnit, triggerTimeAspect: $automatedMessage->triggerTimeAspect, occurrence: $occurrenceDate);\n            $schedules[] = ['id' => Str::uuid(), 'site_id' => $automatedMessage->siteId, 'automated_message_id' => $automatedMessage->id, 'reference' => self::RESERVATION_REFERENCE, 'reference_id' => $reservation->id, 'status' => ScheduleStatus::SCHEDULED, 'send_at' => $sendAt];\n        }\n        Schedule::insert($schedules);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Scheduling\/Reservations\/AutomatedMessageScheduling.php",
        "originalStartLine": 43
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     {\n         $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessageId);\n     }\n-    public function whenDeleted(int $siteId, string $automatedMessageId) : void\n+    protected function whenDeleted(int $siteId, string $automatedMessageId) : void\n     {\n         $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessageId);\n     }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S01]: Base table or view already exists: 1050 Table 'automated_messages' already exists (SQL: create table `automated_messages` (`id` char(36) not null, `site_id` int not null, `name` varchar(255) not null, `reply_to` varchar(255) not null, `trigger_time_unit` varchar(255) not null, `trigger_value` int not null, `trigger_time_aspect` varchar(255) not null, `trigger_action` varchar(255) not null, `last_message_sent_at` datetime null, `is_active` tinyint(1) not null default '0', `deleted_at` timestamp null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8 collate 'utf8_unicode_ci')\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_07_205040_create_automated_messages_table.php(27): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateAutomatedMessagesTable->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.badff5ed0ecd87e53d35c0cc505c8337.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "MethodCallRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Dto\\AutomatedMessage;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\ScheduleArranger;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ScheduleRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ScheduleStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Schedule;\nfinal class AutomatedMessageScheduling\n{\n    private const RESERVATION_REFERENCE = 'Reservation';\n    public function __construct(private readonly ReservationRepositoryInterface $reservationRepository, private readonly ScheduleRepositoryInterface $scheduleRepository, private readonly ScheduleArranger $scheduleArranger)\n    {\n    }\n    public function whenActivated(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $this->buildForAutomatedMessage($siteId, $automatedMessage);\n    }\n    public function whenUpdated(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessage->id);\n        $this->buildForAutomatedMessage($siteId, $automatedMessage);\n    }\n    public function whenDeactivated(int $siteId, string $automatedMessageId) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessageId);\n    }\n    public function whenDeleted(int $siteId, string $automatedMessageId) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessageId);\n    }\n    private function buildForAutomatedMessage(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $filters = [...$automatedMessage->filters, ...$automatedMessage->triggerAction->filters()];\n        $reservations = $this->reservationRepository->filter($siteId, $filters);\n        $schedules = [];\n        foreach ($reservations as $reservation) {\n            $occurrenceDate = $reservation->triggerOccurrence($automatedMessage->triggerAction);\n            $sendAt = $this->scheduleArranger->sendAt(triggerValue: $automatedMessage->triggerValue, triggerTimeUnit: $automatedMessage->triggerTimeUnit, triggerTimeAspect: $automatedMessage->triggerTimeAspect, occurrence: $occurrenceDate);\n            $schedules[] = ['id' => Str::uuid(), 'site_id' => $automatedMessage->siteId, 'automated_message_id' => $automatedMessage->id, 'reference' => self::RESERVATION_REFERENCE, 'reference_id' => $reservation->id, 'status' => ScheduleStatus::SCHEDULED, 'send_at' => $sendAt];\n        }\n        Schedule::insert($schedules);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Dto\\AutomatedMessage;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\ScheduleArranger;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ScheduleRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ScheduleStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Schedule;\nfinal class AutomatedMessageScheduling\n{\n    private const RESERVATION_REFERENCE = 'Reservation';\n    public function __construct(private readonly ReservationRepositoryInterface $reservationRepository, private readonly ScheduleRepositoryInterface $scheduleRepository, private readonly ScheduleArranger $scheduleArranger)\n    {\n    }\n    public function whenActivated(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $this->buildForAutomatedMessage($siteId, $automatedMessage);\n    }\n    public function whenUpdated(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessage->id);\n        $this->buildForAutomatedMessage($siteId, $automatedMessage);\n    }\n    public function whenDeactivated(int $siteId, string $automatedMessageId) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessageId);\n    }\n    public function whenDeleted(int $siteId, string $automatedMessageId) : void\n    {\n        \n    }\n    private function buildForAutomatedMessage(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $filters = [...$automatedMessage->filters, ...$automatedMessage->triggerAction->filters()];\n        $reservations = $this->reservationRepository->filter($siteId, $filters);\n        $schedules = [];\n        foreach ($reservations as $reservation) {\n            $occurrenceDate = $reservation->triggerOccurrence($automatedMessage->triggerAction);\n            $sendAt = $this->scheduleArranger->sendAt(triggerValue: $automatedMessage->triggerValue, triggerTimeUnit: $automatedMessage->triggerTimeUnit, triggerTimeAspect: $automatedMessage->triggerTimeAspect, occurrence: $occurrenceDate);\n            $schedules[] = ['id' => Str::uuid(), 'site_id' => $automatedMessage->siteId, 'automated_message_id' => $automatedMessage->id, 'reference' => self::RESERVATION_REFERENCE, 'reference_id' => $reservation->id, 'status' => ScheduleStatus::SCHEDULED, 'send_at' => $sendAt];\n        }\n        Schedule::insert($schedules);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Scheduling\/Reservations\/AutomatedMessageScheduling.php",
        "originalStartLine": 45
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     }\n     public function whenDeleted(int $siteId, string $automatedMessageId) : void\n     {\n-        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessageId);\n+        \n     }\n     private function buildForAutomatedMessage(int $siteId, AutomatedMessage $automatedMessage) : void\n     {",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: insert into `migrations` (`migration`, `batch`) values (2022_07_07_213230_create_schedules_table, 1))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(497): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3198): Illuminate\\Database\\Connection->insert()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(107): Illuminate\\Database\\Query\\Builder->insert()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(211): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->log()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#17 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#28 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#30 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#31 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#32 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#36 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#37 \/tmp\/infection\/interceptor.autoload.9d3b7abc13e75912534cc69eb2711a7d.infection.php(13): require_once('...')\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#45 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#46 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItem",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Dto\\AutomatedMessage;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\ScheduleArranger;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ScheduleRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ScheduleStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Schedule;\nfinal class AutomatedMessageScheduling\n{\n    private const RESERVATION_REFERENCE = 'Reservation';\n    public function __construct(private readonly ReservationRepositoryInterface $reservationRepository, private readonly ScheduleRepositoryInterface $scheduleRepository, private readonly ScheduleArranger $scheduleArranger)\n    {\n    }\n    public function whenActivated(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $this->buildForAutomatedMessage($siteId, $automatedMessage);\n    }\n    public function whenUpdated(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessage->id);\n        $this->buildForAutomatedMessage($siteId, $automatedMessage);\n    }\n    public function whenDeactivated(int $siteId, string $automatedMessageId) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessageId);\n    }\n    public function whenDeleted(int $siteId, string $automatedMessageId) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessageId);\n    }\n    private function buildForAutomatedMessage(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $filters = [...$automatedMessage->filters, ...$automatedMessage->triggerAction->filters()];\n        $reservations = $this->reservationRepository->filter($siteId, $filters);\n        $schedules = [];\n        foreach ($reservations as $reservation) {\n            $occurrenceDate = $reservation->triggerOccurrence($automatedMessage->triggerAction);\n            $sendAt = $this->scheduleArranger->sendAt(triggerValue: $automatedMessage->triggerValue, triggerTimeUnit: $automatedMessage->triggerTimeUnit, triggerTimeAspect: $automatedMessage->triggerTimeAspect, occurrence: $occurrenceDate);\n            $schedules[] = ['id' => Str::uuid(), 'site_id' => $automatedMessage->siteId, 'automated_message_id' => $automatedMessage->id, 'reference' => self::RESERVATION_REFERENCE, 'reference_id' => $reservation->id, 'status' => ScheduleStatus::SCHEDULED, 'send_at' => $sendAt];\n        }\n        Schedule::insert($schedules);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Dto\\AutomatedMessage;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\ScheduleArranger;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ScheduleRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ScheduleStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Schedule;\nfinal class AutomatedMessageScheduling\n{\n    private const RESERVATION_REFERENCE = 'Reservation';\n    public function __construct(private readonly ReservationRepositoryInterface $reservationRepository, private readonly ScheduleRepositoryInterface $scheduleRepository, private readonly ScheduleArranger $scheduleArranger)\n    {\n    }\n    public function whenActivated(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $this->buildForAutomatedMessage($siteId, $automatedMessage);\n    }\n    public function whenUpdated(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessage->id);\n        $this->buildForAutomatedMessage($siteId, $automatedMessage);\n    }\n    public function whenDeactivated(int $siteId, string $automatedMessageId) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessageId);\n    }\n    public function whenDeleted(int $siteId, string $automatedMessageId) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessageId);\n    }\n    private function buildForAutomatedMessage(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $filters = [...$automatedMessage->filters, ...$automatedMessage->triggerAction->filters()];\n        $reservations = $this->reservationRepository->filter($siteId, $filters);\n        $schedules = [];\n        foreach ($reservations as $reservation) {\n            $occurrenceDate = $reservation->triggerOccurrence($automatedMessage->triggerAction);\n            $sendAt = $this->scheduleArranger->sendAt(triggerValue: $automatedMessage->triggerValue, triggerTimeUnit: $automatedMessage->triggerTimeUnit, triggerTimeAspect: $automatedMessage->triggerTimeAspect, occurrence: $occurrenceDate);\n            $schedules[] = ['id' => Str::uuid(), 'site_id' => $automatedMessage->siteId, 'automated_message_id' > $automatedMessage->id, 'reference' => self::RESERVATION_REFERENCE, 'reference_id' => $reservation->id, 'status' => ScheduleStatus::SCHEDULED, 'send_at' => $sendAt];\n        }\n        Schedule::insert($schedules);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Scheduling\/Reservations\/AutomatedMessageScheduling.php",
        "originalStartLine": 69
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         foreach ($reservations as $reservation) {\n             $occurrenceDate = $reservation->triggerOccurrence($automatedMessage->triggerAction);\n             $sendAt = $this->scheduleArranger->sendAt(triggerValue: $automatedMessage->triggerValue, triggerTimeUnit: $automatedMessage->triggerTimeUnit, triggerTimeAspect: $automatedMessage->triggerTimeAspect, occurrence: $occurrenceDate);\n-            $schedules[] = ['id' => Str::uuid(), 'site_id' => $automatedMessage->siteId, 'automated_message_id' => $automatedMessage->id, 'reference' => self::RESERVATION_REFERENCE, 'reference_id' => $reservation->id, 'status' => ScheduleStatus::SCHEDULED, 'send_at' => $sendAt];\n+            $schedules[] = ['id' => Str::uuid(), 'site_id' => $automatedMessage->siteId, 'automated_message_id' > $automatedMessage->id, 'reference' => self::RESERVATION_REFERENCE, 'reference_id' => $reservation->id, 'status' => ScheduleStatus::SCHEDULED, 'send_at' => $sendAt];\n         }\n         Schedule::insert($schedules);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: select `migration` from `migrations` order by `batch` asc, `migration` asc)\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(421): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(2630): Illuminate\\Database\\Connection->select()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(2844): Illuminate\\Database\\Query\\Builder->runSelect()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3154): Illuminate\\Database\\Query\\Builder->Illuminate\\Database\\Query\\{closure}()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(2846): Illuminate\\Database\\Query\\Builder->onceWithColumns()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(53): Illuminate\\Database\\Query\\Builder->pluck()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(112): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->getRan()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#17 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#28 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#30 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#31 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#32 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#36 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#37 \/tmp\/infection\/interceptor.autoload.1639f437c7cd7e94769dc4dc8d271fb2.infection.php(13): require_once('...')\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#45 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#46 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItem",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Dto\\AutomatedMessage;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\ScheduleArranger;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ScheduleRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ScheduleStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Schedule;\nfinal class AutomatedMessageScheduling\n{\n    private const RESERVATION_REFERENCE = 'Reservation';\n    public function __construct(private readonly ReservationRepositoryInterface $reservationRepository, private readonly ScheduleRepositoryInterface $scheduleRepository, private readonly ScheduleArranger $scheduleArranger)\n    {\n    }\n    public function whenActivated(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $this->buildForAutomatedMessage($siteId, $automatedMessage);\n    }\n    public function whenUpdated(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessage->id);\n        $this->buildForAutomatedMessage($siteId, $automatedMessage);\n    }\n    public function whenDeactivated(int $siteId, string $automatedMessageId) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessageId);\n    }\n    public function whenDeleted(int $siteId, string $automatedMessageId) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessageId);\n    }\n    private function buildForAutomatedMessage(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $filters = [...$automatedMessage->filters, ...$automatedMessage->triggerAction->filters()];\n        $reservations = $this->reservationRepository->filter($siteId, $filters);\n        $schedules = [];\n        foreach ($reservations as $reservation) {\n            $occurrenceDate = $reservation->triggerOccurrence($automatedMessage->triggerAction);\n            $sendAt = $this->scheduleArranger->sendAt(triggerValue: $automatedMessage->triggerValue, triggerTimeUnit: $automatedMessage->triggerTimeUnit, triggerTimeAspect: $automatedMessage->triggerTimeAspect, occurrence: $occurrenceDate);\n            $schedules[] = ['id' => Str::uuid(), 'site_id' => $automatedMessage->siteId, 'automated_message_id' => $automatedMessage->id, 'reference' => self::RESERVATION_REFERENCE, 'reference_id' => $reservation->id, 'status' => ScheduleStatus::SCHEDULED, 'send_at' => $sendAt];\n        }\n        Schedule::insert($schedules);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Dto\\AutomatedMessage;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\ScheduleArranger;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ScheduleRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ScheduleStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Schedule;\nfinal class AutomatedMessageScheduling\n{\n    private const RESERVATION_REFERENCE = 'Reservation';\n    public function __construct(private readonly ReservationRepositoryInterface $reservationRepository, private readonly ScheduleRepositoryInterface $scheduleRepository, private readonly ScheduleArranger $scheduleArranger)\n    {\n    }\n    public function whenActivated(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $this->buildForAutomatedMessage($siteId, $automatedMessage);\n    }\n    public function whenUpdated(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessage->id);\n        $this->buildForAutomatedMessage($siteId, $automatedMessage);\n    }\n    public function whenDeactivated(int $siteId, string $automatedMessageId) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessageId);\n    }\n    public function whenDeleted(int $siteId, string $automatedMessageId) : void\n    {\n        $this->scheduleRepository->removeByAutomatedMessage($siteId, $automatedMessageId);\n    }\n    private function buildForAutomatedMessage(int $siteId, AutomatedMessage $automatedMessage) : void\n    {\n        $filters = [...$automatedMessage->filters, ...$automatedMessage->triggerAction->filters()];\n        $reservations = $this->reservationRepository->filter($siteId, $filters);\n        $schedules = [];\n        foreach ($reservations as $reservation) {\n            $occurrenceDate = $reservation->triggerOccurrence($automatedMessage->triggerAction);\n            $sendAt = $this->scheduleArranger->sendAt(triggerValue: $automatedMessage->triggerValue, triggerTimeUnit: $automatedMessage->triggerTimeUnit, triggerTimeAspect: $automatedMessage->triggerTimeAspect, occurrence: $occurrenceDate);\n            $schedules[] = ['id' => Str::uuid(), 'site_id' => $automatedMessage->siteId, 'automated_message_id' => $automatedMessage->id, 'reference' => self::RESERVATION_REFERENCE, 'reference_id' > $reservation->id, 'status' => ScheduleStatus::SCHEDULED, 'send_at' => $sendAt];\n        }\n        Schedule::insert($schedules);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Scheduling\/Reservations\/AutomatedMessageScheduling.php",
        "originalStartLine": 71
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         foreach ($reservations as $reservation) {\n             $occurrenceDate = $reservation->triggerOccurrence($automatedMessage->triggerAction);\n             $sendAt = $this->scheduleArranger->sendAt(triggerValue: $automatedMessage->triggerValue, triggerTimeUnit: $automatedMessage->triggerTimeUnit, triggerTimeAspect: $automatedMessage->triggerTimeAspect, occurrence: $occurrenceDate);\n-            $schedules[] = ['id' => Str::uuid(), 'site_id' => $automatedMessage->siteId, 'automated_message_id' => $automatedMessage->id, 'reference' => self::RESERVATION_REFERENCE, 'reference_id' => $reservation->id, 'status' => ScheduleStatus::SCHEDULED, 'send_at' => $sendAt];\n+            $schedules[] = ['id' => Str::uuid(), 'site_id' => $automatedMessage->siteId, 'automated_message_id' => $automatedMessage->id, 'reference' => self::RESERVATION_REFERENCE, 'reference_id' > $reservation->id, 'status' => ScheduleStatus::SCHEDULED, 'send_at' => $sendAt];\n         }\n         Schedule::insert($schedules);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: insert into `migrations` (`migration`, `batch`) values (2022_07_07_205040_create_automated_messages_table, 1))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(497): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3198): Illuminate\\Database\\Connection->insert()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(107): Illuminate\\Database\\Query\\Builder->insert()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(211): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->log()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#17 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#28 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#30 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#31 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#32 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#36 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#37 \/tmp\/infection\/interceptor.autoload.f96495a41e025db88d8f21ece91fcc6c.infection.php(13): require_once('...')\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#45 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#46 {main}"
    },
    {
      "mutator": {
        "mutatorName": "MethodCallRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Dto\\AutomatedMessage;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\ScheduleArranger;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ScheduleRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ScheduleStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Schedule;\nfinal class EventScheduling\n{\n    private const RESERVATION_REFERENCE = 'Reservation';\n    public function __construct(private readonly ReservationRepositoryInterface $reservationRepository, private readonly ScheduleRepositoryInterface $scheduleRepository, private readonly ScheduleArranger $scheduleArranger, private readonly AutomatedMessageQueryInterface $automatedMessageQuery)\n    {\n    }\n    public function whenReservationCreated(int $siteId, Reservation $reservation) : void\n    {\n        $this->build($siteId, $reservation);\n    }\n    public function whenReservationChanged(int $siteId, Reservation $reservation) : void\n    {\n        $this->scheduleRepository->removeByReservation($siteId, $reservation->id);\n        $this->build($siteId, $reservation);\n    }\n    public function whenReservationCancelled(int $siteId, Reservation $reservation) : void\n    {\n        $this->scheduleRepository->removeByReservation($siteId, $reservation->id);\n        $this->build($siteId, $reservation);\n    }\n    public function whenReservationConfirmed(int $siteId, Reservation $reservation) : void\n    {\n        $this->build($siteId, $reservation);\n    }\n    private function build(int $siteId, Reservation $reservation) : void\n    {\n        $automatedMessages = $this->automatedMessageQuery->findAll($siteId);\n        foreach ($automatedMessages as $automatedMessage) {\n            $filteredReservation = $this->reservationRepository->filterByReservation(siteId: $siteId, filters: $this->filters($automatedMessage), reservationId: $reservation->id);\n            if (!$filteredReservation instanceof Reservation) {\n                break;\n            }\n            $occurrenceDate = $filteredReservation->triggerOccurrence($automatedMessage->triggerAction);\n            $sendAt = $this->scheduleArranger->sendAt(triggerValue: $automatedMessage->triggerValue, triggerTimeUnit: $automatedMessage->triggerTimeUnit, triggerTimeAspect: $automatedMessage->triggerTimeAspect, occurrence: $occurrenceDate);\n            Schedule::insert(['id' => Str::uuid(), 'site_id' => $automatedMessage->siteId, 'automated_message_id' => $automatedMessage->id, 'reference' => self::RESERVATION_REFERENCE, 'reference_id' => $reservation->id, 'status' => ScheduleStatus::SCHEDULED, 'send_at' => $sendAt]);\n        }\n    }\n    private function filters(AutomatedMessage $automatedMessage) : array\n    {\n        return [...$automatedMessage->filters, ...$automatedMessage->triggerAction->filters()];\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations;\n\nuse Illuminate\\Support\\Str;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Dto\\AutomatedMessage;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\AutomatedMessageQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\ScheduleArranger;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ScheduleRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ScheduleStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Schedule;\nfinal class EventScheduling\n{\n    private const RESERVATION_REFERENCE = 'Reservation';\n    public function __construct(private readonly ReservationRepositoryInterface $reservationRepository, private readonly ScheduleRepositoryInterface $scheduleRepository, private readonly ScheduleArranger $scheduleArranger, private readonly AutomatedMessageQueryInterface $automatedMessageQuery)\n    {\n    }\n    public function whenReservationCreated(int $siteId, Reservation $reservation) : void\n    {\n        $this->build($siteId, $reservation);\n    }\n    public function whenReservationChanged(int $siteId, Reservation $reservation) : void\n    {\n        $this->scheduleRepository->removeByReservation($siteId, $reservation->id);\n        $this->build($siteId, $reservation);\n    }\n    public function whenReservationCancelled(int $siteId, Reservation $reservation) : void\n    {\n        $this->scheduleRepository->removeByReservation($siteId, $reservation->id);\n        $this->build($siteId, $reservation);\n    }\n    public function whenReservationConfirmed(int $siteId, Reservation $reservation) : void\n    {\n        \n    }\n    private function build(int $siteId, Reservation $reservation) : void\n    {\n        $automatedMessages = $this->automatedMessageQuery->findAll($siteId);\n        foreach ($automatedMessages as $automatedMessage) {\n            $filteredReservation = $this->reservationRepository->filterByReservation(siteId: $siteId, filters: $this->filters($automatedMessage), reservationId: $reservation->id);\n            if (!$filteredReservation instanceof Reservation) {\n                break;\n            }\n            $occurrenceDate = $filteredReservation->triggerOccurrence($automatedMessage->triggerAction);\n            $sendAt = $this->scheduleArranger->sendAt(triggerValue: $automatedMessage->triggerValue, triggerTimeUnit: $automatedMessage->triggerTimeUnit, triggerTimeAspect: $automatedMessage->triggerTimeAspect, occurrence: $occurrenceDate);\n            Schedule::insert(['id' => Str::uuid(), 'site_id' => $automatedMessage->siteId, 'automated_message_id' => $automatedMessage->id, 'reference' => self::RESERVATION_REFERENCE, 'reference_id' => $reservation->id, 'status' => ScheduleStatus::SCHEDULED, 'send_at' => $sendAt]);\n        }\n    }\n    private function filters(AutomatedMessage $automatedMessage) : array\n    {\n        return [...$automatedMessage->filters, ...$automatedMessage->triggerAction->filters()];\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Scheduling\/Reservations\/EventScheduling.php",
        "originalStartLine": 50
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     }\n     public function whenReservationConfirmed(int $siteId, Reservation $reservation) : void\n     {\n-        $this->build($siteId, $reservation);\n+        \n     }\n     private function build(int $siteId, Reservation $reservation) : void\n     {",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1051 Unknown table 'automated_messages.automated_messages,automated_messages.filters,automated_messages.migrations,au...' (SQL: drop table `automated_messages`,`filters`,`migrations`,`reservations`,`schedules`,`template_settings`)\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/MySqlBuilder.php(87): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(82): Illuminate\\Database\\Schema\\MySqlBuilder->dropAllTables()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/WipeCommand.php(59): Illuminate\\Database\\Console\\WipeCommand->dropAllTables()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\WipeCommand->handle()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#11 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(40): Illuminate\\Console\\Command->runCommand()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(45): Illuminate\\Console\\Command->callSilent()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Factory.php(56): Illuminate\\Console\\View\\Components\\Task->render()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(49): Illuminate\\Console\\View\\Components\\Factory->__call()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#29 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#33 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#34 \/tmp\/infection\/interceptor.autoload.96785ba3a38bb7c783bed19ee1bb0054.infection.php(13): require_once('...')\n#35 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#36 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#37 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#42 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#43 {main}"
    },
    {
      "mutator": {
        "mutatorName": "PublicVisibility",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application;\n\nfinal class Site\n{\n    private function __construct(public int $siteId, public string $timezone)\n    {\n    }\n    public static function fromArray(array $data) : self\n    {\n        return new self((int) $data['siteId'], $data['timezone']);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application;\n\nfinal class Site\n{\n    private function __construct(public int $siteId, public string $timezone)\n    {\n    }\n    protected static function fromArray(array $data) : self\n    {\n        return new self((int) $data['siteId'], $data['timezone']);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Site.php",
        "originalStartLine": 15
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     private function __construct(public int $siteId, public string $timezone)\n     {\n     }\n-    public static function fromArray(array $data) : self\n+    protected static function fromArray(array $data) : self\n     {\n         return new self((int) $data['siteId'], $data['timezone']);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.template_settings' doesn't exist (SQL: alter table `template_settings` add constraint `template_settings_automated_message_id_foreign` foreign key (`automated_message_id`) references `automated_messages` (`id`))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_09_220313_create_template_settings.php(25): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateTemplateSettings->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.5dc57e6f6c17a098c8caa72a815e1bc8.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "CastInt",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application;\n\nfinal class Site\n{\n    private function __construct(public int $siteId, public string $timezone)\n    {\n    }\n    public static function fromArray(array $data) : self\n    {\n        return new self((int) $data['siteId'], $data['timezone']);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application;\n\nfinal class Site\n{\n    private function __construct(public int $siteId, public string $timezone)\n    {\n    }\n    public static function fromArray(array $data) : self\n    {\n        return new self($data['siteId'], $data['timezone']);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Site.php",
        "originalStartLine": 18
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     }\n     public static function fromArray(array $data) : self\n     {\n-        return new self((int) $data['siteId'], $data['timezone']);\n+        return new self($data['siteId'], $data['timezone']);\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: select `migration` from `migrations` order by `batch` asc, `migration` asc)\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(421): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(2630): Illuminate\\Database\\Connection->select()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(2844): Illuminate\\Database\\Query\\Builder->runSelect()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3154): Illuminate\\Database\\Query\\Builder->Illuminate\\Database\\Query\\{closure}()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(2846): Illuminate\\Database\\Query\\Builder->onceWithColumns()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(53): Illuminate\\Database\\Query\\Builder->pluck()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(685): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->getRan()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(127): Illuminate\\Database\\Migrations\\Migrator->hasRunAnyMigrations()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(79): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->prepareDatabase()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#18 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#29 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#31 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#32 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#33 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#36 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#37 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#38 \/tmp\/infection\/interceptor.autoload.f73d39dc15f35591e4a5a5c118550f09.infection.php(13): require_once('...')\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#45 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#46 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#47 {main}"
    },
    {
      "mutator": {
        "mutatorName": "PublicVisibility",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application;\n\nuse DateTime;\nuse DateTimeImmutable;\nuse DateTimeZone;\nfinal class TimeZoneConverter\n{\n    private const DEFAULT_TIMEZONE = 'Europe\/Warsaw';\n    private const DATE_FORMAT = 'Y-m-d H:i:s';\n    public static function fromLocal(DateTimeImmutable $date, string $localTimeZone) : DateTimeImmutable\n    {\n        $localDate = new DateTime($date->format(self::DATE_FORMAT), new DateTimeZone($localTimeZone));\n        $localDate->setTimezone(new DateTimeZone(self::DEFAULT_TIMEZONE));\n        return new DateTimeImmutable($localDate->format(self::DATE_FORMAT));\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application;\n\nuse DateTime;\nuse DateTimeImmutable;\nuse DateTimeZone;\nfinal class TimeZoneConverter\n{\n    private const DEFAULT_TIMEZONE = 'Europe\/Warsaw';\n    private const DATE_FORMAT = 'Y-m-d H:i:s';\n    protected static function fromLocal(DateTimeImmutable $date, string $localTimeZone) : DateTimeImmutable\n    {\n        $localDate = new DateTime($date->format(self::DATE_FORMAT), new DateTimeZone($localTimeZone));\n        $localDate->setTimezone(new DateTimeZone(self::DEFAULT_TIMEZONE));\n        return new DateTimeImmutable($localDate->format(self::DATE_FORMAT));\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/TimeZoneConverter.php",
        "originalStartLine": 17
      },
      "diff": "--- Original\n+++ New\n@@ @@\n {\n     private const DEFAULT_TIMEZONE = 'Europe\/Warsaw';\n     private const DATE_FORMAT = 'Y-m-d H:i:s';\n-    public static function fromLocal(DateTimeImmutable $date, string $localTimeZone) : DateTimeImmutable\n+    protected static function fromLocal(DateTimeImmutable $date, string $localTimeZone) : DateTimeImmutable\n     {\n         $localDate = new DateTime($date->format(self::DATE_FORMAT), new DateTimeZone($localTimeZone));\n         $localDate->setTimezone(new DateTimeZone(self::DEFAULT_TIMEZONE));",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: insert into `migrations` (`migration`, `batch`) values (2022_07_07_205040_create_automated_messages_table, 1))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(497): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3198): Illuminate\\Database\\Connection->insert()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(107): Illuminate\\Database\\Query\\Builder->insert()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(211): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->log()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#17 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#28 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#30 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#31 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#32 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#36 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#37 \/tmp\/infection\/interceptor.autoload.68190efaae96eeda20a596a8ea934b6f.infection.php(13): require_once('...')\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#45 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#46 {main}"
    },
    {
      "mutator": {
        "mutatorName": "MethodCallRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application;\n\nuse DateTime;\nuse DateTimeImmutable;\nuse DateTimeZone;\nfinal class TimeZoneConverter\n{\n    private const DEFAULT_TIMEZONE = 'Europe\/Warsaw';\n    private const DATE_FORMAT = 'Y-m-d H:i:s';\n    public static function fromLocal(DateTimeImmutable $date, string $localTimeZone) : DateTimeImmutable\n    {\n        $localDate = new DateTime($date->format(self::DATE_FORMAT), new DateTimeZone($localTimeZone));\n        $localDate->setTimezone(new DateTimeZone(self::DEFAULT_TIMEZONE));\n        return new DateTimeImmutable($localDate->format(self::DATE_FORMAT));\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application;\n\nuse DateTime;\nuse DateTimeImmutable;\nuse DateTimeZone;\nfinal class TimeZoneConverter\n{\n    private const DEFAULT_TIMEZONE = 'Europe\/Warsaw';\n    private const DATE_FORMAT = 'Y-m-d H:i:s';\n    public static function fromLocal(DateTimeImmutable $date, string $localTimeZone) : DateTimeImmutable\n    {\n        $localDate = new DateTime($date->format(self::DATE_FORMAT), new DateTimeZone($localTimeZone));\n        \n        return new DateTimeImmutable($localDate->format(self::DATE_FORMAT));\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/TimeZoneConverter.php",
        "originalStartLine": 20
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     public static function fromLocal(DateTimeImmutable $date, string $localTimeZone) : DateTimeImmutable\n     {\n         $localDate = new DateTime($date->format(self::DATE_FORMAT), new DateTimeZone($localTimeZone));\n-        $localDate->setTimezone(new DateTimeZone(self::DEFAULT_TIMEZONE));\n+        \n         return new DateTimeImmutable($localDate->format(self::DATE_FORMAT));\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: insert into `migrations` (`migration`, `batch`) values (2022_07_07_213230_create_schedules_table, 1))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(497): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3198): Illuminate\\Database\\Connection->insert()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(107): Illuminate\\Database\\Query\\Builder->insert()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(211): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->log()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#17 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#28 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#30 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#31 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#32 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#36 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#37 \/tmp\/infection\/interceptor.autoload.f27d02ff284cfc8ac39f4c86f60b4105.infection.php(13): require_once('...')\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#45 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#46 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItem",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Bus;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\EmailSenderInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Message;\nuse Profitroom\\Microservices\\Bus\\Message as BusMessage;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class EmailSender implements EmailSenderInterface\n{\n    private const SEND_TRANSACTIONAL_MESSAGE_KEY = 'command.marketing-email-sender.send-transactional-message';\n    public function __construct(private readonly MessageBusInterface $bus)\n    {\n    }\n    public function send(Message $message) : void\n    {\n        $this->bus->dispatch(new BusMessage(self::SEND_TRANSACTIONAL_MESSAGE_KEY, ['siteId' => $message->siteId(), 'transactionalMessageId' => $message->transactionalMessageId(), 'message' => $message->message()], ['!siteId' => $message->siteId()]));\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Bus;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\EmailSenderInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Message;\nuse Profitroom\\Microservices\\Bus\\Message as BusMessage;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class EmailSender implements EmailSenderInterface\n{\n    private const SEND_TRANSACTIONAL_MESSAGE_KEY = 'command.marketing-email-sender.send-transactional-message';\n    public function __construct(private readonly MessageBusInterface $bus)\n    {\n    }\n    public function send(Message $message) : void\n    {\n        $this->bus->dispatch(new BusMessage(self::SEND_TRANSACTIONAL_MESSAGE_KEY, ['siteId' > $message->siteId(), 'transactionalMessageId' => $message->transactionalMessageId(), 'message' => $message->message()], ['!siteId' => $message->siteId()]));\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Infrastructure\/Bus\/EmailSender.php",
        "originalStartLine": 25
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     }\n     public function send(Message $message) : void\n     {\n-        $this->bus->dispatch(new BusMessage(self::SEND_TRANSACTIONAL_MESSAGE_KEY, ['siteId' => $message->siteId(), 'transactionalMessageId' => $message->transactionalMessageId(), 'message' => $message->message()], ['!siteId' => $message->siteId()]));\n+        $this->bus->dispatch(new BusMessage(self::SEND_TRANSACTIONAL_MESSAGE_KEY, ['siteId' > $message->siteId(), 'transactionalMessageId' => $message->transactionalMessageId(), 'message' => $message->message()], ['!siteId' => $message->siteId()]));\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.schedules' doesn't exist (SQL: alter table `schedules` add constraint `schedules_automated_message_id_foreign` foreign key (`automated_message_id`) references `automated_messages` (`id`))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_07_213230_create_schedules_table.php(27): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateSchedulesTable->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.1311db6eff4152597a1c2e4b9d76d42e.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItem",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Bus;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\EmailSenderInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Message;\nuse Profitroom\\Microservices\\Bus\\Message as BusMessage;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class EmailSender implements EmailSenderInterface\n{\n    private const SEND_TRANSACTIONAL_MESSAGE_KEY = 'command.marketing-email-sender.send-transactional-message';\n    public function __construct(private readonly MessageBusInterface $bus)\n    {\n    }\n    public function send(Message $message) : void\n    {\n        $this->bus->dispatch(new BusMessage(self::SEND_TRANSACTIONAL_MESSAGE_KEY, ['siteId' => $message->siteId(), 'transactionalMessageId' => $message->transactionalMessageId(), 'message' => $message->message()], ['!siteId' => $message->siteId()]));\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Bus;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\EmailSenderInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Message;\nuse Profitroom\\Microservices\\Bus\\Message as BusMessage;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class EmailSender implements EmailSenderInterface\n{\n    private const SEND_TRANSACTIONAL_MESSAGE_KEY = 'command.marketing-email-sender.send-transactional-message';\n    public function __construct(private readonly MessageBusInterface $bus)\n    {\n    }\n    public function send(Message $message) : void\n    {\n        $this->bus->dispatch(new BusMessage(self::SEND_TRANSACTIONAL_MESSAGE_KEY, ['siteId' => $message->siteId(), 'transactionalMessageId' > $message->transactionalMessageId(), 'message' => $message->message()], ['!siteId' => $message->siteId()]));\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Infrastructure\/Bus\/EmailSender.php",
        "originalStartLine": 26
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     }\n     public function send(Message $message) : void\n     {\n-        $this->bus->dispatch(new BusMessage(self::SEND_TRANSACTIONAL_MESSAGE_KEY, ['siteId' => $message->siteId(), 'transactionalMessageId' => $message->transactionalMessageId(), 'message' => $message->message()], ['!siteId' => $message->siteId()]));\n+        $this->bus->dispatch(new BusMessage(self::SEND_TRANSACTIONAL_MESSAGE_KEY, ['siteId' => $message->siteId(), 'transactionalMessageId' > $message->transactionalMessageId(), 'message' => $message->message()], ['!siteId' => $message->siteId()]));\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.template_settings' doesn't exist (SQL: alter table `template_settings` add constraint `template_settings_automated_message_id_foreign` foreign key (`automated_message_id`) references `automated_messages` (`id`))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_09_220313_create_template_settings.php(25): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateTemplateSettings->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.2587a0b9af75f765f0aa4fc1839e81ac.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItem",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Bus;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\EmailSenderInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Message;\nuse Profitroom\\Microservices\\Bus\\Message as BusMessage;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class EmailSender implements EmailSenderInterface\n{\n    private const SEND_TRANSACTIONAL_MESSAGE_KEY = 'command.marketing-email-sender.send-transactional-message';\n    public function __construct(private readonly MessageBusInterface $bus)\n    {\n    }\n    public function send(Message $message) : void\n    {\n        $this->bus->dispatch(new BusMessage(self::SEND_TRANSACTIONAL_MESSAGE_KEY, ['siteId' => $message->siteId(), 'transactionalMessageId' => $message->transactionalMessageId(), 'message' => $message->message()], ['!siteId' => $message->siteId()]));\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Bus;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\EmailSenderInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Message;\nuse Profitroom\\Microservices\\Bus\\Message as BusMessage;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class EmailSender implements EmailSenderInterface\n{\n    private const SEND_TRANSACTIONAL_MESSAGE_KEY = 'command.marketing-email-sender.send-transactional-message';\n    public function __construct(private readonly MessageBusInterface $bus)\n    {\n    }\n    public function send(Message $message) : void\n    {\n        $this->bus->dispatch(new BusMessage(self::SEND_TRANSACTIONAL_MESSAGE_KEY, ['siteId' => $message->siteId(), 'transactionalMessageId' => $message->transactionalMessageId(), 'message' > $message->message()], ['!siteId' => $message->siteId()]));\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Infrastructure\/Bus\/EmailSender.php",
        "originalStartLine": 27
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     }\n     public function send(Message $message) : void\n     {\n-        $this->bus->dispatch(new BusMessage(self::SEND_TRANSACTIONAL_MESSAGE_KEY, ['siteId' => $message->siteId(), 'transactionalMessageId' => $message->transactionalMessageId(), 'message' => $message->message()], ['!siteId' => $message->siteId()]));\n+        $this->bus->dispatch(new BusMessage(self::SEND_TRANSACTIONAL_MESSAGE_KEY, ['siteId' => $message->siteId(), 'transactionalMessageId' => $message->transactionalMessageId(), 'message' > $message->message()], ['!siteId' => $message->siteId()]));\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: select max(`batch`) as aggregate from `migrations`)\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(421): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(2630): Illuminate\\Database\\Connection->select()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(2618): Illuminate\\Database\\Query\\Builder->runSelect()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3154): Illuminate\\Database\\Query\\Builder->Illuminate\\Database\\Query\\{closure}()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(2619): Illuminate\\Database\\Query\\Builder->onceWithColumns()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3081): Illuminate\\Database\\Query\\Builder->get()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3031): Illuminate\\Database\\Query\\Builder->aggregate()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(138): Illuminate\\Database\\Query\\Builder->max()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(128): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->getLastBatchNumber()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(161): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->getNextBatchNumber()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#21 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#32 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#34 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#35 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#36 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#38 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#39 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#40 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#41 \/tmp\/infection\/interceptor.autoload.1406908e7aa68ad95e0679a3cd16332b.infection.php(13): require_once('...')\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#45 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#49 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#50 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItemRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Bus;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\TemplateQueryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class MessageBuilder implements TemplateQueryInterface\n{\n    private const GET_TEMPLATE_QUERY_KEY = 'query.email-message-builder.get-template';\n    private const TEMPLATE_NAME = 'automated-messages';\n    public function __construct(private readonly MessageBusInterface $bus)\n    {\n    }\n    public function get(int $siteId, string $templateId, string $languageCode) : array\n    {\n        $query = new Message(self::GET_TEMPLATE_QUERY_KEY, ['template' => self::TEMPLATE_NAME, 'templateId' => $templateId, 'languageCode' => $languageCode], ['!siteId' => $siteId]);\n        $response = $this->bus->query($query, 30)->payload();\n        return $response['body'];\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Bus;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\TemplateQueryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class MessageBuilder implements TemplateQueryInterface\n{\n    private const GET_TEMPLATE_QUERY_KEY = 'query.email-message-builder.get-template';\n    private const TEMPLATE_NAME = 'automated-messages';\n    public function __construct(private readonly MessageBusInterface $bus)\n    {\n    }\n    public function get(int $siteId, string $templateId, string $languageCode) : array\n    {\n        $query = new Message(self::GET_TEMPLATE_QUERY_KEY, ['template' => self::TEMPLATE_NAME, 'templateId' => $templateId, 'languageCode' => $languageCode], []);\n        $response = $this->bus->query($query, 30)->payload();\n        return $response['body'];\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Infrastructure\/Bus\/MessageBuilder.php",
        "originalStartLine": 26
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     }\n     public function get(int $siteId, string $templateId, string $languageCode) : array\n     {\n-        $query = new Message(self::GET_TEMPLATE_QUERY_KEY, ['template' => self::TEMPLATE_NAME, 'templateId' => $templateId, 'languageCode' => $languageCode], ['!siteId' => $siteId]);\n+        $query = new Message(self::GET_TEMPLATE_QUERY_KEY, ['template' => self::TEMPLATE_NAME, 'templateId' => $templateId, 'languageCode' => $languageCode], []);\n         $response = $this->bus->query($query, 30)->payload();\n         return $response['body'];\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S01]: Base table or view already exists: 1050 Table 'schedules' already exists (SQL: create table `schedules` (`id` char(36) not null, `site_id` int not null, `automated_message_id` char(36) not null, `reference` varchar(255) not null, `reference_id` varchar(255) not null, `status` varchar(255) not null, `send_at` datetime not null, `sent_at` datetime null, `deleted_at` timestamp null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8 collate 'utf8_unicode_ci')\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_07_213230_create_schedules_table.php(27): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateSchedulesTable->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.6654d8d8f41a4aeb3212d35ce0672b5c.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "DecrementInteger",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Bus;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\TemplateQueryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class MessageBuilder implements TemplateQueryInterface\n{\n    private const GET_TEMPLATE_QUERY_KEY = 'query.email-message-builder.get-template';\n    private const TEMPLATE_NAME = 'automated-messages';\n    public function __construct(private readonly MessageBusInterface $bus)\n    {\n    }\n    public function get(int $siteId, string $templateId, string $languageCode) : array\n    {\n        $query = new Message(self::GET_TEMPLATE_QUERY_KEY, ['template' => self::TEMPLATE_NAME, 'templateId' => $templateId, 'languageCode' => $languageCode], ['!siteId' => $siteId]);\n        $response = $this->bus->query($query, 30)->payload();\n        return $response['body'];\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Bus;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\TemplateQueryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class MessageBuilder implements TemplateQueryInterface\n{\n    private const GET_TEMPLATE_QUERY_KEY = 'query.email-message-builder.get-template';\n    private const TEMPLATE_NAME = 'automated-messages';\n    public function __construct(private readonly MessageBusInterface $bus)\n    {\n    }\n    public function get(int $siteId, string $templateId, string $languageCode) : array\n    {\n        $query = new Message(self::GET_TEMPLATE_QUERY_KEY, ['template' => self::TEMPLATE_NAME, 'templateId' => $templateId, 'languageCode' => $languageCode], ['!siteId' => $siteId]);\n        $response = $this->bus->query($query, 29)->payload();\n        return $response['body'];\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Infrastructure\/Bus\/MessageBuilder.php",
        "originalStartLine": 28
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     public function get(int $siteId, string $templateId, string $languageCode) : array\n     {\n         $query = new Message(self::GET_TEMPLATE_QUERY_KEY, ['template' => self::TEMPLATE_NAME, 'templateId' => $templateId, 'languageCode' => $languageCode], ['!siteId' => $siteId]);\n-        $response = $this->bus->query($query, 30)->payload();\n+        $response = $this->bus->query($query, 29)->payload();\n         return $response['body'];\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: select max(`batch`) as aggregate from `migrations`)\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(421): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(2630): Illuminate\\Database\\Connection->select()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(2618): Illuminate\\Database\\Query\\Builder->runSelect()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3154): Illuminate\\Database\\Query\\Builder->Illuminate\\Database\\Query\\{closure}()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(2619): Illuminate\\Database\\Query\\Builder->onceWithColumns()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3081): Illuminate\\Database\\Query\\Builder->get()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3031): Illuminate\\Database\\Query\\Builder->aggregate()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(138): Illuminate\\Database\\Query\\Builder->max()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(128): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->getLastBatchNumber()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(161): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->getNextBatchNumber()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#21 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#32 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#34 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#35 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#36 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#38 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#39 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#40 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#41 \/tmp\/infection\/interceptor.autoload.abc9076fef4eae7c95f78c87da80f96e.infection.php(13): require_once('...')\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#45 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#49 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#50 {main}"
    },
    {
      "mutator": {
        "mutatorName": "IncrementInteger",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Bus;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\TemplateQueryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class MessageBuilder implements TemplateQueryInterface\n{\n    private const GET_TEMPLATE_QUERY_KEY = 'query.email-message-builder.get-template';\n    private const TEMPLATE_NAME = 'automated-messages';\n    public function __construct(private readonly MessageBusInterface $bus)\n    {\n    }\n    public function get(int $siteId, string $templateId, string $languageCode) : array\n    {\n        $query = new Message(self::GET_TEMPLATE_QUERY_KEY, ['template' => self::TEMPLATE_NAME, 'templateId' => $templateId, 'languageCode' => $languageCode], ['!siteId' => $siteId]);\n        $response = $this->bus->query($query, 30)->payload();\n        return $response['body'];\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Bus;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\TemplateQueryInterface;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class MessageBuilder implements TemplateQueryInterface\n{\n    private const GET_TEMPLATE_QUERY_KEY = 'query.email-message-builder.get-template';\n    private const TEMPLATE_NAME = 'automated-messages';\n    public function __construct(private readonly MessageBusInterface $bus)\n    {\n    }\n    public function get(int $siteId, string $templateId, string $languageCode) : array\n    {\n        $query = new Message(self::GET_TEMPLATE_QUERY_KEY, ['template' => self::TEMPLATE_NAME, 'templateId' => $templateId, 'languageCode' => $languageCode], ['!siteId' => $siteId]);\n        $response = $this->bus->query($query, 31)->payload();\n        return $response['body'];\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Infrastructure\/Bus\/MessageBuilder.php",
        "originalStartLine": 28
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     public function get(int $siteId, string $templateId, string $languageCode) : array\n     {\n         $query = new Message(self::GET_TEMPLATE_QUERY_KEY, ['template' => self::TEMPLATE_NAME, 'templateId' => $templateId, 'languageCode' => $languageCode], ['!siteId' => $siteId]);\n-        $response = $this->bus->query($query, 30)->payload();\n+        $response = $this->bus->query($query, 31)->payload();\n         return $response['body'];\n     }\n }",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.filters' doesn't exist (SQL: alter table `filters` add constraint `filters_automated_message_id_foreign` foreign key (`automated_message_id`) references `automated_messages` (`id`))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Blueprint.php(109): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(394): Illuminate\\Database\\Schema\\Blueprint->build()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Schema\/Builder.php(257): Illuminate\\Database\\Schema\\Builder->build()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Support\/Facades\/Facade.php(337): Illuminate\\Database\\Schema\\Builder->create()\n#6 \/var\/www\/database\/migrations\/2022_07_09_224222_create_filters_table.php(23): Illuminate\\Support\\Facades\\Facade::__callStatic()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(474): CreateFiltersTable->up()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(392): Illuminate\\Database\\Migrations\\Migrator->runMethod()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(401): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->runMigration()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/View\/Components\/Task.php(36): Illuminate\\Database\\Migrations\\Migrator->Illuminate\\Database\\Migrations\\{closure}()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(732): Illuminate\\Console\\View\\Components\\Task->render()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(206): Illuminate\\Database\\Migrations\\Migrator->write()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#17 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#25 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#28 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#30 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#31 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#32 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#36 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#37 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#38 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#39 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#40 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#41 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#42 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#43 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#44 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#45 \/tmp\/infection\/interceptor.autoload.6e25d363137541d3a825e7a993a8068d.infection.php(13): require_once('...')\n#46 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#47 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#48 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#49 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#50 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#51 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#52 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#53 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#54 {main}"
    },
    {
      "mutator": {
        "mutatorName": "ArrayItemRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Bus;\n\nuse Illuminate\\Support\\Facades\\Log;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Site;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nuse Throwable;\nfinal class Sites implements SitesQueryInterface\n{\n    public function __construct(private readonly MessageBusInterface $bus)\n    {\n    }\n    public function get(int $siteId) : Site\n    {\n        $query = new Message('query.legacy-sites.get', [], ['!siteId' => $siteId]);\n        try {\n            $response = $this->bus->query($query)->payload();\n        } catch (Throwable $throwable) {\n            Log::error($throwable->getMessage(), ['siteId' => $siteId]);\n            return Site::fromArray(['siteId' => $siteId, 'timezone' => 'Europe\/Warsaw']);\n        }\n        return Site::fromArray($response);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Bus;\n\nuse Illuminate\\Support\\Facades\\Log;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Site;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nuse Throwable;\nfinal class Sites implements SitesQueryInterface\n{\n    public function __construct(private readonly MessageBusInterface $bus)\n    {\n    }\n    public function get(int $siteId) : Site\n    {\n        $query = new Message('query.legacy-sites.get', [], []);\n        try {\n            $response = $this->bus->query($query)->payload();\n        } catch (Throwable $throwable) {\n            Log::error($throwable->getMessage(), ['siteId' => $siteId]);\n            return Site::fromArray(['siteId' => $siteId, 'timezone' => 'Europe\/Warsaw']);\n        }\n        return Site::fromArray($response);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Infrastructure\/Bus\/Sites.php",
        "originalStartLine": 25
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     }\n     public function get(int $siteId) : Site\n     {\n-        $query = new Message('query.legacy-sites.get', [], ['!siteId' => $siteId]);\n+        $query = new Message('query.legacy-sites.get', [], []);\n         try {\n             $response = $this->bus->query($query)->payload();\n         } catch (Throwable $throwable) {",
      "processOutput": "PHPUnit 9.5.21 #StandWithUkraine\n\nError in bootstrap script: Illuminate\\Database\\QueryException:\nSQLSTATE[42S02]: Base table or view not found: 1146 Table 'automated_messages.migrations' doesn't exist (SQL: insert into `migrations` (`migration`, `batch`) values (2022_07_07_205040_create_automated_messages_table, 1))\n#0 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(719): Illuminate\\Database\\Connection->runQueryCallback()\n#1 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(545): Illuminate\\Database\\Connection->run()\n#2 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Connection.php(497): Illuminate\\Database\\Connection->statement()\n#3 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Query\/Builder.php(3198): Illuminate\\Database\\Connection->insert()\n#4 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/DatabaseMigrationRepository.php(107): Illuminate\\Database\\Query\\Builder->insert()\n#5 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(211): Illuminate\\Database\\Migrations\\DatabaseMigrationRepository->log()\n#6 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(175): Illuminate\\Database\\Migrations\\Migrator->runUp()\n#7 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(118): Illuminate\\Database\\Migrations\\Migrator->runPending()\n#8 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(87): Illuminate\\Database\\Migrations\\Migrator->run()\n#9 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Migrations\/Migrator.php(608): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->Illuminate\\Database\\Console\\Migrations\\{closure}()\n#10 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/MigrateCommand.php(103): Illuminate\\Database\\Migrations\\Migrator->usingConnection()\n#11 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\MigrateCommand->handle()\n#12 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#13 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#14 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#15 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#16 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#17 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#18 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#19 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(68): Illuminate\\Console\\Command->run()\n#20 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Concerns\/CallsCommands.php(28): Illuminate\\Console\\Command->runCommand()\n#21 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Database\/Console\/Migrations\/FreshCommand.php(59): Illuminate\\Console\\Command->call()\n#22 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(36): Illuminate\\Database\\Console\\Migrations\\FreshCommand->handle()\n#23 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Util.php(41): Illuminate\\Container\\BoundMethod::Illuminate\\Container\\{closure}()\n#24 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(93): Illuminate\\Container\\Util::unwrapIfClosure()\n#25 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/BoundMethod.php(37): Illuminate\\Container\\BoundMethod::callBoundMethod()\n#26 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Container\/Container.php(651): Illuminate\\Container\\BoundMethod::call()\n#27 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(139): Illuminate\\Container\\Container->call()\n#28 \/var\/www\/vendor\/symfony\/console\/Command\/Command.php(308): Illuminate\\Console\\Command->execute()\n#29 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Command.php(124): Symfony\\Component\\Console\\Command\\Command->run()\n#30 \/var\/www\/vendor\/symfony\/console\/Application.php(998): Illuminate\\Console\\Command->run()\n#31 \/var\/www\/vendor\/symfony\/console\/Application.php(299): Symfony\\Component\\Console\\Application->doRunCommand()\n#32 \/var\/www\/vendor\/symfony\/console\/Application.php(171): Symfony\\Component\\Console\\Application->doRun()\n#33 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(102): Symfony\\Component\\Console\\Application->run()\n#34 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Console\/Application.php(194): Illuminate\\Console\\Application->run()\n#35 \/var\/www\/vendor\/laravel\/framework\/src\/Illuminate\/Foundation\/Console\/Kernel.php(263): Illuminate\\Console\\Application->call()\n#36 \/var\/www\/tests\/bootstrap.php(30): Illuminate\\Foundation\\Console\\Kernel->call()\n#37 \/tmp\/infection\/interceptor.autoload.e06039fae9da87113d07673fbb797c2e.infection.php(13): require_once('...')\n#38 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(65): include_once('...')\n#39 \/var\/www\/vendor\/phpunit\/phpunit\/src\/Util\/FileLoader.php(49): PHPUnit\\Util\\FileLoader::load()\n#40 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(562): PHPUnit\\Util\\FileLoader::checkAndLoad()\n#41 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(344): PHPUnit\\TextUI\\Command->handleBootstrap()\n#42 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(111): PHPUnit\\TextUI\\Command->handleArguments()\n#43 \/var\/www\/vendor\/phpunit\/phpunit\/src\/TextUI\/Command.php(96): PHPUnit\\TextUI\\Command->run()\n#44 \/var\/www\/vendor\/phpunit\/phpunit\/phpunit(98): PHPUnit\\TextUI\\Command::main()\n#45 \/var\/www\/vendor\/bin\/phpunit(123): include('...')\n#46 {main}"
    }
  ],
  "errored": [
    {
      "mutator": {
        "mutatorName": "PublicVisibility",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerAction;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeAspect;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeUnit;\ntrait GetMessage\n{\n    public function automatedMessageName() : string\n    {\n        return $this->payload()['name'];\n    }\n    public function replyTo() : string\n    {\n        return $this->payload()['replyTo'];\n    }\n    public function triggerTimeUnit() : TriggerTimeUnit\n    {\n        return TriggerTimeUnit::from($this->payload()['triggerTimeUnit']);\n    }\n    public function triggerValue() : int\n    {\n        return (int) $this->payload()['triggerValue'];\n    }\n    public function triggerTimeAspect() : TriggerTimeAspect\n    {\n        return TriggerTimeAspect::from($this->payload()['triggerTimeAspect']);\n    }\n    public function triggerAction() : TriggerAction\n    {\n        return TriggerAction::from($this->payload()['triggerAction']);\n    }\n    public function templateSettings() : array\n    {\n        $templateSettings = [];\n        foreach ($this->payload()['templateSettings'] as $languageCode => $templateSetting) {\n            $templateSettings[$languageCode] = ['site_id' => $this->siteId(), 'language_code' => $languageCode, 'is_html' => $templateSetting['isHtml'], 'subject' => $templateSetting['subject'], 'content' => $templateSetting['content']];\n        }\n        return $templateSettings;\n    }\n    public function filters() : array\n    {\n        return array_map(fn(array $filter): array => ['site_id' => $this->siteId(), 'name' => $filter['name'], 'value' => $filter['value']], $this->payload()['filters']);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerAction;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeAspect;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeUnit;\ntrait GetMessage\n{\n    public function automatedMessageName() : string\n    {\n        return $this->payload()['name'];\n    }\n    protected function replyTo() : string\n    {\n        return $this->payload()['replyTo'];\n    }\n    public function triggerTimeUnit() : TriggerTimeUnit\n    {\n        return TriggerTimeUnit::from($this->payload()['triggerTimeUnit']);\n    }\n    public function triggerValue() : int\n    {\n        return (int) $this->payload()['triggerValue'];\n    }\n    public function triggerTimeAspect() : TriggerTimeAspect\n    {\n        return TriggerTimeAspect::from($this->payload()['triggerTimeAspect']);\n    }\n    public function triggerAction() : TriggerAction\n    {\n        return TriggerAction::from($this->payload()['triggerAction']);\n    }\n    public function templateSettings() : array\n    {\n        $templateSettings = [];\n        foreach ($this->payload()['templateSettings'] as $languageCode => $templateSetting) {\n            $templateSettings[$languageCode] = ['site_id' => $this->siteId(), 'language_code' => $languageCode, 'is_html' => $templateSetting['isHtml'], 'subject' => $templateSetting['subject'], 'content' => $templateSetting['content']];\n        }\n        return $templateSettings;\n    }\n    public function filters() : array\n    {\n        return array_map(fn(array $filter): array => ['site_id' => $this->siteId(), 'name' => $filter['name'], 'value' => $filter['value']], $this->payload()['filters']);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/GetMessage.php",
        "originalStartLine": 18
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     {\n         return $this->payload()['name'];\n     }\n-    public function replyTo() : string\n+    protected function replyTo() : string\n     {\n         return $this->payload()['replyTo'];\n     }",
      "processOutput": "In GetMessage.php line 15:\n                                                                                                                                                                      \n  Access level to Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\GetMessage::replyTo() must be public (as in class Profitroom\\Microservices\\Bus\\Message)  "
    }
  ],
  "syntaxErrors": [],
  "uncovered": [
    {
      "mutator": {
        "mutatorName": "Throw_",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse RuntimeException;\nfinal class ReservationCancelledHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-cancelled';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository)\n    {\n    }\n    public function __invoke(Message $event) : void\n    {\n        $reservation = $this->reservationRepository->find((int) $event->meta()['!siteId'], $event->payload()['reservationId']['system'], $event->payload()['reservationId']['systemId']);\n        if (!$reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot cancel a reservation that is not found');\n        }\n        $reservation->update(['status' => ReservationStatus::CANCELLED->value, 'cancellation_date' => new DateTimeImmutable()]);\n        $this->scheduling->whenReservationCancelled((int) $event->meta()['!siteId'], $reservation);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse DateTimeImmutable;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse RuntimeException;\nfinal class ReservationCancelledHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-cancelled';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository)\n    {\n    }\n    public function __invoke(Message $event) : void\n    {\n        $reservation = $this->reservationRepository->find((int) $event->meta()['!siteId'], $event->payload()['reservationId']['system'], $event->payload()['reservationId']['systemId']);\n        if (!$reservation instanceof Reservation) {\n            new RuntimeException('Cannot cancel a reservation that is not found');\n        }\n        $reservation->update(['status' => ReservationStatus::CANCELLED->value, 'cancellation_date' => new DateTimeImmutable()]);\n        $this->scheduling->whenReservationCancelled((int) $event->meta()['!siteId'], $reservation);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ReservationCancelledHandler.php",
        "originalStartLine": 34
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     {\n         $reservation = $this->reservationRepository->find((int) $event->meta()['!siteId'], $event->payload()['reservationId']['system'], $event->payload()['reservationId']['systemId']);\n         if (!$reservation instanceof Reservation) {\n-            throw new RuntimeException('Cannot cancel a reservation that is not found');\n+            new RuntimeException('Cannot cancel a reservation that is not found');\n         }\n         $reservation->update(['status' => ReservationStatus::CANCELLED->value, 'cancellation_date' => new DateTimeImmutable()]);\n         $this->scheduling->whenReservationCancelled((int) $event->meta()['!siteId'], $reservation);\n     }\n }",
      "processOutput": ""
    },
    {
      "mutator": {
        "mutatorName": "Throw_",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationChanged;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\TimeZoneConverter;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse RuntimeException;\nfinal class ReservationChangedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-changed';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository, private readonly SitesQueryInterface $sitesQuery)\n    {\n    }\n    public function __invoke(ReservationChanged $event) : void\n    {\n        $reservation = $this->reservationRepository->find($event->siteId(), $event->system(), $event->systemId());\n        if (!$reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot change a reservation that is not found');\n        }\n        $site = $this->sitesQuery->get($event->siteId());\n        $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n        $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n        $reservation->update(['reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n        $this->scheduling->whenReservationChanged($event->siteId(), $reservation);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationChanged;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\TimeZoneConverter;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse RuntimeException;\nfinal class ReservationChangedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-changed';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository, private readonly SitesQueryInterface $sitesQuery)\n    {\n    }\n    public function __invoke(ReservationChanged $event) : void\n    {\n        $reservation = $this->reservationRepository->find($event->siteId(), $event->system(), $event->systemId());\n        if (!$reservation instanceof Reservation) {\n            new RuntimeException('Cannot change a reservation that is not found');\n        }\n        $site = $this->sitesQuery->get($event->siteId());\n        $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);\n        $checkOut = TimeZoneConverter::fromLocal($event->checkOut(), $site->timezone);\n        $reservation->update(['reference' => $event->reference(), 'channel_id' => $event->channelId(), 'offer_id' => $event->offerId(), 'price' => $event->price(), 'currency' => $event->currency(), 'check_in' => $checkIn, 'check_out' => $checkOut, 'status' => $event->status()]);\n        $this->scheduling->whenReservationChanged($event->siteId(), $reservation);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ReservationChangedHandler.php",
        "originalStartLine": 35
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     {\n         $reservation = $this->reservationRepository->find($event->siteId(), $event->system(), $event->systemId());\n         if (!$reservation instanceof Reservation) {\n-            throw new RuntimeException('Cannot change a reservation that is not found');\n+            new RuntimeException('Cannot change a reservation that is not found');\n         }\n         $site = $this->sitesQuery->get($event->siteId());\n         $checkIn = TimeZoneConverter::fromLocal($event->checkIn(), $site->timezone);",
      "processOutput": ""
    },
    {
      "mutator": {
        "mutatorName": "Throw_",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse RuntimeException;\nfinal class ReservationConfirmedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-confirmed';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository)\n    {\n    }\n    public function __invoke(Message $event) : void\n    {\n        $reservation = $this->reservationRepository->find((int) $event->meta()['!siteId'], $event->payload()['reservationId']['system'], $event->payload()['reservationId']['systemId']);\n        if (!$reservation instanceof Reservation) {\n            throw new RuntimeException('Cannot confirm a reservation that is not found');\n        }\n        $reservation->update(['status' => ReservationStatus::CONFIRMED]);\n        $this->scheduling->whenReservationConfirmed((int) $event->meta()['!siteId'], $reservation);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Handlers;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Scheduling\\Reservations\\EventScheduling;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\Repositories\\ReservationRepositoryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM\\Reservation;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse RuntimeException;\nfinal class ReservationConfirmedHandler\n{\n    public const MESSAGE_NAME = 'event.reservations.reservation-confirmed';\n    public function __construct(private readonly EventScheduling $scheduling, private readonly ReservationRepositoryInterface $reservationRepository)\n    {\n    }\n    public function __invoke(Message $event) : void\n    {\n        $reservation = $this->reservationRepository->find((int) $event->meta()['!siteId'], $event->payload()['reservationId']['system'], $event->payload()['reservationId']['systemId']);\n        if (!$reservation instanceof Reservation) {\n            new RuntimeException('Cannot confirm a reservation that is not found');\n        }\n        $reservation->update(['status' => ReservationStatus::CONFIRMED]);\n        $this->scheduling->whenReservationConfirmed((int) $event->meta()['!siteId'], $reservation);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Handlers\/ReservationConfirmedHandler.php",
        "originalStartLine": 33
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     {\n         $reservation = $this->reservationRepository->find((int) $event->meta()['!siteId'], $event->payload()['reservationId']['system'], $event->payload()['reservationId']['systemId']);\n         if (!$reservation instanceof Reservation) {\n-            throw new RuntimeException('Cannot confirm a reservation that is not found');\n+            new RuntimeException('Cannot confirm a reservation that is not found');\n         }\n         $reservation->update(['status' => ReservationStatus::CONFIRMED]);\n         $this->scheduling->whenReservationConfirmed((int) $event->meta()['!siteId'], $reservation);\n     }\n }",
      "processOutput": ""
    },
    {
      "mutator": {
        "mutatorName": "Coalesce",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Middlewares;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Activate;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Create;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Deactivate;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Delete;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\SendPreview;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Update;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationChanged;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationCreated;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Query\\Get;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Query\\ListMessages;\nuse Profitroom\\Microservices\\Bus\\MessageInterface;\nfinal class MessageTransformer\n{\n    private const MAP = [\n        Activate::MESSAGE_NAME => Activate::class,\n        Create::MESSAGE_NAME => Create::class,\n        Deactivate::MESSAGE_NAME => Deactivate::class,\n        Delete::MESSAGE_NAME => Delete::class,\n        SendPreview::MESSAGE_NAME => SendPreview::class,\n        Get::MESSAGE_NAME => Get::class,\n        ListMessages::MESSAGE_NAME => ListMessages::class,\n        Update::MESSAGE_NAME => Update::class,\n        \/\/ reservations\n        ReservationCreated::MESSAGE_NAME => ReservationCreated::class,\n        ReservationChanged::MESSAGE_NAME => ReservationChanged::class,\n    ];\n    public function __invoke(MessageInterface $message, callable $next) : mixed\n    {\n        $class = self::MAP[$message->name()] ?? null;\n        if (null !== $class) {\n            $message = new $class($message->name(), $message->payload(), $message->meta(), $message->correlationId(), $message->replyTo());\n        }\n        return $next($message);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Middlewares;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Activate;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Create;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Deactivate;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Delete;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\SendPreview;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Update;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationChanged;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationCreated;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Query\\Get;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Query\\ListMessages;\nuse Profitroom\\Microservices\\Bus\\MessageInterface;\nfinal class MessageTransformer\n{\n    private const MAP = [\n        Activate::MESSAGE_NAME => Activate::class,\n        Create::MESSAGE_NAME => Create::class,\n        Deactivate::MESSAGE_NAME => Deactivate::class,\n        Delete::MESSAGE_NAME => Delete::class,\n        SendPreview::MESSAGE_NAME => SendPreview::class,\n        Get::MESSAGE_NAME => Get::class,\n        ListMessages::MESSAGE_NAME => ListMessages::class,\n        Update::MESSAGE_NAME => Update::class,\n        \/\/ reservations\n        ReservationCreated::MESSAGE_NAME => ReservationCreated::class,\n        ReservationChanged::MESSAGE_NAME => ReservationChanged::class,\n    ];\n    public function __invoke(MessageInterface $message, callable $next) : mixed\n    {\n        $class = null ?? self::MAP[$message->name()];\n        if (null !== $class) {\n            $message = new $class($message->name(), $message->payload(), $message->meta(), $message->correlationId(), $message->replyTo());\n        }\n        return $next($message);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Middlewares\/MessageTransformer.php",
        "originalStartLine": 38
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     ];\n     public function __invoke(MessageInterface $message, callable $next) : mixed\n     {\n-        $class = self::MAP[$message->name()] ?? null;\n+        $class = null ?? self::MAP[$message->name()];\n         if (null !== $class) {\n             $message = new $class($message->name(), $message->payload(), $message->meta(), $message->correlationId(), $message->replyTo());\n         }",
      "processOutput": ""
    },
    {
      "mutator": {
        "mutatorName": "NotIdentical",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Middlewares;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Activate;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Create;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Deactivate;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Delete;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\SendPreview;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Update;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationChanged;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationCreated;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Query\\Get;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Query\\ListMessages;\nuse Profitroom\\Microservices\\Bus\\MessageInterface;\nfinal class MessageTransformer\n{\n    private const MAP = [\n        Activate::MESSAGE_NAME => Activate::class,\n        Create::MESSAGE_NAME => Create::class,\n        Deactivate::MESSAGE_NAME => Deactivate::class,\n        Delete::MESSAGE_NAME => Delete::class,\n        SendPreview::MESSAGE_NAME => SendPreview::class,\n        Get::MESSAGE_NAME => Get::class,\n        ListMessages::MESSAGE_NAME => ListMessages::class,\n        Update::MESSAGE_NAME => Update::class,\n        \/\/ reservations\n        ReservationCreated::MESSAGE_NAME => ReservationCreated::class,\n        ReservationChanged::MESSAGE_NAME => ReservationChanged::class,\n    ];\n    public function __invoke(MessageInterface $message, callable $next) : mixed\n    {\n        $class = self::MAP[$message->name()] ?? null;\n        if (null !== $class) {\n            $message = new $class($message->name(), $message->payload(), $message->meta(), $message->correlationId(), $message->replyTo());\n        }\n        return $next($message);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Middlewares;\n\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Activate;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Create;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Deactivate;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Delete;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\SendPreview;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Commands\\Update;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationChanged;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Events\\ReservationCreated;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Query\\Get;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Bus\\Query\\ListMessages;\nuse Profitroom\\Microservices\\Bus\\MessageInterface;\nfinal class MessageTransformer\n{\n    private const MAP = [\n        Activate::MESSAGE_NAME => Activate::class,\n        Create::MESSAGE_NAME => Create::class,\n        Deactivate::MESSAGE_NAME => Deactivate::class,\n        Delete::MESSAGE_NAME => Delete::class,\n        SendPreview::MESSAGE_NAME => SendPreview::class,\n        Get::MESSAGE_NAME => Get::class,\n        ListMessages::MESSAGE_NAME => ListMessages::class,\n        Update::MESSAGE_NAME => Update::class,\n        \/\/ reservations\n        ReservationCreated::MESSAGE_NAME => ReservationCreated::class,\n        ReservationChanged::MESSAGE_NAME => ReservationChanged::class,\n    ];\n    public function __invoke(MessageInterface $message, callable $next) : mixed\n    {\n        $class = self::MAP[$message->name()] ?? null;\n        if (null === $class) {\n            $message = new $class($message->name(), $message->payload(), $message->meta(), $message->correlationId(), $message->replyTo());\n        }\n        return $next($message);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Application\/Bus\/Middlewares\/MessageTransformer.php",
        "originalStartLine": 40
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     public function __invoke(MessageInterface $message, callable $next) : mixed\n     {\n         $class = self::MAP[$message->name()] ?? null;\n-        if (null !== $class) {\n+        if (null === $class) {\n             $message = new $class($message->name(), $message->payload(), $message->meta(), $message->correlationId(), $message->replyTo());\n         }\n         return $next($message);\n     }\n }",
      "processOutput": ""
    },
    {
      "mutator": {
        "mutatorName": "ArrayItemRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Bus;\n\nuse Illuminate\\Support\\Facades\\Log;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Site;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nuse Throwable;\nfinal class Sites implements SitesQueryInterface\n{\n    public function __construct(private readonly MessageBusInterface $bus)\n    {\n    }\n    public function get(int $siteId) : Site\n    {\n        $query = new Message('query.legacy-sites.get', [], ['!siteId' => $siteId]);\n        try {\n            $response = $this->bus->query($query)->payload();\n        } catch (Throwable $throwable) {\n            Log::error($throwable->getMessage(), ['siteId' => $siteId]);\n            return Site::fromArray(['siteId' => $siteId, 'timezone' => 'Europe\/Warsaw']);\n        }\n        return Site::fromArray($response);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Bus;\n\nuse Illuminate\\Support\\Facades\\Log;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Site;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nuse Throwable;\nfinal class Sites implements SitesQueryInterface\n{\n    public function __construct(private readonly MessageBusInterface $bus)\n    {\n    }\n    public function get(int $siteId) : Site\n    {\n        $query = new Message('query.legacy-sites.get', [], ['!siteId' => $siteId]);\n        try {\n            $response = $this->bus->query($query)->payload();\n        } catch (Throwable $throwable) {\n            Log::error($throwable->getMessage(), []);\n            return Site::fromArray(['siteId' => $siteId, 'timezone' => 'Europe\/Warsaw']);\n        }\n        return Site::fromArray($response);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Infrastructure\/Bus\/Sites.php",
        "originalStartLine": 31
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         try {\n             $response = $this->bus->query($query)->payload();\n         } catch (Throwable $throwable) {\n-            Log::error($throwable->getMessage(), ['siteId' => $siteId]);\n+            Log::error($throwable->getMessage(), []);\n             return Site::fromArray(['siteId' => $siteId, 'timezone' => 'Europe\/Warsaw']);\n         }\n         return Site::fromArray($response);\n     }\n }",
      "processOutput": ""
    },
    {
      "mutator": {
        "mutatorName": "MethodCallRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Bus;\n\nuse Illuminate\\Support\\Facades\\Log;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Site;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nuse Throwable;\nfinal class Sites implements SitesQueryInterface\n{\n    public function __construct(private readonly MessageBusInterface $bus)\n    {\n    }\n    public function get(int $siteId) : Site\n    {\n        $query = new Message('query.legacy-sites.get', [], ['!siteId' => $siteId]);\n        try {\n            $response = $this->bus->query($query)->payload();\n        } catch (Throwable $throwable) {\n            Log::error($throwable->getMessage(), ['siteId' => $siteId]);\n            return Site::fromArray(['siteId' => $siteId, 'timezone' => 'Europe\/Warsaw']);\n        }\n        return Site::fromArray($response);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Bus;\n\nuse Illuminate\\Support\\Facades\\Log;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Site;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nuse Throwable;\nfinal class Sites implements SitesQueryInterface\n{\n    public function __construct(private readonly MessageBusInterface $bus)\n    {\n    }\n    public function get(int $siteId) : Site\n    {\n        $query = new Message('query.legacy-sites.get', [], ['!siteId' => $siteId]);\n        try {\n            $response = $this->bus->query($query)->payload();\n        } catch (Throwable $throwable) {\n            \n            return Site::fromArray(['siteId' => $siteId, 'timezone' => 'Europe\/Warsaw']);\n        }\n        return Site::fromArray($response);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Infrastructure\/Bus\/Sites.php",
        "originalStartLine": 31
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         try {\n             $response = $this->bus->query($query)->payload();\n         } catch (Throwable $throwable) {\n-            Log::error($throwable->getMessage(), ['siteId' => $siteId]);\n+            \n             return Site::fromArray(['siteId' => $siteId, 'timezone' => 'Europe\/Warsaw']);\n         }\n         return Site::fromArray($response);\n     }\n }",
      "processOutput": ""
    },
    {
      "mutator": {
        "mutatorName": "ArrayItemRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Bus;\n\nuse Illuminate\\Support\\Facades\\Log;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Site;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nuse Throwable;\nfinal class Sites implements SitesQueryInterface\n{\n    public function __construct(private readonly MessageBusInterface $bus)\n    {\n    }\n    public function get(int $siteId) : Site\n    {\n        $query = new Message('query.legacy-sites.get', [], ['!siteId' => $siteId]);\n        try {\n            $response = $this->bus->query($query)->payload();\n        } catch (Throwable $throwable) {\n            Log::error($throwable->getMessage(), ['siteId' => $siteId]);\n            return Site::fromArray(['siteId' => $siteId, 'timezone' => 'Europe\/Warsaw']);\n        }\n        return Site::fromArray($response);\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Bus;\n\nuse Illuminate\\Support\\Facades\\Log;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Queries\\SitesQueryInterface;\nuse Profitroom\\Communication\\AutomatedMessages\\Application\\Site;\nuse Profitroom\\Microservices\\Bus\\Message;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nuse Throwable;\nfinal class Sites implements SitesQueryInterface\n{\n    public function __construct(private readonly MessageBusInterface $bus)\n    {\n    }\n    public function get(int $siteId) : Site\n    {\n        $query = new Message('query.legacy-sites.get', [], ['!siteId' => $siteId]);\n        try {\n            $response = $this->bus->query($query)->payload();\n        } catch (Throwable $throwable) {\n            Log::error($throwable->getMessage(), ['siteId' => $siteId]);\n            return Site::fromArray(['timezone' => 'Europe\/Warsaw']);\n        }\n        return Site::fromArray($response);\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Infrastructure\/Bus\/Sites.php",
        "originalStartLine": 33
      },
      "diff": "--- Original\n+++ New\n@@ @@\n             $response = $this->bus->query($query)->payload();\n         } catch (Throwable $throwable) {\n             Log::error($throwable->getMessage(), ['siteId' => $siteId]);\n-            return Site::fromArray(['siteId' => $siteId, 'timezone' => 'Europe\/Warsaw']);\n+            return Site::fromArray(['timezone' => 'Europe\/Warsaw']);\n         }\n         return Site::fromArray($response);\n     }\n }",
      "processOutput": ""
    },
    {
      "mutator": {
        "mutatorName": "PublicVisibility",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM;\n\nuse Database\\Factories\\AutomatedMessageFactory;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Illuminate\\Database\\Eloquent\\Relations\\HasMany;\nuse Illuminate\\Database\\Eloquent\\SoftDeletes;\nuse Illuminate\\Support\\Collection;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerAction;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeAspect;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeUnit;\n\/**\n * @property Collection $filters\n *\/\nfinal class AutomatedMessage extends Model\n{\n    use SoftDeletes;\n    use HasFactory;\n    \/** {@inheritdoc} *\/\n    public $incrementing = false;\n    \/** {@inheritdoc} *\/\n    protected $guarded = [];\n    \/** {@inheritdoc} *\/\n    protected $casts = ['site_id' => 'integer', 'trigger_value' => 'integer', 'trigger_time_unit' => TriggerTimeUnit::class, 'trigger_time_aspect' => TriggerTimeAspect::class, 'trigger_action' => TriggerAction::class, 'last_message_sent_at' => 'immutable_datetime', 'is_active' => 'boolean'];\n    \/** {@inheritdoc} *\/\n    protected $hidden = ['deleted_at', 'created_at', 'updated_at'];\n    public function filters() : HasMany\n    {\n        return $this->hasMany(Filter::class);\n    }\n    public function templateSettings() : HasMany\n    {\n        return $this->hasMany(TemplateSetting::class);\n    }\n    public function activate() : void\n    {\n        $this->update(['is_active' => true]);\n    }\n    protected static function newFactory() : AutomatedMessageFactory\n    {\n        return AutomatedMessageFactory::new();\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM;\n\nuse Database\\Factories\\AutomatedMessageFactory;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Illuminate\\Database\\Eloquent\\Relations\\HasMany;\nuse Illuminate\\Database\\Eloquent\\SoftDeletes;\nuse Illuminate\\Support\\Collection;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerAction;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeAspect;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeUnit;\n\/**\n * @property Collection $filters\n *\/\nfinal class AutomatedMessage extends Model\n{\n    use SoftDeletes;\n    use HasFactory;\n    \/** {@inheritdoc} *\/\n    public $incrementing = false;\n    \/** {@inheritdoc} *\/\n    protected $guarded = [];\n    \/** {@inheritdoc} *\/\n    protected $casts = ['site_id' => 'integer', 'trigger_value' => 'integer', 'trigger_time_unit' => TriggerTimeUnit::class, 'trigger_time_aspect' => TriggerTimeAspect::class, 'trigger_action' => TriggerAction::class, 'last_message_sent_at' => 'immutable_datetime', 'is_active' => 'boolean'];\n    \/** {@inheritdoc} *\/\n    protected $hidden = ['deleted_at', 'created_at', 'updated_at'];\n    protected function filters() : HasMany\n    {\n        return $this->hasMany(Filter::class);\n    }\n    public function templateSettings() : HasMany\n    {\n        return $this->hasMany(TemplateSetting::class);\n    }\n    public function activate() : void\n    {\n        $this->update(['is_active' => true]);\n    }\n    protected static function newFactory() : AutomatedMessageFactory\n    {\n        return AutomatedMessageFactory::new();\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Infrastructure\/Eloquent\/ORM\/AutomatedMessage.php",
        "originalStartLine": 49
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     protected $casts = ['site_id' => 'integer', 'trigger_value' => 'integer', 'trigger_time_unit' => TriggerTimeUnit::class, 'trigger_time_aspect' => TriggerTimeAspect::class, 'trigger_action' => TriggerAction::class, 'last_message_sent_at' => 'immutable_datetime', 'is_active' => 'boolean'];\n     \/** {@inheritdoc} *\/\n     protected $hidden = ['deleted_at', 'created_at', 'updated_at'];\n-    public function filters() : HasMany\n+    protected function filters() : HasMany\n     {\n         return $this->hasMany(Filter::class);\n     }",
      "processOutput": ""
    },
    {
      "mutator": {
        "mutatorName": "PublicVisibility",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM;\n\nuse Database\\Factories\\AutomatedMessageFactory;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Illuminate\\Database\\Eloquent\\Relations\\HasMany;\nuse Illuminate\\Database\\Eloquent\\SoftDeletes;\nuse Illuminate\\Support\\Collection;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerAction;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeAspect;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeUnit;\n\/**\n * @property Collection $filters\n *\/\nfinal class AutomatedMessage extends Model\n{\n    use SoftDeletes;\n    use HasFactory;\n    \/** {@inheritdoc} *\/\n    public $incrementing = false;\n    \/** {@inheritdoc} *\/\n    protected $guarded = [];\n    \/** {@inheritdoc} *\/\n    protected $casts = ['site_id' => 'integer', 'trigger_value' => 'integer', 'trigger_time_unit' => TriggerTimeUnit::class, 'trigger_time_aspect' => TriggerTimeAspect::class, 'trigger_action' => TriggerAction::class, 'last_message_sent_at' => 'immutable_datetime', 'is_active' => 'boolean'];\n    \/** {@inheritdoc} *\/\n    protected $hidden = ['deleted_at', 'created_at', 'updated_at'];\n    public function filters() : HasMany\n    {\n        return $this->hasMany(Filter::class);\n    }\n    public function templateSettings() : HasMany\n    {\n        return $this->hasMany(TemplateSetting::class);\n    }\n    public function activate() : void\n    {\n        $this->update(['is_active' => true]);\n    }\n    protected static function newFactory() : AutomatedMessageFactory\n    {\n        return AutomatedMessageFactory::new();\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM;\n\nuse Database\\Factories\\AutomatedMessageFactory;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Illuminate\\Database\\Eloquent\\Relations\\HasMany;\nuse Illuminate\\Database\\Eloquent\\SoftDeletes;\nuse Illuminate\\Support\\Collection;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerAction;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeAspect;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeUnit;\n\/**\n * @property Collection $filters\n *\/\nfinal class AutomatedMessage extends Model\n{\n    use SoftDeletes;\n    use HasFactory;\n    \/** {@inheritdoc} *\/\n    public $incrementing = false;\n    \/** {@inheritdoc} *\/\n    protected $guarded = [];\n    \/** {@inheritdoc} *\/\n    protected $casts = ['site_id' => 'integer', 'trigger_value' => 'integer', 'trigger_time_unit' => TriggerTimeUnit::class, 'trigger_time_aspect' => TriggerTimeAspect::class, 'trigger_action' => TriggerAction::class, 'last_message_sent_at' => 'immutable_datetime', 'is_active' => 'boolean'];\n    \/** {@inheritdoc} *\/\n    protected $hidden = ['deleted_at', 'created_at', 'updated_at'];\n    public function filters() : HasMany\n    {\n        return $this->hasMany(Filter::class);\n    }\n    protected function templateSettings() : HasMany\n    {\n        return $this->hasMany(TemplateSetting::class);\n    }\n    public function activate() : void\n    {\n        $this->update(['is_active' => true]);\n    }\n    protected static function newFactory() : AutomatedMessageFactory\n    {\n        return AutomatedMessageFactory::new();\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Infrastructure\/Eloquent\/ORM\/AutomatedMessage.php",
        "originalStartLine": 54
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     {\n         return $this->hasMany(Filter::class);\n     }\n-    public function templateSettings() : HasMany\n+    protected function templateSettings() : HasMany\n     {\n         return $this->hasMany(TemplateSetting::class);\n     }",
      "processOutput": ""
    },
    {
      "mutator": {
        "mutatorName": "PublicVisibility",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM;\n\nuse Database\\Factories\\AutomatedMessageFactory;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Illuminate\\Database\\Eloquent\\Relations\\HasMany;\nuse Illuminate\\Database\\Eloquent\\SoftDeletes;\nuse Illuminate\\Support\\Collection;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerAction;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeAspect;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeUnit;\n\/**\n * @property Collection $filters\n *\/\nfinal class AutomatedMessage extends Model\n{\n    use SoftDeletes;\n    use HasFactory;\n    \/** {@inheritdoc} *\/\n    public $incrementing = false;\n    \/** {@inheritdoc} *\/\n    protected $guarded = [];\n    \/** {@inheritdoc} *\/\n    protected $casts = ['site_id' => 'integer', 'trigger_value' => 'integer', 'trigger_time_unit' => TriggerTimeUnit::class, 'trigger_time_aspect' => TriggerTimeAspect::class, 'trigger_action' => TriggerAction::class, 'last_message_sent_at' => 'immutable_datetime', 'is_active' => 'boolean'];\n    \/** {@inheritdoc} *\/\n    protected $hidden = ['deleted_at', 'created_at', 'updated_at'];\n    public function filters() : HasMany\n    {\n        return $this->hasMany(Filter::class);\n    }\n    public function templateSettings() : HasMany\n    {\n        return $this->hasMany(TemplateSetting::class);\n    }\n    public function activate() : void\n    {\n        $this->update(['is_active' => true]);\n    }\n    protected static function newFactory() : AutomatedMessageFactory\n    {\n        return AutomatedMessageFactory::new();\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM;\n\nuse Database\\Factories\\AutomatedMessageFactory;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Illuminate\\Database\\Eloquent\\Relations\\HasMany;\nuse Illuminate\\Database\\Eloquent\\SoftDeletes;\nuse Illuminate\\Support\\Collection;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerAction;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeAspect;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeUnit;\n\/**\n * @property Collection $filters\n *\/\nfinal class AutomatedMessage extends Model\n{\n    use SoftDeletes;\n    use HasFactory;\n    \/** {@inheritdoc} *\/\n    public $incrementing = false;\n    \/** {@inheritdoc} *\/\n    protected $guarded = [];\n    \/** {@inheritdoc} *\/\n    protected $casts = ['site_id' => 'integer', 'trigger_value' => 'integer', 'trigger_time_unit' => TriggerTimeUnit::class, 'trigger_time_aspect' => TriggerTimeAspect::class, 'trigger_action' => TriggerAction::class, 'last_message_sent_at' => 'immutable_datetime', 'is_active' => 'boolean'];\n    \/** {@inheritdoc} *\/\n    protected $hidden = ['deleted_at', 'created_at', 'updated_at'];\n    public function filters() : HasMany\n    {\n        return $this->hasMany(Filter::class);\n    }\n    public function templateSettings() : HasMany\n    {\n        return $this->hasMany(TemplateSetting::class);\n    }\n    protected function activate() : void\n    {\n        $this->update(['is_active' => true]);\n    }\n    protected static function newFactory() : AutomatedMessageFactory\n    {\n        return AutomatedMessageFactory::new();\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Infrastructure\/Eloquent\/ORM\/AutomatedMessage.php",
        "originalStartLine": 59
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     {\n         return $this->hasMany(TemplateSetting::class);\n     }\n-    public function activate() : void\n+    protected function activate() : void\n     {\n         $this->update(['is_active' => true]);\n     }",
      "processOutput": ""
    },
    {
      "mutator": {
        "mutatorName": "TrueValue",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM;\n\nuse Database\\Factories\\AutomatedMessageFactory;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Illuminate\\Database\\Eloquent\\Relations\\HasMany;\nuse Illuminate\\Database\\Eloquent\\SoftDeletes;\nuse Illuminate\\Support\\Collection;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerAction;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeAspect;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeUnit;\n\/**\n * @property Collection $filters\n *\/\nfinal class AutomatedMessage extends Model\n{\n    use SoftDeletes;\n    use HasFactory;\n    \/** {@inheritdoc} *\/\n    public $incrementing = false;\n    \/** {@inheritdoc} *\/\n    protected $guarded = [];\n    \/** {@inheritdoc} *\/\n    protected $casts = ['site_id' => 'integer', 'trigger_value' => 'integer', 'trigger_time_unit' => TriggerTimeUnit::class, 'trigger_time_aspect' => TriggerTimeAspect::class, 'trigger_action' => TriggerAction::class, 'last_message_sent_at' => 'immutable_datetime', 'is_active' => 'boolean'];\n    \/** {@inheritdoc} *\/\n    protected $hidden = ['deleted_at', 'created_at', 'updated_at'];\n    public function filters() : HasMany\n    {\n        return $this->hasMany(Filter::class);\n    }\n    public function templateSettings() : HasMany\n    {\n        return $this->hasMany(TemplateSetting::class);\n    }\n    public function activate() : void\n    {\n        $this->update(['is_active' => true]);\n    }\n    protected static function newFactory() : AutomatedMessageFactory\n    {\n        return AutomatedMessageFactory::new();\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM;\n\nuse Database\\Factories\\AutomatedMessageFactory;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Illuminate\\Database\\Eloquent\\Relations\\HasMany;\nuse Illuminate\\Database\\Eloquent\\SoftDeletes;\nuse Illuminate\\Support\\Collection;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerAction;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeAspect;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeUnit;\n\/**\n * @property Collection $filters\n *\/\nfinal class AutomatedMessage extends Model\n{\n    use SoftDeletes;\n    use HasFactory;\n    \/** {@inheritdoc} *\/\n    public $incrementing = false;\n    \/** {@inheritdoc} *\/\n    protected $guarded = [];\n    \/** {@inheritdoc} *\/\n    protected $casts = ['site_id' => 'integer', 'trigger_value' => 'integer', 'trigger_time_unit' => TriggerTimeUnit::class, 'trigger_time_aspect' => TriggerTimeAspect::class, 'trigger_action' => TriggerAction::class, 'last_message_sent_at' => 'immutable_datetime', 'is_active' => 'boolean'];\n    \/** {@inheritdoc} *\/\n    protected $hidden = ['deleted_at', 'created_at', 'updated_at'];\n    public function filters() : HasMany\n    {\n        return $this->hasMany(Filter::class);\n    }\n    public function templateSettings() : HasMany\n    {\n        return $this->hasMany(TemplateSetting::class);\n    }\n    public function activate() : void\n    {\n        $this->update(['is_active' => false]);\n    }\n    protected static function newFactory() : AutomatedMessageFactory\n    {\n        return AutomatedMessageFactory::new();\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Infrastructure\/Eloquent\/ORM\/AutomatedMessage.php",
        "originalStartLine": 61
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     }\n     public function activate() : void\n     {\n-        $this->update(['is_active' => true]);\n+        $this->update(['is_active' => false]);\n     }\n     protected static function newFactory() : AutomatedMessageFactory\n     {",
      "processOutput": ""
    },
    {
      "mutator": {
        "mutatorName": "ArrayItemRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM;\n\nuse Database\\Factories\\AutomatedMessageFactory;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Illuminate\\Database\\Eloquent\\Relations\\HasMany;\nuse Illuminate\\Database\\Eloquent\\SoftDeletes;\nuse Illuminate\\Support\\Collection;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerAction;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeAspect;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeUnit;\n\/**\n * @property Collection $filters\n *\/\nfinal class AutomatedMessage extends Model\n{\n    use SoftDeletes;\n    use HasFactory;\n    \/** {@inheritdoc} *\/\n    public $incrementing = false;\n    \/** {@inheritdoc} *\/\n    protected $guarded = [];\n    \/** {@inheritdoc} *\/\n    protected $casts = ['site_id' => 'integer', 'trigger_value' => 'integer', 'trigger_time_unit' => TriggerTimeUnit::class, 'trigger_time_aspect' => TriggerTimeAspect::class, 'trigger_action' => TriggerAction::class, 'last_message_sent_at' => 'immutable_datetime', 'is_active' => 'boolean'];\n    \/** {@inheritdoc} *\/\n    protected $hidden = ['deleted_at', 'created_at', 'updated_at'];\n    public function filters() : HasMany\n    {\n        return $this->hasMany(Filter::class);\n    }\n    public function templateSettings() : HasMany\n    {\n        return $this->hasMany(TemplateSetting::class);\n    }\n    public function activate() : void\n    {\n        $this->update(['is_active' => true]);\n    }\n    protected static function newFactory() : AutomatedMessageFactory\n    {\n        return AutomatedMessageFactory::new();\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM;\n\nuse Database\\Factories\\AutomatedMessageFactory;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Illuminate\\Database\\Eloquent\\Relations\\HasMany;\nuse Illuminate\\Database\\Eloquent\\SoftDeletes;\nuse Illuminate\\Support\\Collection;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerAction;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeAspect;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeUnit;\n\/**\n * @property Collection $filters\n *\/\nfinal class AutomatedMessage extends Model\n{\n    use SoftDeletes;\n    use HasFactory;\n    \/** {@inheritdoc} *\/\n    public $incrementing = false;\n    \/** {@inheritdoc} *\/\n    protected $guarded = [];\n    \/** {@inheritdoc} *\/\n    protected $casts = ['site_id' => 'integer', 'trigger_value' => 'integer', 'trigger_time_unit' => TriggerTimeUnit::class, 'trigger_time_aspect' => TriggerTimeAspect::class, 'trigger_action' => TriggerAction::class, 'last_message_sent_at' => 'immutable_datetime', 'is_active' => 'boolean'];\n    \/** {@inheritdoc} *\/\n    protected $hidden = ['deleted_at', 'created_at', 'updated_at'];\n    public function filters() : HasMany\n    {\n        return $this->hasMany(Filter::class);\n    }\n    public function templateSettings() : HasMany\n    {\n        return $this->hasMany(TemplateSetting::class);\n    }\n    public function activate() : void\n    {\n        $this->update([]);\n    }\n    protected static function newFactory() : AutomatedMessageFactory\n    {\n        return AutomatedMessageFactory::new();\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Infrastructure\/Eloquent\/ORM\/AutomatedMessage.php",
        "originalStartLine": 61
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     }\n     public function activate() : void\n     {\n-        $this->update(['is_active' => true]);\n+        $this->update([]);\n     }\n     protected static function newFactory() : AutomatedMessageFactory\n     {",
      "processOutput": ""
    },
    {
      "mutator": {
        "mutatorName": "MethodCallRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM;\n\nuse Database\\Factories\\AutomatedMessageFactory;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Illuminate\\Database\\Eloquent\\Relations\\HasMany;\nuse Illuminate\\Database\\Eloquent\\SoftDeletes;\nuse Illuminate\\Support\\Collection;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerAction;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeAspect;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeUnit;\n\/**\n * @property Collection $filters\n *\/\nfinal class AutomatedMessage extends Model\n{\n    use SoftDeletes;\n    use HasFactory;\n    \/** {@inheritdoc} *\/\n    public $incrementing = false;\n    \/** {@inheritdoc} *\/\n    protected $guarded = [];\n    \/** {@inheritdoc} *\/\n    protected $casts = ['site_id' => 'integer', 'trigger_value' => 'integer', 'trigger_time_unit' => TriggerTimeUnit::class, 'trigger_time_aspect' => TriggerTimeAspect::class, 'trigger_action' => TriggerAction::class, 'last_message_sent_at' => 'immutable_datetime', 'is_active' => 'boolean'];\n    \/** {@inheritdoc} *\/\n    protected $hidden = ['deleted_at', 'created_at', 'updated_at'];\n    public function filters() : HasMany\n    {\n        return $this->hasMany(Filter::class);\n    }\n    public function templateSettings() : HasMany\n    {\n        return $this->hasMany(TemplateSetting::class);\n    }\n    public function activate() : void\n    {\n        $this->update(['is_active' => true]);\n    }\n    protected static function newFactory() : AutomatedMessageFactory\n    {\n        return AutomatedMessageFactory::new();\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM;\n\nuse Database\\Factories\\AutomatedMessageFactory;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Illuminate\\Database\\Eloquent\\Relations\\HasMany;\nuse Illuminate\\Database\\Eloquent\\SoftDeletes;\nuse Illuminate\\Support\\Collection;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerAction;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeAspect;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeUnit;\n\/**\n * @property Collection $filters\n *\/\nfinal class AutomatedMessage extends Model\n{\n    use SoftDeletes;\n    use HasFactory;\n    \/** {@inheritdoc} *\/\n    public $incrementing = false;\n    \/** {@inheritdoc} *\/\n    protected $guarded = [];\n    \/** {@inheritdoc} *\/\n    protected $casts = ['site_id' => 'integer', 'trigger_value' => 'integer', 'trigger_time_unit' => TriggerTimeUnit::class, 'trigger_time_aspect' => TriggerTimeAspect::class, 'trigger_action' => TriggerAction::class, 'last_message_sent_at' => 'immutable_datetime', 'is_active' => 'boolean'];\n    \/** {@inheritdoc} *\/\n    protected $hidden = ['deleted_at', 'created_at', 'updated_at'];\n    public function filters() : HasMany\n    {\n        return $this->hasMany(Filter::class);\n    }\n    public function templateSettings() : HasMany\n    {\n        return $this->hasMany(TemplateSetting::class);\n    }\n    public function activate() : void\n    {\n        \n    }\n    protected static function newFactory() : AutomatedMessageFactory\n    {\n        return AutomatedMessageFactory::new();\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Infrastructure\/Eloquent\/ORM\/AutomatedMessage.php",
        "originalStartLine": 61
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     }\n     public function activate() : void\n     {\n-        $this->update(['is_active' => true]);\n+        \n     }\n     protected static function newFactory() : AutomatedMessageFactory\n     {",
      "processOutput": ""
    },
    {
      "mutator": {
        "mutatorName": "ProtectedVisibility",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM;\n\nuse Database\\Factories\\AutomatedMessageFactory;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Illuminate\\Database\\Eloquent\\Relations\\HasMany;\nuse Illuminate\\Database\\Eloquent\\SoftDeletes;\nuse Illuminate\\Support\\Collection;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerAction;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeAspect;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeUnit;\n\/**\n * @property Collection $filters\n *\/\nfinal class AutomatedMessage extends Model\n{\n    use SoftDeletes;\n    use HasFactory;\n    \/** {@inheritdoc} *\/\n    public $incrementing = false;\n    \/** {@inheritdoc} *\/\n    protected $guarded = [];\n    \/** {@inheritdoc} *\/\n    protected $casts = ['site_id' => 'integer', 'trigger_value' => 'integer', 'trigger_time_unit' => TriggerTimeUnit::class, 'trigger_time_aspect' => TriggerTimeAspect::class, 'trigger_action' => TriggerAction::class, 'last_message_sent_at' => 'immutable_datetime', 'is_active' => 'boolean'];\n    \/** {@inheritdoc} *\/\n    protected $hidden = ['deleted_at', 'created_at', 'updated_at'];\n    public function filters() : HasMany\n    {\n        return $this->hasMany(Filter::class);\n    }\n    public function templateSettings() : HasMany\n    {\n        return $this->hasMany(TemplateSetting::class);\n    }\n    public function activate() : void\n    {\n        $this->update(['is_active' => true]);\n    }\n    protected static function newFactory() : AutomatedMessageFactory\n    {\n        return AutomatedMessageFactory::new();\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM;\n\nuse Database\\Factories\\AutomatedMessageFactory;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Illuminate\\Database\\Eloquent\\Relations\\HasMany;\nuse Illuminate\\Database\\Eloquent\\SoftDeletes;\nuse Illuminate\\Support\\Collection;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerAction;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeAspect;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerTimeUnit;\n\/**\n * @property Collection $filters\n *\/\nfinal class AutomatedMessage extends Model\n{\n    use SoftDeletes;\n    use HasFactory;\n    \/** {@inheritdoc} *\/\n    public $incrementing = false;\n    \/** {@inheritdoc} *\/\n    protected $guarded = [];\n    \/** {@inheritdoc} *\/\n    protected $casts = ['site_id' => 'integer', 'trigger_value' => 'integer', 'trigger_time_unit' => TriggerTimeUnit::class, 'trigger_time_aspect' => TriggerTimeAspect::class, 'trigger_action' => TriggerAction::class, 'last_message_sent_at' => 'immutable_datetime', 'is_active' => 'boolean'];\n    \/** {@inheritdoc} *\/\n    protected $hidden = ['deleted_at', 'created_at', 'updated_at'];\n    public function filters() : HasMany\n    {\n        return $this->hasMany(Filter::class);\n    }\n    public function templateSettings() : HasMany\n    {\n        return $this->hasMany(TemplateSetting::class);\n    }\n    public function activate() : void\n    {\n        $this->update(['is_active' => true]);\n    }\n    private static function newFactory() : AutomatedMessageFactory\n    {\n        return AutomatedMessageFactory::new();\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Infrastructure\/Eloquent\/ORM\/AutomatedMessage.php",
        "originalStartLine": 64
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     {\n         $this->update(['is_active' => true]);\n     }\n-    protected static function newFactory() : AutomatedMessageFactory\n+    private static function newFactory() : AutomatedMessageFactory\n     {\n         return AutomatedMessageFactory::new();\n     }\n }",
      "processOutput": ""
    },
    {
      "mutator": {
        "mutatorName": "PublicVisibility",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM;\n\nuse Database\\Factories\\FilterFactory;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Illuminate\\Database\\Eloquent\\Relations\\BelongsTo;\nfinal class Filter extends Model\n{\n    use HasFactory;\n    \/** {@inheritdoc} *\/\n    public $incrementing = false;\n    \/** {@inheritdoc} *\/\n    protected $guarded = [];\n    \/** {@inheritdoc} *\/\n    protected $casts = ['site_id' => 'integer', 'value' => 'array'];\n    \/** {@inheritdoc} *\/\n    protected $hidden = ['created_at', 'updated_at'];\n    public function automatedMessage() : BelongsTo\n    {\n        return $this->belongsTo(AutomatedMessage::class, 'id');\n    }\n    protected static function newFactory() : FilterFactory\n    {\n        return FilterFactory::new();\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM;\n\nuse Database\\Factories\\FilterFactory;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Illuminate\\Database\\Eloquent\\Relations\\BelongsTo;\nfinal class Filter extends Model\n{\n    use HasFactory;\n    \/** {@inheritdoc} *\/\n    public $incrementing = false;\n    \/** {@inheritdoc} *\/\n    protected $guarded = [];\n    \/** {@inheritdoc} *\/\n    protected $casts = ['site_id' => 'integer', 'value' => 'array'];\n    \/** {@inheritdoc} *\/\n    protected $hidden = ['created_at', 'updated_at'];\n    protected function automatedMessage() : BelongsTo\n    {\n        return $this->belongsTo(AutomatedMessage::class, 'id');\n    }\n    protected static function newFactory() : FilterFactory\n    {\n        return FilterFactory::new();\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Infrastructure\/Eloquent\/ORM\/Filter.php",
        "originalStartLine": 34
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     protected $casts = ['site_id' => 'integer', 'value' => 'array'];\n     \/** {@inheritdoc} *\/\n     protected $hidden = ['created_at', 'updated_at'];\n-    public function automatedMessage() : BelongsTo\n+    protected function automatedMessage() : BelongsTo\n     {\n         return $this->belongsTo(AutomatedMessage::class, 'id');\n     }",
      "processOutput": ""
    },
    {
      "mutator": {
        "mutatorName": "ProtectedVisibility",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM;\n\nuse Database\\Factories\\FilterFactory;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Illuminate\\Database\\Eloquent\\Relations\\BelongsTo;\nfinal class Filter extends Model\n{\n    use HasFactory;\n    \/** {@inheritdoc} *\/\n    public $incrementing = false;\n    \/** {@inheritdoc} *\/\n    protected $guarded = [];\n    \/** {@inheritdoc} *\/\n    protected $casts = ['site_id' => 'integer', 'value' => 'array'];\n    \/** {@inheritdoc} *\/\n    protected $hidden = ['created_at', 'updated_at'];\n    public function automatedMessage() : BelongsTo\n    {\n        return $this->belongsTo(AutomatedMessage::class, 'id');\n    }\n    protected static function newFactory() : FilterFactory\n    {\n        return FilterFactory::new();\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM;\n\nuse Database\\Factories\\FilterFactory;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Illuminate\\Database\\Eloquent\\Relations\\BelongsTo;\nfinal class Filter extends Model\n{\n    use HasFactory;\n    \/** {@inheritdoc} *\/\n    public $incrementing = false;\n    \/** {@inheritdoc} *\/\n    protected $guarded = [];\n    \/** {@inheritdoc} *\/\n    protected $casts = ['site_id' => 'integer', 'value' => 'array'];\n    \/** {@inheritdoc} *\/\n    protected $hidden = ['created_at', 'updated_at'];\n    public function automatedMessage() : BelongsTo\n    {\n        return $this->belongsTo(AutomatedMessage::class, 'id');\n    }\n    private static function newFactory() : FilterFactory\n    {\n        return FilterFactory::new();\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Infrastructure\/Eloquent\/ORM\/Filter.php",
        "originalStartLine": 39
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     {\n         return $this->belongsTo(AutomatedMessage::class, 'id');\n     }\n-    protected static function newFactory() : FilterFactory\n+    private static function newFactory() : FilterFactory\n     {\n         return FilterFactory::new();\n     }\n }",
      "processOutput": ""
    },
    {
      "mutator": {
        "mutatorName": "PublicVisibility",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM;\n\nuse Database\\Factories\\ReservationFactory;\nuse DateTimeImmutable;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerAction;\nuse RuntimeException;\nfinal class Reservation extends Model\n{\n    use HasFactory;\n    \/** {@inheritdoc} *\/\n    public $incrementing = false;\n    \/** {@inheritdoc} *\/\n    protected $guarded = [];\n    \/** {@inheritdoc} *\/\n    protected $casts = ['site_id' => 'integer', 'price' => 'integer', 'booked_date' => 'immutable_datetime', 'cancellation_date' => 'immutable_datetime', 'check_in' => 'immutable_datetime', 'check_out' => 'immutable_datetime', 'channel_id' => 'integer', 'offer_id' => 'integer', 'status' => ReservationStatus::class];\n    \/** {@inheritdoc} *\/\n    protected $hidden = ['created_at', 'updated_at'];\n    public function triggerOccurrence(TriggerAction $triggerAction) : DateTimeImmutable\n    {\n        $occurrence = $this->{$triggerAction->field()};\n        if (!$occurrence) {\n            throw new RuntimeException('Occurrence date cannot be null');\n        }\n        return $this->{$triggerAction->field()};\n    }\n    protected static function newFactory() : ReservationFactory\n    {\n        return ReservationFactory::new();\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM;\n\nuse Database\\Factories\\ReservationFactory;\nuse DateTimeImmutable;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerAction;\nuse RuntimeException;\nfinal class Reservation extends Model\n{\n    use HasFactory;\n    \/** {@inheritdoc} *\/\n    public $incrementing = false;\n    \/** {@inheritdoc} *\/\n    protected $guarded = [];\n    \/** {@inheritdoc} *\/\n    protected $casts = ['site_id' => 'integer', 'price' => 'integer', 'booked_date' => 'immutable_datetime', 'cancellation_date' => 'immutable_datetime', 'check_in' => 'immutable_datetime', 'check_out' => 'immutable_datetime', 'channel_id' => 'integer', 'offer_id' => 'integer', 'status' => ReservationStatus::class];\n    \/** {@inheritdoc} *\/\n    protected $hidden = ['created_at', 'updated_at'];\n    protected function triggerOccurrence(TriggerAction $triggerAction) : DateTimeImmutable\n    {\n        $occurrence = $this->{$triggerAction->field()};\n        if (!$occurrence) {\n            throw new RuntimeException('Occurrence date cannot be null');\n        }\n        return $this->{$triggerAction->field()};\n    }\n    protected static function newFactory() : ReservationFactory\n    {\n        return ReservationFactory::new();\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Infrastructure\/Eloquent\/ORM\/Reservation.php",
        "originalStartLine": 44
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     protected $casts = ['site_id' => 'integer', 'price' => 'integer', 'booked_date' => 'immutable_datetime', 'cancellation_date' => 'immutable_datetime', 'check_in' => 'immutable_datetime', 'check_out' => 'immutable_datetime', 'channel_id' => 'integer', 'offer_id' => 'integer', 'status' => ReservationStatus::class];\n     \/** {@inheritdoc} *\/\n     protected $hidden = ['created_at', 'updated_at'];\n-    public function triggerOccurrence(TriggerAction $triggerAction) : DateTimeImmutable\n+    protected function triggerOccurrence(TriggerAction $triggerAction) : DateTimeImmutable\n     {\n         $occurrence = $this->{$triggerAction->field()};\n         if (!$occurrence) {",
      "processOutput": ""
    },
    {
      "mutator": {
        "mutatorName": "LogicalNot",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM;\n\nuse Database\\Factories\\ReservationFactory;\nuse DateTimeImmutable;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerAction;\nuse RuntimeException;\nfinal class Reservation extends Model\n{\n    use HasFactory;\n    \/** {@inheritdoc} *\/\n    public $incrementing = false;\n    \/** {@inheritdoc} *\/\n    protected $guarded = [];\n    \/** {@inheritdoc} *\/\n    protected $casts = ['site_id' => 'integer', 'price' => 'integer', 'booked_date' => 'immutable_datetime', 'cancellation_date' => 'immutable_datetime', 'check_in' => 'immutable_datetime', 'check_out' => 'immutable_datetime', 'channel_id' => 'integer', 'offer_id' => 'integer', 'status' => ReservationStatus::class];\n    \/** {@inheritdoc} *\/\n    protected $hidden = ['created_at', 'updated_at'];\n    public function triggerOccurrence(TriggerAction $triggerAction) : DateTimeImmutable\n    {\n        $occurrence = $this->{$triggerAction->field()};\n        if (!$occurrence) {\n            throw new RuntimeException('Occurrence date cannot be null');\n        }\n        return $this->{$triggerAction->field()};\n    }\n    protected static function newFactory() : ReservationFactory\n    {\n        return ReservationFactory::new();\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM;\n\nuse Database\\Factories\\ReservationFactory;\nuse DateTimeImmutable;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerAction;\nuse RuntimeException;\nfinal class Reservation extends Model\n{\n    use HasFactory;\n    \/** {@inheritdoc} *\/\n    public $incrementing = false;\n    \/** {@inheritdoc} *\/\n    protected $guarded = [];\n    \/** {@inheritdoc} *\/\n    protected $casts = ['site_id' => 'integer', 'price' => 'integer', 'booked_date' => 'immutable_datetime', 'cancellation_date' => 'immutable_datetime', 'check_in' => 'immutable_datetime', 'check_out' => 'immutable_datetime', 'channel_id' => 'integer', 'offer_id' => 'integer', 'status' => ReservationStatus::class];\n    \/** {@inheritdoc} *\/\n    protected $hidden = ['created_at', 'updated_at'];\n    public function triggerOccurrence(TriggerAction $triggerAction) : DateTimeImmutable\n    {\n        $occurrence = $this->{$triggerAction->field()};\n        if ($occurrence) {\n            throw new RuntimeException('Occurrence date cannot be null');\n        }\n        return $this->{$triggerAction->field()};\n    }\n    protected static function newFactory() : ReservationFactory\n    {\n        return ReservationFactory::new();\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Infrastructure\/Eloquent\/ORM\/Reservation.php",
        "originalStartLine": 48
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     public function triggerOccurrence(TriggerAction $triggerAction) : DateTimeImmutable\n     {\n         $occurrence = $this->{$triggerAction->field()};\n-        if (!$occurrence) {\n+        if ($occurrence) {\n             throw new RuntimeException('Occurrence date cannot be null');\n         }\n         return $this->{$triggerAction->field()};",
      "processOutput": ""
    },
    {
      "mutator": {
        "mutatorName": "Throw_",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM;\n\nuse Database\\Factories\\ReservationFactory;\nuse DateTimeImmutable;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerAction;\nuse RuntimeException;\nfinal class Reservation extends Model\n{\n    use HasFactory;\n    \/** {@inheritdoc} *\/\n    public $incrementing = false;\n    \/** {@inheritdoc} *\/\n    protected $guarded = [];\n    \/** {@inheritdoc} *\/\n    protected $casts = ['site_id' => 'integer', 'price' => 'integer', 'booked_date' => 'immutable_datetime', 'cancellation_date' => 'immutable_datetime', 'check_in' => 'immutable_datetime', 'check_out' => 'immutable_datetime', 'channel_id' => 'integer', 'offer_id' => 'integer', 'status' => ReservationStatus::class];\n    \/** {@inheritdoc} *\/\n    protected $hidden = ['created_at', 'updated_at'];\n    public function triggerOccurrence(TriggerAction $triggerAction) : DateTimeImmutable\n    {\n        $occurrence = $this->{$triggerAction->field()};\n        if (!$occurrence) {\n            throw new RuntimeException('Occurrence date cannot be null');\n        }\n        return $this->{$triggerAction->field()};\n    }\n    protected static function newFactory() : ReservationFactory\n    {\n        return ReservationFactory::new();\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM;\n\nuse Database\\Factories\\ReservationFactory;\nuse DateTimeImmutable;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerAction;\nuse RuntimeException;\nfinal class Reservation extends Model\n{\n    use HasFactory;\n    \/** {@inheritdoc} *\/\n    public $incrementing = false;\n    \/** {@inheritdoc} *\/\n    protected $guarded = [];\n    \/** {@inheritdoc} *\/\n    protected $casts = ['site_id' => 'integer', 'price' => 'integer', 'booked_date' => 'immutable_datetime', 'cancellation_date' => 'immutable_datetime', 'check_in' => 'immutable_datetime', 'check_out' => 'immutable_datetime', 'channel_id' => 'integer', 'offer_id' => 'integer', 'status' => ReservationStatus::class];\n    \/** {@inheritdoc} *\/\n    protected $hidden = ['created_at', 'updated_at'];\n    public function triggerOccurrence(TriggerAction $triggerAction) : DateTimeImmutable\n    {\n        $occurrence = $this->{$triggerAction->field()};\n        if (!$occurrence) {\n            new RuntimeException('Occurrence date cannot be null');\n        }\n        return $this->{$triggerAction->field()};\n    }\n    protected static function newFactory() : ReservationFactory\n    {\n        return ReservationFactory::new();\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Infrastructure\/Eloquent\/ORM\/Reservation.php",
        "originalStartLine": 49
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     {\n         $occurrence = $this->{$triggerAction->field()};\n         if (!$occurrence) {\n-            throw new RuntimeException('Occurrence date cannot be null');\n+            new RuntimeException('Occurrence date cannot be null');\n         }\n         return $this->{$triggerAction->field()};\n     }",
      "processOutput": ""
    },
    {
      "mutator": {
        "mutatorName": "ProtectedVisibility",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM;\n\nuse Database\\Factories\\ReservationFactory;\nuse DateTimeImmutable;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerAction;\nuse RuntimeException;\nfinal class Reservation extends Model\n{\n    use HasFactory;\n    \/** {@inheritdoc} *\/\n    public $incrementing = false;\n    \/** {@inheritdoc} *\/\n    protected $guarded = [];\n    \/** {@inheritdoc} *\/\n    protected $casts = ['site_id' => 'integer', 'price' => 'integer', 'booked_date' => 'immutable_datetime', 'cancellation_date' => 'immutable_datetime', 'check_in' => 'immutable_datetime', 'check_out' => 'immutable_datetime', 'channel_id' => 'integer', 'offer_id' => 'integer', 'status' => ReservationStatus::class];\n    \/** {@inheritdoc} *\/\n    protected $hidden = ['created_at', 'updated_at'];\n    public function triggerOccurrence(TriggerAction $triggerAction) : DateTimeImmutable\n    {\n        $occurrence = $this->{$triggerAction->field()};\n        if (!$occurrence) {\n            throw new RuntimeException('Occurrence date cannot be null');\n        }\n        return $this->{$triggerAction->field()};\n    }\n    protected static function newFactory() : ReservationFactory\n    {\n        return ReservationFactory::new();\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM;\n\nuse Database\\Factories\\ReservationFactory;\nuse DateTimeImmutable;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\ReservationStatus;\nuse Profitroom\\Communication\\AutomatedMessages\\Domain\\TriggerAction;\nuse RuntimeException;\nfinal class Reservation extends Model\n{\n    use HasFactory;\n    \/** {@inheritdoc} *\/\n    public $incrementing = false;\n    \/** {@inheritdoc} *\/\n    protected $guarded = [];\n    \/** {@inheritdoc} *\/\n    protected $casts = ['site_id' => 'integer', 'price' => 'integer', 'booked_date' => 'immutable_datetime', 'cancellation_date' => 'immutable_datetime', 'check_in' => 'immutable_datetime', 'check_out' => 'immutable_datetime', 'channel_id' => 'integer', 'offer_id' => 'integer', 'status' => ReservationStatus::class];\n    \/** {@inheritdoc} *\/\n    protected $hidden = ['created_at', 'updated_at'];\n    public function triggerOccurrence(TriggerAction $triggerAction) : DateTimeImmutable\n    {\n        $occurrence = $this->{$triggerAction->field()};\n        if (!$occurrence) {\n            throw new RuntimeException('Occurrence date cannot be null');\n        }\n        return $this->{$triggerAction->field()};\n    }\n    private static function newFactory() : ReservationFactory\n    {\n        return ReservationFactory::new();\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Infrastructure\/Eloquent\/ORM\/Reservation.php",
        "originalStartLine": 55
      },
      "diff": "--- Original\n+++ New\n@@ @@\n         }\n         return $this->{$triggerAction->field()};\n     }\n-    protected static function newFactory() : ReservationFactory\n+    private static function newFactory() : ReservationFactory\n     {\n         return ReservationFactory::new();\n     }\n }",
      "processOutput": ""
    },
    {
      "mutator": {
        "mutatorName": "ProtectedVisibility",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM;\n\nuse Database\\Factories\\ScheduleFactory;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nfinal class Schedule extends Model\n{\n    use HasFactory;\n    \/** {@inheritdoc} *\/\n    public $incrementing = false;\n    \/** {@inheritdoc} *\/\n    protected $guarded = [];\n    \/** {@inheritdoc} *\/\n    protected $casts = ['site_id' => 'integer', 'send_at' => 'immutable_datetime', 'sent_at' => 'immutable_datetime'];\n    protected static function newFactory() : ScheduleFactory\n    {\n        return ScheduleFactory::new();\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM;\n\nuse Database\\Factories\\ScheduleFactory;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nfinal class Schedule extends Model\n{\n    use HasFactory;\n    \/** {@inheritdoc} *\/\n    public $incrementing = false;\n    \/** {@inheritdoc} *\/\n    protected $guarded = [];\n    \/** {@inheritdoc} *\/\n    protected $casts = ['site_id' => 'integer', 'send_at' => 'immutable_datetime', 'sent_at' => 'immutable_datetime'];\n    private static function newFactory() : ScheduleFactory\n    {\n        return ScheduleFactory::new();\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Infrastructure\/Eloquent\/ORM\/Schedule.php",
        "originalStartLine": 28
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     protected $guarded = [];\n     \/** {@inheritdoc} *\/\n     protected $casts = ['site_id' => 'integer', 'send_at' => 'immutable_datetime', 'sent_at' => 'immutable_datetime'];\n-    protected static function newFactory() : ScheduleFactory\n+    private static function newFactory() : ScheduleFactory\n     {\n         return ScheduleFactory::new();\n     }\n }",
      "processOutput": ""
    },
    {
      "mutator": {
        "mutatorName": "ProtectedVisibility",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM;\n\nuse Database\\Factories\\TemplateSettingFactory;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nfinal class TemplateSetting extends Model\n{\n    use HasFactory;\n    \/** {@inheritdoc} *\/\n    public $incrementing = false;\n    \/** {@inheritdoc} *\/\n    protected $guarded = [];\n    \/** {@inheritdoc} *\/\n    protected $casts = ['site_id' => 'integer', 'is_html' => 'boolean'];\n    \/** {@inheritdoc} *\/\n    protected $hidden = ['created_at', 'updated_at'];\n    protected static function newFactory() : TemplateSettingFactory\n    {\n        return TemplateSettingFactory::new();\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Infrastructure\\Eloquent\\ORM;\n\nuse Database\\Factories\\TemplateSettingFactory;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nfinal class TemplateSetting extends Model\n{\n    use HasFactory;\n    \/** {@inheritdoc} *\/\n    public $incrementing = false;\n    \/** {@inheritdoc} *\/\n    protected $guarded = [];\n    \/** {@inheritdoc} *\/\n    protected $casts = ['site_id' => 'integer', 'is_html' => 'boolean'];\n    \/** {@inheritdoc} *\/\n    protected $hidden = ['created_at', 'updated_at'];\n    private static function newFactory() : TemplateSettingFactory\n    {\n        return TemplateSettingFactory::new();\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Infrastructure\/Eloquent\/ORM\/TemplateSetting.php",
        "originalStartLine": 33
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     protected $casts = ['site_id' => 'integer', 'is_html' => 'boolean'];\n     \/** {@inheritdoc} *\/\n     protected $hidden = ['created_at', 'updated_at'];\n-    protected static function newFactory() : TemplateSettingFactory\n+    private static function newFactory() : TemplateSettingFactory\n     {\n         return TemplateSettingFactory::new();\n     }\n }",
      "processOutput": ""
    },
    {
      "mutator": {
        "mutatorName": "PublicVisibility",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Interfaces\\Cli\\Commands;\n\nuse Illuminate\\Console\\Command;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class ConsumeCommand extends Command\n{\n    \/**\n     * @var string\n     *\/\n    protected $signature = 'app:consume {--t|time-limit=1800 : The time limit in seconds the worker can run}';\n    \/**\n     * @var string\n     *\/\n    protected $description = 'Consume messages from ESB queue';\n    public function handle(MessageBusInterface $messageBus) : void\n    {\n        $messageBus->consume((int) $this->option('time-limit'));\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Interfaces\\Cli\\Commands;\n\nuse Illuminate\\Console\\Command;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class ConsumeCommand extends Command\n{\n    \/**\n     * @var string\n     *\/\n    protected $signature = 'app:consume {--t|time-limit=1800 : The time limit in seconds the worker can run}';\n    \/**\n     * @var string\n     *\/\n    protected $description = 'Consume messages from ESB queue';\n    protected function handle(MessageBusInterface $messageBus) : void\n    {\n        $messageBus->consume((int) $this->option('time-limit'));\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Interfaces\/Cli\/Commands\/ConsumeCommand.php",
        "originalStartLine": 22
      },
      "diff": "--- Original\n+++ New\n@@ @@\n      * @var string\n      *\/\n     protected $description = 'Consume messages from ESB queue';\n-    public function handle(MessageBusInterface $messageBus) : void\n+    protected function handle(MessageBusInterface $messageBus) : void\n     {\n         $messageBus->consume((int) $this->option('time-limit'));\n     }\n }",
      "processOutput": ""
    },
    {
      "mutator": {
        "mutatorName": "CastInt",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Interfaces\\Cli\\Commands;\n\nuse Illuminate\\Console\\Command;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class ConsumeCommand extends Command\n{\n    \/**\n     * @var string\n     *\/\n    protected $signature = 'app:consume {--t|time-limit=1800 : The time limit in seconds the worker can run}';\n    \/**\n     * @var string\n     *\/\n    protected $description = 'Consume messages from ESB queue';\n    public function handle(MessageBusInterface $messageBus) : void\n    {\n        $messageBus->consume((int) $this->option('time-limit'));\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Interfaces\\Cli\\Commands;\n\nuse Illuminate\\Console\\Command;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class ConsumeCommand extends Command\n{\n    \/**\n     * @var string\n     *\/\n    protected $signature = 'app:consume {--t|time-limit=1800 : The time limit in seconds the worker can run}';\n    \/**\n     * @var string\n     *\/\n    protected $description = 'Consume messages from ESB queue';\n    public function handle(MessageBusInterface $messageBus) : void\n    {\n        $messageBus->consume($this->option('time-limit'));\n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Interfaces\/Cli\/Commands\/ConsumeCommand.php",
        "originalStartLine": 24
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     protected $description = 'Consume messages from ESB queue';\n     public function handle(MessageBusInterface $messageBus) : void\n     {\n-        $messageBus->consume((int) $this->option('time-limit'));\n+        $messageBus->consume($this->option('time-limit'));\n     }\n }",
      "processOutput": ""
    },
    {
      "mutator": {
        "mutatorName": "MethodCallRemoval",
        "originalSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Interfaces\\Cli\\Commands;\n\nuse Illuminate\\Console\\Command;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class ConsumeCommand extends Command\n{\n    \/**\n     * @var string\n     *\/\n    protected $signature = 'app:consume {--t|time-limit=1800 : The time limit in seconds the worker can run}';\n    \/**\n     * @var string\n     *\/\n    protected $description = 'Consume messages from ESB queue';\n    public function handle(MessageBusInterface $messageBus) : void\n    {\n        $messageBus->consume((int) $this->option('time-limit'));\n    }\n}",
        "mutatedSourceCode": "<?php\n\ndeclare (strict_types=1);\nnamespace Profitroom\\Communication\\AutomatedMessages\\Interfaces\\Cli\\Commands;\n\nuse Illuminate\\Console\\Command;\nuse Profitroom\\Microservices\\Bus\\MessageBusInterface;\nfinal class ConsumeCommand extends Command\n{\n    \/**\n     * @var string\n     *\/\n    protected $signature = 'app:consume {--t|time-limit=1800 : The time limit in seconds the worker can run}';\n    \/**\n     * @var string\n     *\/\n    protected $description = 'Consume messages from ESB queue';\n    public function handle(MessageBusInterface $messageBus) : void\n    {\n        \n    }\n}",
        "originalFilePath": "\/var\/www\/app\/Interfaces\/Cli\/Commands\/ConsumeCommand.php",
        "originalStartLine": 24
      },
      "diff": "--- Original\n+++ New\n@@ @@\n     protected $description = 'Consume messages from ESB queue';\n     public function handle(MessageBusInterface $messageBus) : void\n     {\n-        $messageBus->consume((int) $this->option('time-limit'));\n+        \n     }\n }",
      "processOutput": ""
    }
  ],
  "ignored": []
}
